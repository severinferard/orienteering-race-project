(function(e){function t(t){for(var s,i,r=t[0],c=t[1],l=t[2],u=0,v=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&v.push(n[i][0]),n[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);d&&d(t);while(v.length)v.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],s=!0,r=1;r<a.length;r++){var c=a[r];0!==n[c]&&(s=!1)}s&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var s={},n={app:0},o=[];function i(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=s,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=c;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"0982":function(e,t,a){e.exports=a.p+"img/whistle.564dba87.svg"},"2b1f":function(e,t,a){"use strict";a("7dfa")},"34a8":function(e,t,a){"use strict";a("5eef")},3737:function(e,t,a){"use strict";a("6791")},"3aef":function(e,t,a){e.exports=a.p+"img/in-love.e4eb967f.png"},4678:function(e,t,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=o(e);return a(t)}function o(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=o,e.exports=n,n.id="4678"},"47a2":function(e,t,a){},"51e1":function(e,t,a){e.exports=a.p+"img/crying.ff8ceac6.png"},"55af":function(e,t,a){e.exports=a.p+"img/angry.36c173a8.png"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("router-view")],1)},o=[],i={name:"App",components:{},data:function(){return{}}},r=i,c=(a("034f"),a("2877")),l=a("6544"),d=a.n(l),u=a("7496"),v=Object(c["a"])(r,n,o,!1,null,null,null),p=v.exports;d()(v,{VApp:u["a"]});var m=a("8c4f"),h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-app-bar",{attrs:{app:"",color:"transparent",dark:"",flat:""}},[s("v-toolbar-title",[s("router-link",{attrs:{to:"/"}},[s("h3",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[e._v("DORA")])])],1),s("router-link",{attrs:{to:"/tree"}},[s("h4",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[e._v("Dashboard")])])],1),s("div",{staticClass:"top"},[s("img",{staticClass:"drawing",attrs:{width:"30%",src:a("aafe")}}),e._m(0),s("div",{staticClass:"buttons"},[s("v-btn",{attrs:{"x-large":"",dark:"",outlined:"",to:"/tree"}},[e._v("Dashboard")])],1)]),s("div",{staticClass:"bot pa-5"},[s("v-row",{staticClass:"fill-height"},[s("v-col",[s("v-card",{attrs:{height:"100%"}},[s("div",{staticClass:"logo",attrs:{id:"logo-makerlab"}})])],1),s("v-col",[s("v-card",{attrs:{height:"100%"}},[s("div",{staticClass:"logo",attrs:{id:"logo-movuino"}})])],1),s("v-col",[s("v-card",{attrs:{height:"100%"}},[s("div",{staticClass:"logo",attrs:{id:"logo-i3sp"}})])],1)],1)],1)],1)},f=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"slogan"},[a("span",{staticClass:"display-2 white--text font-weight-thin"},[a("span",{staticClass:"font-weight-regular"},[e._v("D")]),e._v("igital "),a("span",{staticClass:"font-weight-regular"},[e._v("O")]),e._v("rienteering "),a("br"),a("span",{staticClass:"font-weight-regular"},[e._v("R")]),e._v("ace "),a("span",{staticClass:"font-weight-regular"},[e._v("A")]),e._v("pplication")])])}],b={name:"Home",components:{},data:function(){return{}}},g=b,x=(a("cccb"),a("40dc")),_=a("8336"),w=a("b0af"),y=a("62ad"),k=a("0fd9"),C=a("2a7f"),j=Object(c["a"])(g,h,f,!1,null,null,null),S=j.exports;d()(j,{VAppBar:x["a"],VBtn:_["a"],VCard:w["a"],VCol:y["a"],VRow:k["a"],VToolbarTitle:C["a"]});var T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-main",[a("v-app-bar",{staticStyle:{"z-index":"999999"},attrs:{color:"primary",dark:"",app:""}},[a("v-toolbar-title",[a("router-link",{attrs:{to:"/"}},[a("h3",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[e._v("DORA")])])],1),a("router-link",{attrs:{to:"/tree"}},[a("h4",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[e._v("Dashboard")])]),a("span",{staticClass:"px-3"},[e._v(e._s(e.school.name))]),a("v-icon",[e._v("mdi-chevron-right")]),a("span",{staticClass:"px-3"},[e._v(e._s(e.clss.name))]),a("v-icon",[e._v("mdi-chevron-right")]),a("span",{staticClass:"px-3"},[e._v(e._s(e.session.name))]),a("v-icon",[e._v("mdi-chevron-right")]),a("span",{staticClass:"px-3"},[e._v(e._s(e.id))]),a("v-spacer"),a("v-btn",{staticClass:"mx-3",attrs:{outlined:"",to:"/session/"+e.session.id+"/#"}},[e._v("Autres éleves")]),a("v-btn",{staticClass:"mx-3",attrs:{outlined:"",to:"/student-summary/"+e.clss.id+"/"+e.id}},[e._v("Resumé des séances")]),a("v-progress-linear",{attrs:{active:e.loadingData,indeterminate:e.loadingData,absolute:"",bottom:"",color:"blue darken-4"}})],1),e.loadingError?a("v-alert",{attrs:{type:"error"}},[e._v(e._s(e.loadingErrorStatus))]):e._e(),a("v-card",{staticClass:"map-wrapper mx-5 mt-5",attrs:{color:"lime"}},[a("MyMap",{ref:"myMap",attrs:{geoJson:e.geoJson,center:e.mapCenter}})],1),a("div",{staticClass:"pt-0 pl-0 mx-5"},[a("v-row",[a("v-col",[a("v-card",[a("v-data-table",{attrs:{headers:e.headers,items:e.balises,"hide-default-footer":"","fixed-header":"",height:"300px"},scopedSlots:e._u([{key:"item.valided",fn:function(t){var s=t.item;return[a("v-icon",{attrs:{color:s.valided?"green":"red"}},[e._v(e._s(s.valided?"mdi-checkbox-marked":"mdi-close-box"))])]}},{key:"item.avgSpeed",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.valided?parseFloat(a.avgSpeed).toFixed(2):"-")+" ")]}},{key:"item.time",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.valided?a.time:"-")+" ")]}},{key:"item.lap",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.valided?a.lap:"-")+" ")]}}],null,!0)})],1)],1)],1),a("v-row",[a("StudentFeedbackForm",{attrs:{rating:e.rating,comment:e.comment},on:{success:function(t){e.snackbar=!0}}})],1)],1),a("v-snackbar",{attrs:{color:"success"},scopedSlots:e._u([{key:"action",fn:function(t){var s=t.attrs;return[a("v-btn",e._b({attrs:{color:"white",text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",s,!1),[e._v(" Fermer ")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[a("span",{staticClass:"overline font-weight-black"},[e._v("Enregistré !")])])],1)},V=[],I=(a("99af"),a("4de4"),a("b0c0"),a("b680"),a("96cf"),a("1da1")),D=a("bc3a"),O=a.n(D),R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"container"}},[a("div",{attrs:{id:"map"}}),a("div",{staticClass:"ui-overlay",attrs:{id:"left-meter"}},[a("v-card",{attrs:{flat:"",color:"transparent",width:"100%"}},[a("StudentDataCard",{attrs:{value:e.distance,percent:e.distance/e.bestDistance*100,title:"Distance",unit:"m"}})],1)],1),a("div",{staticClass:"ui-overlay",attrs:{id:"right-meter"}},[a("v-card",{attrs:{flat:"",color:"transparent",width:"100%"}},[a("StudentDataCard",{attrs:{value:e.formatedChrono,percent:e.bestChrono/e.chrono*100,title:"Chrono",unit:null}})],1)],1),a("div",{staticClass:"ui-overlay",attrs:{id:"bar"}},[a("v-row",{attrs:{justify:"center"}},[a("div",{staticStyle:{width:"80%",height:"50px"}},[a("StudentDataBar",{attrs:{title:"Balises",value:e.beacons.filter((function(e){return e.valided})).length,color:"#ff9900",percent:e.beacons.filter((function(e){return e.valided})).length/e.beacons.length*100,left:!0}})],1)])],1),a("div",{staticClass:"ui-overlay",attrs:{id:"graph"}},[a("StudentGraphCard",{attrs:{title:"Vitesse",unit:"km/h",value:e.averageSpeed,icon:"mdi-speedometer",values:this.speeds,sampleRate:this.sampleRate,beacons:this.beacons}})],1)])},P=[],M=(a("d81d"),a("6cc5"),a("e11e")),N=a.n(M),z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"hud-overlay px-3",attrs:{height:"100%",color:"#078e889c",outlined:""}},[a("v-row",{staticStyle:{height:"200px"}},[a("v-col",[a("v-card-actions",{staticClass:"justify-center"},[a("v-progress-circular",{attrs:{rotate:360,size:150,width:10,value:e.percent,color:"blue"}},[a("v-container",{staticClass:"pt-7",staticStyle:{color:"#fff"},attrs:{fluid:""}},[a("v-row",{attrs:{justify:"center",align:"center"}},[e.$slots.value?a("div",[e._t("value")],2):a("span",{staticClass:"mandalore",staticStyle:{"font-size":"70px"}},[e._v(e._s(e.value))])])],1)],1),a("div",{staticStyle:{position:"absolute"}},[a("v-progress-circular",{attrs:{rotate:20,size:166,width:8,value:e.percent,color:"#fff"}})],1),a("div",{staticStyle:{position:"absolute"}},[a("v-progress-circular",{attrs:{rotate:300,size:130,width:4,indeterminate:"",value:67,color:"#ff9900"}})],1)],1)],1)],1),a("v-row",[a("v-col",[a("v-card-actions",{staticClass:"justify-center"},[a("span",{staticClass:"mandalore",staticStyle:{color:"#fff","font-size":"25px"}},[e._v(e._s(e.title)+" "+e._s(e.unit?"("+e.unit+")":""))])])],1)],1)],1)},$=[],F={props:["title","value","icon","unit","percent"],data:function(){return{}}},L=F,B=(a("580d"),a("99d9")),E=a("a523"),A=a("490a"),J=Object(c["a"])(L,z,$,!1,null,null,null),U=J.exports;d()(J,{VCard:w["a"],VCardActions:B["a"],VCol:y["a"],VContainer:E["a"],VProgressCircular:A["a"],VRow:k["a"]});var q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"hud-overlay pt-3 px-4",attrs:{width:"100%",color:"#078e889c",outlined:""}},[a("v-row",{attrs:{justify:"center",align:"center"}},[e.left?a("v-col",{staticClass:"pt-0 mt-0",attrs:{cols:"2"}},[a("span",{staticClass:"mandalore",staticStyle:{color:"#fff","font-size":"30px"}},[e._v(e._s(e.title))])]):e._e(),a("v-col",{staticClass:"pt-0 mt-0",attrs:{cols:"10"}},[a("v-progress-linear",{attrs:{height:"30px",color:e.color,value:e.percent,width:"200px",rounded:""},scopedSlots:e._u([{key:"default",fn:function(){return[a("strong",{staticClass:"mandalore",staticStyle:{"font-size":"40px",color:"#fff"}},[e._v(e._s(e.value))])]},proxy:!0}])})],1),e.left?e._e():a("v-col",{staticClass:"pt-0 mt-0",staticStyle:{"text-align":"end"},attrs:{cols:"2"}},[a("span",{staticClass:"mandalore",staticStyle:{color:"#fff","font-size":"30px"}},[e._v(e._s(e.title))])])],1)],1)},G=[],Z={props:["title","value","percent","color","left"]},H=Z,W=a("8e36"),Y=Object(c["a"])(H,q,G,!1,null,null,null),K=Y.exports;d()(Y,{VCard:w["a"],VCol:y["a"],VProgressLinear:W["a"],VRow:k["a"]});var Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"px-3 hud-overlay",attrs:{height:"100%",color:"#078e889c",outlined:""}},[a("v-card-title",{staticClass:"py-0"},[a("v-spacer"),a("v-row",{attrs:{align:"end"}},[a("span",{staticClass:"mandalore",staticStyle:{color:"#fff","font-size":"25px"}},[e._v(e._s(e.title))]),a("span",{staticClass:"mandalore mx-3",staticStyle:{color:"#fff","font-size":"35px"}},[e._v(e._s(e.value))]),a("span",{staticClass:"mandalore",staticStyle:{color:"#fff","font-size":"25px"}},[e._v(e._s(e.unit))])])],1),a("v-row",{staticStyle:{height:"200px"}},[a("v-col",[a("Plotly",{attrs:{data:e.plotData.data,layout:e.plotData.layout,"display-mode-bar":!1}})],1)],1)],1)},X=[],ee=(a("4160"),a("d3b7"),a("159b"),a("ddb0"),a("2909")),te=a("04d1"),ae={components:{Plotly:te["Plotly"]},props:["icon","title","unit","value","values","sampleRate","beacons"],data:function(){return{}},mounted:function(){},computed:{plotData:function(){var e=this,t={data:[{y:Object(ee["a"])(this.values),x:Object(ee["a"])(Array(this.values.length).keys()).map((function(t){return t*e.sampleRate})),type:"scatter",line:{shape:"spline",color:"rgb(255, 255, 255)",width:6}}],layout:{paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",height:170,margin:{l:50,r:50,b:40,t:0,pad:4},xaxis:{tickangle:-45,visible:!1,showgrid:!1},yaxis:{showgrid:!1,visible:!1},shapes:[],annotations:[]}};return console.log("beacons",this.beacons),this.beacons.forEach((function(a){a.valided&&(t.layout.shapes.push({type:"line",x0:a.time,y0:0,x1:a.time,y1:Math.max.apply(Math,Object(ee["a"])(e.values)),text:"test",line:{color:"#fff",width:2,dash:"dash"}}),t.layout.annotations.push({x:a.time,y:0,xref:"x",yref:"paper",text:"<b>"+a.id+"</b>",showarrow:!1,yanchor:"top",font:{size:20,weight:3,color:"#fff"}}))})),t}}},se=ae,ne=(a("2b1f"),a("2fa4")),oe=Object(c["a"])(se,Q,X,!1,null,null,null),ie=oe.exports;d()(oe,{VCard:w["a"],VCardTitle:B["c"],VCol:y["a"],VRow:k["a"],VSpacer:ne["a"]});var re=a("85c7"),ce={components:{StudentDataCard:U,StudentDataBar:K,StudentGraphCard:ie},props:["center"],data:function(){return{map:null,averageSpeed:0,distance:0,bestDistance:0,chrono:0,bestChrono:0,speeds:[],beacons:[],mapCenter:[],sampleRate:0}},methods:{setupLeaflet:function(){var e=N.a.map("map");N.a.tileLayer("http://localhost:5000/atlas/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:18,maxNativeZoom:15}).addTo(e),document.on,e.scrollWheelZoom.disable(),e.on("focus",(function(){e.scrollWheelZoom.enable()})),e.on("blur",(function(){e.scrollWheelZoom.disable()})),e.on("zoom",(function(){console.log("zoom")})),delete N.a.Icon.Default.prototype._getIconUrl,N.a.Icon.Default.mergeOptions({iconRetinaUrl:a("584d"),iconUrl:a("6397"),shadowUrl:a("e2b9")}),N.a.geoJSON(this.geojson).addTo(e),this.map=e},addGeoJson:function(e){var t=N.a.divIcon({className:"custom-div-icon",html:"<div class='marker-pin-valided'></div><i class='material-icons'>checkbox-marked</i>",iconSize:[30,42],iconAnchor:[15,42]}),s=N.a.divIcon({className:"custom-div-icon",html:"<div class='marker-pin-not-valided'></div><i class='material-icons'>close-box</i>",iconSize:[30,42],iconAnchor:[15,42],shadowUrl:a("e2b9")}),n=new re;n.setNumberRange(0,10),n.setSpectrum("red","orange","green"),N.a.geoJSON(e,{pointToLayer:function(e,a){return N.a.marker(a,{icon:t})},filter:function(e,t){return console.log(e.properties.valided,t),e.properties.valided}}).addTo(this.map),N.a.geoJSON(e,{pointToLayer:function(e,t){return N.a.marker(t,{icon:s})},filter:function(e){return"Point"===e.geometry.type&&!e.properties.valided}}).addTo(this.map),N.a.geoJSON(e,{style:function(e){return{color:"#"+n.colorAt(e.properties.speed),weight:5}},filter:function(e){return"LineString"===e.geometry.type&&!e.properties.valided}}).addTo(this.map)},loadData:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loadingData=!0,t.prev=1,t.next=4,O.a.get("/api/runs/".concat(e.$route.params.session_id,"/").concat(e.$route.params.student_id));case 4:a=t.sent,s=a.data,console.log("data",s),e.beacons=s.beacons,e.id=s.id,e.chrono=s.time,e.sampleRate=s.sampleRate,e.bestChrono=s.bestTime,console.log(e.bestChrono/e.chrono*100),e.averageSpeed=s.avgSpeed.toFixed(1),e.distance=s.distance.toFixed(),e.bestDistance=s.bestDistance.toFixed(),e.speeds=s.speeds,e.geoJson=s.geoJson,e.mapCenter=s.beacons[0].coords,e.addGeoJson(e.geoJson),e.map.setView([e.mapCenter[1],e.mapCenter[0]],16),t.next=26;break;case 23:t.prev=23,t.t0=t["catch"](1),console.log(t.t0);case 26:e.loadingData=!1;case 27:case"end":return t.stop()}}),t,null,[[1,23]])})))()}},computed:{formatedChrono:function(){return(this.chrono<60?"0":(this.chrono/60).toFixed())+":"+((this.chrono%60).toFixed()<10?"0":"")+(this.chrono%60).toFixed()}},created:function(){this.loadData()},mounted:function(){this.setupLeaflet()}},le=ce,de=(a("3737"),Object(c["a"])(le,R,P,!1,null,null,null)),ue=de.exports;d()(de,{VCard:w["a"],VRow:k["a"]});var ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"ma-3",attrs:{width:"100%"}},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"5"}},[a("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-textarea",{attrs:{rows:"1","prepend-icon":"mdi-comment","auto-grow":"","row-height":"15",label:"Mon ressenti sur ma course...",rules:[function(e){return e.length>0||"Un commentaire est requis"}]},model:{value:e.newComment,callback:function(t){e.newComment=t},expression:"newComment"}})],1)],1),a("v-col"),a("v-col",{staticClass:"text-center",attrs:{cols:"5"}},[a("SmileyRating",{attrs:{value:e.newRating},on:{input:function(t){e.newRating=t}}})],1)],1),a("v-card-actions",{staticClass:"justify-center"},[a("v-btn",{attrs:{disabled:!e.valid},on:{click:e.sendForm}},[e._v("Envoyer")])],1)],1)],1)},pe=[],me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"rating"},[s("input",{attrs:{type:"radio",name:"star",id:"star1"}}),s("label",{class:{active:"star1"==e.selected},attrs:{for:"star1"},on:{click:e.select}},[s("img",{attrs:{src:a("efc6")}})]),s("input",{attrs:{type:"radio",name:"star",id:"star2"}}),s("label",{class:{active:"star2"==e.selected},attrs:{for:"star2"},on:{click:e.select}},[s("img",{attrs:{src:a("3aef")}})]),s("input",{attrs:{type:"radio",name:"star",id:"star3"}}),s("label",{class:{active:"star3"==e.selected},attrs:{for:"star3"},on:{click:e.select}},[s("img",{attrs:{src:a("6d5d")}})]),s("input",{attrs:{type:"radio",name:"star",id:"star4"}}),s("label",{class:{active:"star4"==e.selected},attrs:{for:"star4"},on:{click:e.select}},[s("img",{attrs:{src:a("55af")}})]),s("input",{attrs:{type:"radio",name:"star",id:"star5"}}),s("label",{class:{active:"star5"==e.selected},attrs:{for:"star5"},on:{click:e.select}},[s("img",{attrs:{src:a("51e1")}})])])},he=[],fe={props:["value"],data:function(){return{val:this.rating}},methods:{select:function(e){this.$emit("input",e.target.parentNode.getAttribute("for")[e.target.parentNode.getAttribute("for").length-1])}},computed:{selected:function(){return"star"+this.value}}},be=fe,ge=(a("34a8"),Object(c["a"])(be,me,he,!1,null,"5d3ffc4a",null)),xe=ge.exports,_e={components:{SmileyRating:xe},props:["rating","comment"],data:function(){return{valid:!1,newRating:this.rating,newComment:this.comment}},watch:{rating:function(e){this.newRating=e},comment:function(e){this.newComment=e}},methods:{sendForm:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("send"),t.prev=1,t.next=4,O.a.post("/api/runs/".concat(e.$route.params.session_id,"/").concat(e.$route.params.student_id),{comment:e.newComment,rating:e.newRating});case 4:e.$emit("success"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))()}}},we=_e,ye=a("4bd4"),ke=a("a844"),Ce=Object(c["a"])(we,ve,pe,!1,null,null,null),je=Ce.exports;d()(Ce,{VBtn:_["a"],VCard:w["a"],VCardActions:B["a"],VCol:y["a"],VContainer:E["a"],VForm:ye["a"],VRow:k["a"],VTextarea:ke["a"]});var Se={components:{MyMap:ue,StudentFeedbackForm:je},data:function(){return{id:"",session:{id:this.$route.params.session_id,name:"",date:""},school:{id:"",name:""},clss:{id:"",name:""},averageSpeed:0,distance:0,chrono:0,speeds:[],rating:0,comment:"",headers:[{text:"ID",value:"id"},{text:"Temps (s)",value:"time"},{text:"Tour (s)",value:"lap"},{text:"Vitesse (km/h)",value:"avgSpeed"},{text:"Validée",value:"valided"}],balises:[],geoJson:{},mapCenter:null,loadingData:!1,loadingError:!1,snackbar:!1}},computed:{validedBeacons:function(){return this.balises.filter((function(e){return e.valided})).length},percentBeacons:function(){return this.balises.length?this.validedBeacons/this.balises.length*100:0}},methods:{getMins:function(e){return e%60<10?"0"+e%60:e%60},loadData:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loadingData=!0,t.prev=1,t.next=4,O.a.get("/api/runs/".concat(e.$route.params.session_id,"/").concat(e.$route.params.student_id));case 4:if(a=t.sent,s=a.data,console.log("data",s),s.rawPositions.length){t.next=9;break}throw"Le movuino n'a enregistré aucune données";case 9:if(s.beacons.length){t.next=11;break}throw"Auncune balises enregistrées";case 11:e.balises=s.beacons,e.session.name=s.session_name,e.session.date=s.session_date,e.session.id=e.$route.params.session_id,e.clss.id=s.class_id,e.clss.name=s.class_name,e.school.name=s.school_name,e.school.id=s.school_id,e.id=s.id,e.chrono=s.time,e.averageSpeed=s.avgSpeed.toFixed(1),e.distance=s.distance.toFixed(),e.speeds=s.speeds,e.comment=s.comment,e.rating=s.rating,e.geoJson=s.geoJson,e.mapCenter=s.beacons[0].coords,t.next=34;break;case 30:t.prev=30,t.t0=t["catch"](1),e.loadingError=!0,e.loadingErrorStatus=t.t0;case 34:e.loadingData=!1;case 35:case"end":return t.stop()}}),t,null,[[1,30]])})))()}},created:function(){this.loadData()}},Te=Se,Ve=(a("66b0"),a("0798")),Ie=a("8fea"),De=a("132d"),Oe=a("f6c4"),Re=a("2db4"),Pe=Object(c["a"])(Te,T,V,!1,null,null,null),Me=Pe.exports;d()(Pe,{VAlert:Ve["a"],VAppBar:x["a"],VBtn:_["a"],VCard:w["a"],VCol:y["a"],VDataTable:Ie["a"],VIcon:De["a"],VMain:Oe["a"],VProgressLinear:W["a"],VRow:k["a"],VSnackbar:Re["a"],VSpacer:ne["a"],VToolbarTitle:C["a"]});var Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-main",[a("v-app-bar",{staticStyle:{"z-index":"999999"},attrs:{color:"primary",dark:"",app:""}},[a("v-toolbar-title",[a("router-link",{attrs:{to:"/"}},[a("h3",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[e._v("DORA")])])],1),a("router-link",{attrs:{to:"/tree"}},[a("h4",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[e._v("Dashboard")])]),a("span",{staticClass:"px-3"},[e._v(e._s(e.schoolName))]),a("v-icon",[e._v("mdi-chevron-right")]),a("span",{staticClass:"px-3"},[e._v(e._s(e.className))]),a("v-icon",[e._v("mdi-chevron-right")]),a("span",{staticClass:"px-3"},[e._v(e._s(e.sessionName))]),a("v-spacer"),a("span",{staticClass:"px-3"},[e._v(e._s(e.sessionDate))])],1),a("v-container",{staticClass:"fill-height"},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"8"}},[a("v-card",{staticClass:"overflow-y-auto",attrs:{width:"100%",height:"400px"}},[a("v-toolbar",{attrs:{color:"primary lighten-3",dark:""}},[a("v-toolbar-title",{staticClass:"px-3"},[e._v(e._s(e.sessionName))]),a("v-spacer"),a("v-subheader",{staticClass:"px-3"},[e._v(e._s(e.sessionDate))]),a("v-subheader",{staticClass:"px-3"},[e._v(e._s(e.beacons.length)+" Balises")])],1),e.loading?a("v-container",{staticStyle:{height:"80%"}},[a("v-row",{staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[a("v-col",{staticClass:"subtitle-1 text-center",attrs:{cols:"12"}},[e._v(" Chargement... ")]),a("v-col",{attrs:{cols:"6"}},[a("v-progress-linear",{attrs:{color:"blue accent-4",indeterminate:"",rounded:"",height:"6"}})],1)],1)],1):a("v-list",[a("v-list-item-group",[a("v-list-item",{attrs:{to:"/session/"+this.$route.params.session_id+"/teacher-recap"}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-account-tie")])],1),a("v-list-item-content",[e._v(" Page enseignant ")])],1)],1),a("v-divider"),a("v-list-item-group",e._l(e.students,(function(t){return a("v-list-item",{key:t.id,attrs:{to:e.makeLink(t.id)}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-school")])],1),a("v-list-item-content",[e._v(" "+e._s(t.id)+" ")])],1)})),1)],1)],1)],1)],1)],1),a("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.settings,callback:function(t){e.settings=t},expression:"settings"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"blue"}},[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.settings=!1}}},[a("v-icon",[e._v("mdi-close")])],1),a("v-toolbar-title",[e._v(e._s(e.sessionName)+" | Réglages")]),a("v-spacer")],1),a("v-container",[a("v-card",[a("v-toolbar",{attrs:{flat:""}},[a("v-spacer"),a("v-btn",{on:{click:function(t){return e.newBeacon()}}},[e._v("Nouvelle balise")])],1),a("v-row",[a("v-col",[a("v-data-table",{attrs:{headers:e.headers,items:e.beacons},scopedSlots:e._u([{key:"item.actions",fn:function(t){var s=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editBeacon(s)}}},[e._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(s)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[e._v(" Aucune basise enregistrée ")]},proxy:!0}],null,!0)})],1)],1)],1)],1)],1),a("v-dialog",{model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{staticClass:"mx-3",attrs:{label:"Balise ID"},model:{value:e.editedItem.id,callback:function(t){e.$set(e.editedItem,"id",t)},expression:"editedItem.id"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{staticClass:"mx-3",attrs:{label:"Latitude"},model:{value:e.editedItem.lat,callback:function(t){e.$set(e.editedItem,"lat",t)},expression:"editedItem.lat"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{staticClass:"mx-3",attrs:{label:"Longitude"},model:{value:e.editedItem.long,callback:function(t){e.$set(e.editedItem,"long",t)},expression:"editedItem.long"}})],1)],1),a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"2"}},[a("v-btn",{attrs:{width:"100%"},on:{click:function(t){e.modifie?e.saveChange():e.saveNew()}}},[e._v("Enregistrer")])],1)],1)],1)],1)],1),a("v-snackbar",{attrs:{color:e.axiosSuccess?"success":"error"},scopedSlots:e._u([{key:"action",fn:function(t){var s=t.attrs;return[a("v-btn",e._b({attrs:{color:"white",text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",s,!1),[e._v(" Fermer ")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[a("span",{staticClass:"overline font-weight-black"},[e._v(e._s(e.snackbarMsg))])])],1)],1)},ze=[],$e=(a("c975"),a("fb6a"),a("a434"),a("25f0"),{components:{},data:function(){return{schoolId:"",schoolName:"",sessionId:this.$route.params.session_id,className:"",classId:"",students:[],sessionName:"",sessionDate:"",settings:!1,headers:[{text:"Balise ID",align:"start",value:"id"},{text:"Latitude",value:"lat"},{text:"Longitude",value:"long"},{text:"Actions",value:"actions"}],beacons:[],dialog:!1,editedIndex:-1,editedItem:{_id:"",id:"",lat:"",long:""},modifie:!1,loading:!0,snackbarMsg:"",snackbar:!1,axiosSuccess:!1}},methods:{makeLink:function(e){return{path:"/session/".concat(this.$route.params.session_id,"/student-recap/").concat(e)}},loadData:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,O.a.get("/api/sessions/".concat(e.$route.params.session_id));case 2:a=t.sent,console.log(a.data),e.students=a.data.runs.map((function(e){return{id:e.id}})),e.schoolId=a.data.school_id,e.classId=a.data.class_id,e.className=a.data.class_name,e.schoolName=a.data.school_name,e.sessionName=a.data.session_name,e.sessionDate=a.data.date,console.log("beacons",a.data.beacons),e.beacons=a.data.beacons.map((function(e){return{id:e.id,lat:e.coords[0],long:e.coords[1],_id:e._id}})),e.loading=!1;case 14:case"end":return t.stop()}}),t)})))()},editBeacon:function(e){this.modifie=!0,this.editedItem=Object.assign({},e),this.dialog=!0},newBeacon:function(){this.modifie=!1,this.editedItem={_id:"",id:"",lat:"",long:""},this.dialog=!0},saveChange:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialog=!1,t.prev=1,t.next=4,O.a.put("/api/sessions/".concat(e.$route.params.session_id,"/"),{_id:e.editedItem._id,id:parseInt(e.editedItem.id),coords:[parseFloat(e.editedItem.lat),parseFloat(e.editedItem.long)]});case 4:Object.assign(e.beacons.filter((function(t){return t._id===e.editedItem._id}))[0],e.editedItem),e.axiosSuccess=!0,e.snackbarMsg="Changement enregistré avec succès!",e.snackbar=!0,t.next=16;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log(t.t0),e.axiosSuccess=!1,e.snackbarMsg="Une erreur c'est produite",e.snackbar=!0;case 16:e.modifie=!1;case 17:case"end":return t.stop()}}),t,null,[[1,10]])})))()},saveNew:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialog=!1,e.editedItem._id=Math.random().toString(36).slice(-5),t.prev=2,t.next=5,O.a.post("/api/sessions/".concat(e.$route.params.session_id,"/"),{_id:e.editedItem._id,id:parseInt(e.editedItem.id),coords:[parseFloat(e.editedItem.lat),parseFloat(e.editedItem.long)]});case 5:e.beacons.push(Object.assign({},e.editedItem)),e.axiosSuccess=!0,e.snackbarMsg="Nouvelle balise enregistrée avec succès!",e.snackbar=!0,t.next=17;break;case 11:t.prev=11,t.t0=t["catch"](2),console.log(t.t0),e.axiosSuccess=!1,e.snackbarMsg="Une erreur c'est produite",e.snackbar=!0;case 17:e.modifie=!1;case 18:case"end":return t.stop()}}),t,null,[[2,11]])})))()},deleteItem:function(e){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.beacons.splice(t.beacons.indexOf(e),1),a.prev=1,a.next=4,O.a.delete("/api/sessions/".concat(t.$route.params.session_id,"/"),{data:{_id:e._id}});case 4:t.axiosSuccess=!0,t.snackbarMsg="Balise suprimée avec succès!",t.snackbar=!0,a.next=15;break;case 9:a.prev=9,a.t0=a["catch"](1),console.log(a.t0),t.axiosSuccess=!1,t.snackbarMsg="Une erreur c'est produite",t.snackbar=!0;case 15:case"end":return a.stop()}}),a,null,[[1,9]])})))()}},created:function(){this.loadData()}}),Fe=$e,Le=a("169a"),Be=a("ce7e"),Ee=a("8860"),Ae=a("da13"),Je=a("5d23"),Ue=a("1baa"),qe=a("34c3"),Ge=a("e0c7"),Ze=a("8654"),He=a("71d9"),We=Object(c["a"])(Fe,Ne,ze,!1,null,null,null),Ye=We.exports;d()(We,{VAppBar:x["a"],VBtn:_["a"],VCard:w["a"],VCol:y["a"],VContainer:E["a"],VDataTable:Ie["a"],VDialog:Le["a"],VDivider:Be["a"],VIcon:De["a"],VList:Ee["a"],VListItem:Ae["a"],VListItemContent:Je["a"],VListItemGroup:Ue["a"],VListItemIcon:qe["a"],VMain:Oe["a"],VProgressLinear:W["a"],VRow:k["a"],VSnackbar:Re["a"],VSpacer:ne["a"],VSubheader:Ge["a"],VTextField:Ze["a"],VToolbar:He["a"],VToolbarTitle:C["a"]});var Ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-main",[a("v-app-bar",{attrs:{color:"primary",dark:"",app:""}},[a("v-toolbar-title",[a("router-link",{staticClass:"text-decoration-none",staticStyle:{color:"inherit"},attrs:{to:"/schools/"+e.schoolId+"/classes"}},[a("span",{staticClass:"px-3"},[e._v(e._s(e.schoolName))]),a("v-icon",{attrs:{large:""}},[e._v("mdi-chevron-right")])],1),a("router-link",{staticClass:"text-decoration-none",staticStyle:{color:"inherit"},attrs:{to:"/schools/"+e.schoolId+"/classes/"+e.classId+"/sessions"}},[a("span",{staticClass:"px-3"},[e._v(e._s(e.className))])])],1)],1),a("v-container",{staticClass:"fill-height"},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"8"}},[a("v-card",{staticClass:"overflow-y-auto",attrs:{width:"100%",height:"400px"}},[a("v-toolbar",{attrs:{color:"primary lighten-3",dark:""}},[a("v-toolbar-title",[e._v("Sessions")]),a("v-btn",{attrs:{absolute:"",bottom:"",color:"white",fab:"",right:"",light:""},on:{click:function(t){return t.stopPropagation(),e.newSession(t)}}},[a("v-icon",[e._v("mdi-plus")])],1)],1),e.loading?a("v-container",{staticStyle:{height:"80%"}},[a("v-row",{staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[a("v-col",{staticClass:"subtitle-1 text-center",attrs:{cols:"12"}},[e._v(" Chargement... ")]),a("v-col",{attrs:{cols:"6"}},[a("v-progress-linear",{attrs:{color:"blue accent-4",indeterminate:"",rounded:"",height:"6"}})],1)],1)],1):a("v-list",[a("v-list-item-group",e._l(e.sessions,(function(t){return a("v-list-item",{key:t.id,attrs:{to:e.makeLink(t.id)}},[a("v-list-item-content",[e._v(" "+e._s(t.session_name)+" ")]),a("v-list-item-content",[a("v-subheader",[e._v(e._s(t.date))])],1)],1)})),1)],1)],1)],1)],1)],1),a("v-dialog",{attrs:{width:"50%"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-row",[a("v-col",[a("v-text-field",{staticClass:"mx-4",attrs:{label:"Nom de la session"},model:{value:e.newItem.name,callback:function(t){e.$set(e.newItem,"name",t)},expression:"newItem.name"}})],1),a("v-col",[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Date","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.formattedDate,callback:function(t){e.formattedDate=t},expression:"formattedDate"}},"v-text-field",n,!1),s))]}}]),model:{value:e.dateMenu,callback:function(t){e.dateMenu=t},expression:"dateMenu"}},[a("v-date-picker",{on:{input:function(t){e.dateMenu=!1}},model:{value:e.newItem.date,callback:function(t){e.$set(e.newItem,"date",t)},expression:"newItem.date"}})],1)],1)],1),a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"2"}},[a("v-btn",{on:{click:function(t){return e.validate()}}},[e._v("Créer")])],1)],1)],1)],1)],1)},Qe=[],Xe=a("c1df"),et=a.n(Xe),tt={data:function(){return{sessions:[{id:1,name:"name"}],loading:!0,schoolId:this.$route.params.school_id,dialog:!1,newItem:{},dateMenu:!1,schoolName:"",className:"",classId:"",sessionDate:""}},computed:{formattedDate:function(){return this.newItem.date?et()(this.newItem.date).format("dddd Do MMMM"):""}},methods:{makeLink:function(e){return{path:"/session/".concat(e)}},loadData:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,O.a.get("/api/sessions/",{params:{class_id:e.$route.params.class_id}});case 2:a=t.sent,console.log("data",a.data),e.sessions=a.data.sessions,e.schoolName=a.data.school_name,e.className=a.data.class_name,e.schoolId=a.data.school_id,e.classId=a.data.class_id,e.sessionDate=a.data.session_date,e.loading=!1;case 11:case"end":return t.stop()}}),t)})))()},newSession:function(){console.log("newsession"),this.newItem={name:"",date:""},this.dialog=!0},validate:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialog=!1,a={sessionName:e.newItem.name,date:e.formattedDate},e.sessions.push(a),t.prev=3,t.next=6,O.a.post("/api/sessions/",a,{params:{class_id:e.$route.params.class_id}});case 6:s=t.sent,console.log(s),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](3),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})))()}},created:function(){this.loadData(),et.a.locale("fr")}},at=tt,st=a("2e4b"),nt=a("e449"),ot=Object(c["a"])(at,Ke,Qe,!1,null,null,null),it=ot.exports;d()(ot,{VAppBar:x["a"],VBtn:_["a"],VCard:w["a"],VCol:y["a"],VContainer:E["a"],VDatePicker:st["a"],VDialog:Le["a"],VIcon:De["a"],VList:Ee["a"],VListItem:Ae["a"],VListItemContent:Je["a"],VListItemGroup:Ue["a"],VMain:Oe["a"],VMenu:nt["a"],VProgressLinear:W["a"],VRow:k["a"],VSubheader:Ge["a"],VTextField:Ze["a"],VToolbar:He["a"],VToolbarTitle:C["a"]});var rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-main",[a("v-app-bar",{staticStyle:{"z-index":"999999"},attrs:{color:"primary",dark:"",app:""}},[a("v-toolbar-title",[a("router-link",{attrs:{to:"/"}},[a("h3",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[e._v("DORA")])])],1),a("router-link",{attrs:{to:"/tree"}},[a("h4",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[e._v("Dashboard")])]),a("span",{staticClass:"px-3"},[e._v(e._s(e.schoolName))]),a("v-icon",[e._v("mdi-chevron-right")]),a("span",{staticClass:"px-3"},[e._v(e._s(e.className))]),a("v-icon",[e._v("mdi-chevron-right")]),a("span",{staticClass:"px-3"},[e._v(e._s(e.sessionName))])],1),e.loadingError?a("v-alert",{attrs:{type:"error"}},[e._v(e._s(e.loadingErrorStatus))]):e._e(),a("v-card",{staticClass:"map-wrapper mx-5 mt-5",attrs:{color:"lime"}},[a("TeacherMap",{ref:"myMap",attrs:{geoJson:e.geoJson,center:e.mapCenter,colors:e.colorMap}})],1),a("div",{staticClass:"pt-0 pl-0 mx-5"},[a("v-row",[a("v-col",[a("v-card",[a("v-toolbar",{attrs:{dense:"",color:""}},[a("v-toolbar-title",{staticClass:"mr-10"},[e._v("Balises")]),a("v-spacer"),a("div",[a("v-tabs",{attrs:{"align-with-title":""},model:{value:e.beaconTab,callback:function(t){e.beaconTab=t},expression:"beaconTab"}},[a("v-tabs-slider"),a("v-tab",{key:"plot"},[a("v-icon",[e._v("mdi-chart-bar")])],1),a("v-tab",{key:"table"},[a("v-icon",[e._v("mdi-table")])],1)],1)],1)],1),a("v-tabs-items",{model:{value:e.beaconTab,callback:function(t){e.beaconTab=t},expression:"beaconTab"}},[a("v-tab-item",{key:"table"},[a("div",{staticStyle:{height:"300px",overflow:"scroll"}},[a("Plotly",{attrs:{data:e.beaconPlotData.data,layout:e.beaconPlotData.layout,"display-mode-bar":!1}})],1)]),a("v-tab-item",{key:"plot"},[a("v-data-table",{attrs:{headers:e.beaconTableheader,items:e.beacons,"hide-default-footer":"","fixed-header":"",height:"300px"},scopedSlots:e._u([{key:"item.success",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.success)+"% ")]}}],null,!0)})],1)],1)],1)],1)],1),a("v-row",[a("v-col",[a("v-card",[a("v-toolbar",{attrs:{dense:"",color:""}},[a("v-toolbar-title",{staticClass:"mr-10"},[e._v("Éleves")]),a("v-spacer"),a("div",[a("v-tabs",{attrs:{"align-with-title":""},model:{value:e.studentTab,callback:function(t){e.studentTab=t},expression:"studentTab"}},[a("v-tabs-slider"),a("v-tab",{key:"plot"},[a("v-icon",[e._v("mdi-chart-bar")])],1),a("v-tab",{key:"table"},[a("v-icon",[e._v("mdi-table")])],1)],1)],1)],1),a("v-tabs-items",{model:{value:e.studentTab,callback:function(t){e.studentTab=t},expression:"studentTab"}},[a("v-tab-item",{key:"table"},[a("div",{staticStyle:{height:"500px",overflow:"scroll"}},[a("v-toolbar",[a("v-row",{attrs:{justify:"center",align:"center"}},[a("v-col",{attrs:{cols:"7"}},[a("div",[a("v-tabs",{attrs:{"fixed-tabs":""}},[a("v-tab",{key:"time",on:{click:function(t){e.studentTabPlotType="time"}},model:{value:e.studentTabPlotType,callback:function(t){e.studentTabPlotType=t},expression:"studentTabPlotType"}},[e._v("Chrono")]),a("v-tab",{key:"avgSpeed",on:{click:function(t){e.studentTabPlotType="avgSpeed"}},model:{value:e.studentTabPlotType,callback:function(t){e.studentTabPlotType=t},expression:"studentTabPlotType"}},[e._v("Vitesse")]),a("v-tab",{key:"distance",on:{click:function(t){e.studentTabPlotType="distance"}},model:{value:e.studentTabPlotType,callback:function(t){e.studentTabPlotType=t},expression:"studentTabPlotType"}},[e._v("Distance")]),a("v-tab",{key:"beacons",on:{click:function(t){e.studentTabPlotType="beacons"}},model:{value:e.studentTabPlotType,callback:function(t){e.studentTabPlotType=t},expression:"studentTabPlotType"}},[e._v("Balises")])],1)],1)])],1)],1),a("Plotly",{attrs:{data:e.studentPlotData.data,layout:e.studentPlotData.layout,"display-mode-bar":!1}})],1)]),a("v-tab-item",{key:"plot"},[a("v-data-table",{attrs:{headers:e.studentTableHeader,items:e.students,"hide-default-footer":"","fixed-header":"",height:"500px"},scopedSlots:e._u([{key:"item.time",fn:function(t){var a=t.item;return[e._v(" "+e._s(Math.floor(a.time/60))+":"+e._s(e.getMins(a.time))+" ")]}}],null,!0)})],1)],1)],1)],1)],1)],1)],1)},ct=[],lt=(a("13d5"),a("4ec9"),a("3ca3"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"map"}})}),dt=[],ut={props:["geoJson","center","colors"],data:function(){return{map:null}},watch:{geoJson:function(e){this.addGeoJson(e)},center:function(e){console.log("center",e),this.map.setView([e[1],e[0]],16)}},methods:{setupLeaflet:function(){var e=N.a.map("map");N.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e),document.on,e.scrollWheelZoom.disable(),e.on("focus",(function(){e.scrollWheelZoom.enable()})),e.on("blur",(function(){e.scrollWheelZoom.disable()})),delete N.a.Icon.Default.prototype._getIconUrl,N.a.Icon.Default.mergeOptions({iconRetinaUrl:a("584d"),iconUrl:a("6397"),shadowUrl:a("e2b9")}),N.a.geoJSON(this.geojson).addTo(e),this.map=e},customeIcon:function(e){return N.a.divIcon({className:"custom-div-icon",html:"<div class='marker-pin'></div><span class='id'>".concat(e,"</span>"),iconSize:[30,42],iconAnchor:[15,42],shadowUrl:a("e2b9")})},addGeoJson:function(e){var t=this;console.log("addgeoJson",e),N.a.geoJSON(e,{style:function(e){return{color:t.colors.get(e.properties.id),weight:5}},filter:function(e){return"LineString"===e.geometry.type},onEachFeature:function(e,t){t.bindPopup(e.properties.id)}}).addTo(this.map),N.a.geoJSON(e,{pointToLayer:function(e,a){return N.a.marker(a,{icon:t.customeIcon(e.properties.id)})},filter:function(e){return"Point"===e.geometry.type}}).addTo(this.map)}},mounted:function(){this.setupLeaflet()}},vt=ut,pt=(a("c314"),Object(c["a"])(vt,lt,dt,!1,null,null,null)),mt=pt.exports,ht=a("fd9b"),ft=a.n(ht),bt={components:{TeacherMap:mt,Plotly:te["Plotly"]},data:function(){return{test:1,sessionId:this.$route.params.session_id,mapCenter:null,id:null,geoJson:null,schoolName:"",className:"",beacons:[],students:[],beaconPlotData:{data:null,layout:null},sessionName:"",loadingData:!0,loadingError:!1,loadingErrorStatus:null,colorMap:null,beaconTab:"plot",studentTab:"plot",studentTabPlotType:"time",beaconTableheader:[{text:"Balise ID",value:"id"},{text:"Succès",value:"success"}],studentTableHeader:[{text:"ID",value:"id"},{text:"Chrono",value:"time"},{text:"Distance (m)",value:"distance"},{text:"Vitesse moyenne (km/h)",value:"avgSpeed"},{text:"Balises",value:"beacons"}]}},computed:{studentPlotData:function(){var e=this,t=Object(ee["a"])(this.students).reduce((function(t,a){return t+parseFloat(a[e.studentTabPlotType])}),0)/this.students.length,a={data:[{x:Object(ee["a"])(this.students).sort((function(t,a){return a[e.studentTabPlotType]-t[e.studentTabPlotType]})).map((function(e){return e.id})),y:Object(ee["a"])(this.students).sort((function(t,a){return a[e.studentTabPlotType]-t[e.studentTabPlotType]})).map((function(t){return t[e.studentTabPlotType]})),marker:{color:Object(ee["a"])(this.students).sort((function(t,a){return a[e.studentTabPlotType]-t[e.studentTabPlotType]})).map((function(e){return e.color}))},type:"bar"}],layout:{height:400,margin:{l:50,r:50,b:40,t:0,pad:4},xaxis:{tickangle:-45},shapes:[{type:"line",xref:"paper",x0:0,y0:t,x1:1,y1:t,line:{color:"#ddd",width:4,dash:"dot"}}],annotations:[{x:1,y:t,xref:"paper",yref:"y",text:"Moyenne",showarrow:!1,font:{size:28,weight:15,color:"#ddd"},yanchor:"bottom"}]}};return console.log("average",t),console.log(Object(ee["a"])(this.students)),a}},methods:{getMins:function(e){return e%60<10?"0"+e%60:e%60},createBeaconPlot:function(){this.beaconPlotData={data:[{x:this.beacons.map((function(e){return e.id})),y:this.beacons.map((function(e){return e.success})),type:"bar"}],layout:{height:300,margin:{l:50,r:50,b:40,t:0,pad:4},xaxis:{tickmode:"linear"}}}},loadData:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loadingData=!0,t.prev=1,t.next=4,O.a.get("/api/teacher/".concat(e.$route.params.session_id,"/"));case 4:a=t.sent,s=a.data,console.log("data",s),e.beacons=s.beacons,e.sessionName=s.session_name,e.className=s.class_name,e.schoolName=s.school_name,e.id=s.id,e.geoJson=s.geoJson,e.colorMap=new Map,s.runs.forEach((function(t){e.colorMap.set(t.id,ft()({luminosity:"bright",hue:"random"}))})),e.students=s.runs.map((function(t){return{id:t.id,time:t.time,distance:t.distance.toFixed(0),avgSpeed:t.avgSpeed.toFixed(1),beacons:t.beacons.filter((function(e){return e.valided})).length,color:e.colorMap.get(t.id)}})),e.mapCenter=s.beacons[0].coords,e.createBeaconPlot(),t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](1),e.loadingError=!0,e.loadingErrorStatus=t.t0;case 24:e.loadingData=!1;case 25:case"end":return t.stop()}}),t,null,[[1,20]])})))()}},created:function(){this.loadData()}},gt=bt,xt=a("71a3"),_t=a("c671"),wt=a("fe57"),yt=a("aac8"),kt=a("9a96"),Ct=Object(c["a"])(gt,rt,ct,!1,null,null,null),jt=Ct.exports;d()(Ct,{VAlert:Ve["a"],VAppBar:x["a"],VCard:w["a"],VCol:y["a"],VDataTable:Ie["a"],VIcon:De["a"],VMain:Oe["a"],VRow:k["a"],VSpacer:ne["a"],VTab:xt["a"],VTabItem:_t["a"],VTabs:wt["a"],VTabsItems:yt["a"],VTabsSlider:kt["a"],VToolbar:He["a"],VToolbarTitle:C["a"]});var St=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-main",[a("v-app-bar",{attrs:{color:"primary",dark:"",app:""}},[a("v-toolbar-title",[a("router-link",{staticClass:"text-decoration-none",staticStyle:{color:"inherit"},attrs:{to:"/"}})],1),a("v-spacer")],1),a("v-container",{staticClass:"fill-height"},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"8"}},[a("v-card",{staticClass:"overflow-y-auto",attrs:{width:"100%",height:"400px"}},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:""}},[a("v-toolbar-title",{staticClass:"px-3"},[e._v("Établissements")]),a("v-btn",{attrs:{absolute:"",bottom:"",color:"white",fab:"",right:"",light:""},on:{click:function(t){return t.stopPropagation(),e.newSchool(t)}}},[a("v-icon",[e._v("mdi-plus")])],1)],1),e.loading?a("v-container",{staticStyle:{height:"80%"}},[a("v-row",{staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[a("v-col",{staticClass:"subtitle-1 text-center",attrs:{cols:"12"}},[e._v(" Chargement... ")]),a("v-col",{attrs:{cols:"6"}},[a("v-progress-linear",{attrs:{color:"blue accent-4",indeterminate:"",rounded:"",height:"6"}})],1)],1)],1):a("v-list",[a("v-divider"),a("v-list-item-group",e._l(e.schools,(function(t){return a("v-list-item",{key:t.id,attrs:{to:"schools/"+t.id+"/classes"}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-school")])],1),a("v-list-item-content",[e._v(" "+e._s(t.name)+" ")])],1)})),1)],1)],1)],1)],1),a("v-dialog",{attrs:{width:"50%"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-row",[a("v-col",[a("v-text-field",{staticClass:"mx-4",attrs:{label:"Nom de l'établissement"},model:{value:e.newItem.name,callback:function(t){e.$set(e.newItem,"name",t)},expression:"newItem.name"}})],1),a("v-col",[a("v-text-field",{staticClass:"mx-4",attrs:{label:"Ville"},model:{value:e.newItem.city,callback:function(t){e.$set(e.newItem,"city",t)},expression:"newItem.city"}})],1)],1),a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"2"}},[a("v-btn",{on:{click:function(t){return e.sendPostRequest()}}},[e._v("Créer")])],1)],1)],1)],1)],1)],1)},Tt=[],Vt={data:function(){return{dialog:!1,loading:!1,schools:[],newItem:{}}},methods:{loadData:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,O.a.get("/api/schools/");case 2:a=t.sent,e.schools=a.data,console.log("this.schools",e.schools);case 5:case"end":return t.stop()}}),t)})))()},newSchool:function(){this.newItem={name:"",city:""},this.dialog=!0},sendPostRequest:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialog=!1,t.next=3,O.a.post("/api/schools/",e.newItem);case 3:a=t.sent,e.newItem.id=a.data.id,e.schools.push(e.newItem),console.log(e.newItem);case 7:case"end":return t.stop()}}),t)})))()}},created:function(){this.loadData()}},It=Vt,Dt=Object(c["a"])(It,St,Tt,!1,null,null,null),Ot=Dt.exports;d()(Dt,{VAppBar:x["a"],VBtn:_["a"],VCard:w["a"],VCol:y["a"],VContainer:E["a"],VDialog:Le["a"],VDivider:Be["a"],VIcon:De["a"],VList:Ee["a"],VListItem:Ae["a"],VListItemContent:Je["a"],VListItemGroup:Ue["a"],VListItemIcon:qe["a"],VMain:Oe["a"],VProgressLinear:W["a"],VRow:k["a"],VSpacer:ne["a"],VTextField:Ze["a"],VToolbar:He["a"],VToolbarTitle:C["a"]});var Rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-main",[a("v-app-bar",{attrs:{color:"primary",dark:"",app:""}},[a("v-toolbar-title",[a("router-link",{staticClass:"text-decoration-none",staticStyle:{color:"inherit"},attrs:{to:"/schools/"+e.schoolId+"/classes"}},[a("span",{staticClass:"px-3"},[e._v(e._s(e.schoolName))]),a("v-icon",{attrs:{large:""}},[e._v("mdi-chevron-right")])],1)],1),a("v-spacer")],1),a("v-container",{staticClass:"fill-height"},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"8"}},[a("v-card",{staticClass:"overflow-y-auto",attrs:{width:"100%",height:"400px"}},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:""}},[a("v-toolbar-title",{staticClass:"px-3"},[e._v(e._s(e.schoolName))]),a("v-btn",{attrs:{absolute:"",bottom:"",color:"white",fab:"",right:"",light:""},on:{click:function(t){return t.stopPropagation(),e.newClass(t)}}},[a("v-icon",[e._v("mdi-plus")])],1)],1),e.loading?a("v-container",{staticStyle:{height:"80%"}},[a("v-row",{staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[a("v-col",{staticClass:"subtitle-1 text-center",attrs:{cols:"12"}},[e._v(" Chargement... ")]),a("v-col",{attrs:{cols:"6"}},[a("v-progress-linear",{attrs:{color:"blue accent-4",indeterminate:"",rounded:"",height:"6"}})],1)],1)],1):a("v-list",[a("v-divider"),a("v-list-item-group",e._l(e.clsses,(function(t){return a("v-list-item",{key:t.id,attrs:{to:"classes/"+t.id+"/sessions"}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-school")])],1),a("v-list-item-content",[e._v(" "+e._s(t.name)+" ")])],1)})),1)],1)],1)],1)],1),a("v-dialog",{attrs:{width:"50%"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-row",[a("v-col",[a("v-text-field",{staticClass:"mx-4",attrs:{label:"Nom de classe"},model:{value:e.newItem.name,callback:function(t){e.$set(e.newItem,"name",t)},expression:"newItem.name"}})],1)],1),a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"2"}},[a("v-btn",{on:{click:function(t){return e.sendPostRequest()}}},[e._v("Créer")])],1)],1)],1)],1)],1)],1)},Pt=[],Mt={data:function(){return{dialog:!1,loading:!1,schoolId:this.$route.params.school_id,schoolName:"",clsses:[],newItem:{}}},methods:{loadData:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,O.a.get("/api/schools/".concat(e.$route.params.school_id));case 2:a=t.sent,e.clsses=a.data.classes,e.schoolName=a.data.name,console.log("this.clsses",e.clsses);case 6:case"end":return t.stop()}}),t)})))()},newClass:function(){this.newItem={name:""},this.dialog=!0},sendPostRequest:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialog=!1,t.next=3,O.a.post("/api/schools/".concat(e.$route.params.school_id),e.newItem);case 3:a=t.sent,e.newItem.id=a.data.id,e.clsses.push(e.newItem),console.log(e.newItem);case 7:case"end":return t.stop()}}),t)})))()}},created:function(){this.loadData()}},Nt=Mt,zt=Object(c["a"])(Nt,Rt,Pt,!1,null,null,null),$t=zt.exports;d()(zt,{VAppBar:x["a"],VBtn:_["a"],VCard:w["a"],VCol:y["a"],VContainer:E["a"],VDialog:Le["a"],VDivider:Be["a"],VIcon:De["a"],VList:Ee["a"],VListItem:Ae["a"],VListItemContent:Je["a"],VListItemGroup:Ue["a"],VListItemIcon:qe["a"],VMain:Oe["a"],VProgressLinear:W["a"],VRow:k["a"],VSpacer:ne["a"],VTextField:Ze["a"],VToolbar:He["a"],VToolbarTitle:C["a"]});var Ft=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-main",[s("v-app-bar",{staticStyle:{"z-index":"999999"},attrs:{color:"primary",dark:"",app:""}},[s("v-toolbar-title",[s("router-link",{attrs:{to:"/"}},[s("h3",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[e._v("DORA")])])],1),s("router-link",{attrs:{to:"/tree"}},[s("h4",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[e._v("Dashboard")])]),s("span",{staticClass:"px-3"},[e._v(e._s(e.school.name))]),s("v-icon",[e._v("mdi-chevron-right")]),s("span",{staticClass:"px-3"},[e._v(e._s(e.clss.name))]),s("v-icon",[e._v("mdi-chevron-right")]),s("span",{staticClass:"px-3"},[e._v(e._s(e.id))]),s("v-spacer")],1),s("v-card",[s("v-toolbar",{attrs:{dense:"",color:""}},[s("v-toolbar-title",{staticClass:"mr-10"},[e._v("Éleves")]),s("v-spacer"),s("div",[s("v-tabs",{attrs:{"align-with-title":""},model:{value:e.studentTab,callback:function(t){e.studentTab=t},expression:"studentTab"}},[s("v-tabs-slider"),s("v-tab",{key:"plot"},[s("v-icon",[e._v("mdi-chart-bar")])],1),s("v-tab",{key:"table"},[s("v-icon",[e._v("mdi-table")])],1)],1)],1)],1),s("v-tabs-items",{model:{value:e.studentTab,callback:function(t){e.studentTab=t},expression:"studentTab"}},[s("v-tab-item",{key:"table",staticStyle:{height:"100%"}},[s("div",{staticStyle:{overflow:"scroll"}},[s("v-toolbar",[s("v-row",{attrs:{justify:"center",align:"center"}},[s("v-col",{attrs:{cols:"7"}},[s("div",[s("v-tabs",{attrs:{"fixed-tabs":""}},[s("v-tab",{key:"time",on:{click:function(t){e.studentTabPlotType="time"}},model:{value:e.studentTabPlotType,callback:function(t){e.studentTabPlotType=t},expression:"studentTabPlotType"}},[e._v("Chrono")]),s("v-tab",{key:"avgSpeed",on:{click:function(t){e.studentTabPlotType="avgSpeed"}},model:{value:e.studentTabPlotType,callback:function(t){e.studentTabPlotType=t},expression:"studentTabPlotType"}},[e._v("Vitesse")]),s("v-tab",{key:"distance",on:{click:function(t){e.studentTabPlotType="distance"}},model:{value:e.studentTabPlotType,callback:function(t){e.studentTabPlotType=t},expression:"studentTabPlotType"}},[e._v("Distance")]),s("v-tab",{key:"beaconsSuccess",on:{click:function(t){e.studentTabPlotType="beaconsSuccess"}},model:{value:e.studentTabPlotType,callback:function(t){e.studentTabPlotType=t},expression:"studentTabPlotType"}},[e._v("Balises")])],1)],1)])],1)],1),s("Plotly",{attrs:{data:e.studentPlotData.data,layout:e.studentPlotData.layout,"display-mode-bar":!1}})],1)]),s("v-tab-item",{key:"plot",staticStyle:{height:"100%"}},[s("v-data-table",{attrs:{headers:e.studentTableHeader,items:e.students,"hide-default-footer":"","fixed-header":"",height:"500px"},scopedSlots:e._u([{key:"item.time",fn:function(t){var a=t.item;return[e._v(" "+e._s(Math.floor(a.time/60))+":"+e._s(e.getMins(a.time))+" ")]}},{key:"item.distance",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.distance.toFixed(1))+" ")]}},{key:"item.avgSpeed",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.avgSpeed.toFixed(1))+" ")]}},{key:"item.beaconsSuccess",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.beaconsSuccess.toFixed(1))+" ")]}}],null,!0)})],1)],1)],1),e._l(e.students,(function(t){return s("v-card",{key:t.session.id,staticClass:"mx-6 my-3"},[s("v-row",{staticClass:"px-3",attrs:{"text-align":"end"}},[s("v-col",{staticClass:"px-3",attrs:{"text-align":"end"}},[s("span",{staticClass:"overline"},[e._v(e._s(t.session.name))]),s("br"),s("span",{staticClass:"subheader"},[e._v(e._s(t.session.date))]),e._v(" "+e._s(t.comment)+" ")]),s("v-col",[s("img",{attrs:{src:a("efc6"),height:"100px"}})])],1)],1)}))],2)},Lt=[],Bt={components:{Plotly:te["Plotly"]},data:function(){return{students:[],school:{name:"",id:"",date:""},clss:{name:"",id:""},id:this.$route.params.student_id,studentTab:"plot",studentTabPlotType:"time",beaconTableheader:[{text:"Balise ID",value:"id"},{text:"Succès",value:"success"}],studentTableHeader:[{text:"ID",value:"id"},{text:"Chrono",value:"time"},{text:"Distance (m)",value:"distance"},{text:"Vitesse moyenne (km/h)",value:"avgSpeed"},{text:"Balises",value:"beaconsSuccess"}]}},methods:{getMins:function(e){return e%60<10?"0"+e%60:e%60},loadData:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loadingData=!0,t.prev=1,t.next=4,O.a.get("/api/student-summary/".concat(e.$route.params.class_id,"/").concat(e.$route.params.student_id));case 4:a=t.sent,s=a.data,console.log("data",s),e.school.name=s.school_name,console.log(e.school.name),e.school.id=s.school_id,e.clss.id=s.class_id,e.clss.name=s.class_name,e.students=s.runs.filter((function(e){return!!e})),console.log("this.students",e.students),t.next=21;break;case 16:t.prev=16,t.t0=t["catch"](1),console.log(t.t0),e.loadingError=!0,e.loadingErrorStatus=t.t0;case 21:e.loadingData=!1;case 22:case"end":return t.stop()}}),t,null,[[1,16]])})))()}},created:function(){this.loadData()},computed:{studentPlotData:function(){var e=this;console.log(this.studentTabPlotType),this.students.forEach((function(t){return console.log("run",t[e.studentTabPlotType])}));var t=Object(ee["a"])(this.students).reduce((function(t,a){return t+parseFloat(a[e.studentTabPlotType])}),0)/this.students.length,a={data:[{x:Object(ee["a"])(this.students.map((function(e){return e.session.name}))),y:Object(ee["a"])(this.students.map((function(t){return t[e.studentTabPlotType]}))),marker:{color:"blue"},type:"scatter"}],layout:{margin:{l:50,r:50,b:40,t:0,pad:4},xaxis:{},shapes:[{type:"line",xref:"paper",x0:0,y0:t,x1:1,y1:t,line:{color:"#ddd",width:4,dash:"dot"}}],annotations:[{x:1,y:t,xref:"paper",yref:"y",text:"Moyenne",showarrow:!1,font:{size:28,weight:15,color:"#ddd"},yanchor:"bottom"}]}};return console.log("average",t),console.log(Object(ee["a"])(this.students)),a}}},Et=Bt,At=Object(c["a"])(Et,Ft,Lt,!1,null,null,null),Jt=At.exports;d()(At,{VAppBar:x["a"],VCard:w["a"],VCol:y["a"],VDataTable:Ie["a"],VIcon:De["a"],VMain:Oe["a"],VRow:k["a"],VSpacer:ne["a"],VTab:xt["a"],VTabItem:_t["a"],VTabs:wt["a"],VTabsItems:yt["a"],VTabsSlider:kt["a"],VToolbar:He["a"],VToolbarTitle:C["a"]});var Ut=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-main",[s("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[s("v-toolbar-title",[s("router-link",{attrs:{to:"/"}},[s("h3",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[e._v(" DORA ")])])],1),s("router-link",{attrs:{to:"/tree"}},[s("h4",{staticClass:"secondary--text text--lighten-1 font-weight-light text-decoration-underline px-4"},[e._v(" Dashboard ")])])],1),s("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[s("v-overlay",{attrs:{absolute:!0},model:{value:e.treeLoading,callback:function(t){e.treeLoading=t},expression:"treeLoading"}},[s("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1),s("v-row",{staticClass:"fill-height"},[s("v-col",{staticStyle:{position:"relative"},attrs:{cols:"5"}},[s("v-switch",{attrs:{label:"Mémoriser l'arbre"},model:{value:e.memorizeTree,callback:function(t){e.memorizeTree=t},expression:"memorizeTree"}}),s("v-treeview",{attrs:{hoverable:"",transition:"",activatable:"",items:e.items,"load-children":e.loadNode,active:e.active,open:e.open},on:{"update:active":function(t){e.active=t},"update:open":function(t){e.open=t}}}),s("v-btn",{staticStyle:{"margin-bottom":"43px"},attrs:{absolute:"",bottom:"",color:"white",fab:"",left:"",light:""},nativeOn:{click:function(t){return t.stopPropagation(),e.newSchool()}}},[s("v-icon",[e._v("mdi-plus")])],1)],1),s("v-divider",{attrs:{vertical:""}}),s("v-col",[e.selected?"school"==e.nodeTypeMap[e.selected.id]?s("v-card",{staticClass:"pt-6",attrs:{flat:""}},[s("div",{staticStyle:{position:"absolute",top:"0",right:"0"}},[s("v-btn",{staticClass:"pa-0 ma-0",staticStyle:{"z-index":"4"},attrs:{width:"60",height:"60",depressed:"",color:"transparent"},on:{click:e.deleteSchool}},[s("v-img",{attrs:{contain:"",height:"30",width:"30",src:a("d739")}})],1)],1),s("v-card-text",{staticClass:"text-center"},[s("v-img",{staticClass:"mb-6",attrs:{"max-height":"150",contain:"",src:a("be00")}}),s("h3",{staticClass:"headline mb-2"},[e._v(" "+e._s(e.selected.name)+" ")]),s("h4",{staticClass:"subheading mb-5"},[e._v(" "+e._s(e.selected.city)+" ")]),s("v-divider"),s("h4",{staticClass:"subtitle-1 my-5"},[e._v(e._s(e.selected.classes.length)+" classes enregistrées")]),s("v-toolbar",{attrs:{color:"#46c4a1",dark:"",dense:""}},[s("v-toolbar-title",{staticClass:"px-3"},[e._v("Classes")]),s("v-btn",{attrs:{absolute:"",bottom:"",color:"white",fab:"",right:"",light:""},nativeOn:{click:function(t){return t.stopPropagation(),e.newClass(e.selected)}}},[s("v-icon",[e._v("mdi-plus")])],1)],1),s("v-list",[s("v-list-item-group",e._l(e.selected.classes,(function(t){return s("v-list-item",{key:t.id,on:{click:function(a){return e.test(t._id)}}},[s("v-list-item-icon",[s("v-avatar",[s("v-img",{attrs:{contain:"",src:a("5780")}})],1)],1),s("v-list-item-content",[e._v(" "+e._s(t.name)+" ")])],1)})),1)],1)],1)],1):"class"==e.nodeTypeMap[e.selected.id]?s("v-card",{staticClass:"pt-6",attrs:{flat:""}},[s("div",{staticStyle:{position:"absolute",top:"0",right:"0"}},[s("v-btn",{staticClass:"pa-0 ma-0",staticStyle:{"z-index":"4"},attrs:{width:"60",height:"60",depressed:"",color:"transparent"},on:{click:e.deleteClass}},[s("v-img",{attrs:{contain:"",height:"30",width:"30",src:a("d739")}})],1)],1),s("v-card-text",{staticClass:"text-center"},[s("v-img",{staticClass:"mb-6",attrs:{"max-height":"150",contain:"",src:a("5780")}}),s("h3",{staticClass:"headline mb-5"},[e._v(" "+e._s(e.selected.name)+" ")]),s("v-divider"),s("h4",{staticClass:"subtitle-1 my-5"},[e._v(e._s(e.selected.sessions.length)+" séances enregistrées")]),s("v-toolbar",{attrs:{color:"#46c4a1",dark:"",dense:""}},[s("v-toolbar-title",{staticClass:"px-3"},[e._v("Séances")]),s("v-btn",{attrs:{absolute:"",bottom:"",color:"white",fab:"",right:"",light:""},nativeOn:{click:function(t){return t.stopPropagation(),e.newSession(e.selected)}}},[s("v-icon",[e._v("mdi-plus")])],1)],1),s("v-list",[s("v-list-item-group",e._l(e.selected.sessions,(function(t){return s("v-list-item",{key:t.id,on:{click:function(a){return e.test(t._id)}}},[s("v-list-item-icon",[s("v-img",{attrs:{"max-height":"50",contain:"",src:a("a086")}})],1),s("v-list-item-content",[e._v(" "+e._s(t.session_name)+" ")]),s("v-list-item-content",[s("v-subheader",[e._v(e._s(t.date))])],1)],1)})),1)],1)],1)],1):"session"==e.nodeTypeMap[e.selected.id]?s("v-card",{staticClass:"pt-6",attrs:{flat:""}},[s("div",{staticStyle:{position:"absolute",top:"0",right:"0"}},[s("v-btn",{staticClass:"pa-0 ma-0",staticStyle:{"z-index":"4"},attrs:{width:"60",height:"60",depressed:"",color:"transparent"},on:{click:e.deleteSession}},[s("v-img",{attrs:{contain:"",height:"30",width:"30",src:a("d739")}})],1)],1),s("div",{staticStyle:{position:"absolute",top:"0",left:"0"}},[s("v-btn",{staticClass:"pa-0 ma-0",attrs:{width:"60",height:"60",depressed:"",color:"transparent"},on:{click:function(t){e.settings=!0}}},[s("v-img",{attrs:{contain:"",height:"60",width:"30",src:a("bd03")}})],1),s("v-btn",{staticClass:"pa-0 ma-0",attrs:{width:"60",height:"60",depressed:"",color:"transparent"},on:{click:function(t){return e.$router.push("/session/"+e.selected.id+"/teacher-recap")}}},[s("v-img",{attrs:{contain:"",width:"30",height:"60",src:a("0982")}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"5"}},[s("v-card-text",{staticClass:"text-center pt-8"},[s("v-img",{staticClass:"mb-6",attrs:{"max-height":"150",contain:"",src:a("a086")}})],1)],1),s("v-col",[s("v-card-text",{staticClass:"text-center"},[s("h3",{staticClass:"headline mb-5"},[e._v(" "+e._s(e.selected.name)+" ")]),s("h4",{staticClass:"subheading mb-5"},[e._v(" "+e._s(e.selected.date)+" ")]),s("v-divider"),s("h4",{staticClass:"subtitle-1 my-5"},[e._v(e._s(e.selected.beacons.length)+" Balises enregistrées")]),s("h4",{staticClass:"subtitle-1 my-5"},[e._v(e._s(e.selected.runs.length)+" Éleves enregistrées")])],1)],1)],1),s("v-row",{staticClass:"fill-height"},[s("v-col",{attrs:{cols:"12"}},[s("v-card",[s("v-toolbar",{attrs:{color:"#46c4a1",dark:"",dense:""}},[s("v-toolbar-title",{staticClass:"px-3"},[e._v("Éleves")])],1),s("v-card",{staticClass:"overflow-y-auto",attrs:{flat:""}},[s("v-list",[s("v-list-item-group",e._l(e.selected.runs,(function(t){return s("v-list-item",{key:t.id,on:{click:function(a){return e.test(t._id)}}},[s("v-list-item-icon",[s("v-img",{attrs:{"max-height":"50",contain:"",src:a("f707")}})],1),s("v-list-item-content",[e._v(" "+e._s(t.id)+" ")]),s("v-list-item-content",[e._v(" "+e._s(t.date)+" ")]),s("v-btn",{staticClass:"pa-0 ma-0",attrs:{width:"60",height:"60",depressed:"",color:"transparent"},nativeOn:{click:function(a){return a.stopPropagation(),e.deleteRun(t._id)}}},[s("v-img",{attrs:{contain:"",height:"30",width:"30",src:a("d739")}})],1)],1)})),1)],1)],1)],1)],1)],1)],1):"run"==e.nodeTypeMap[e.selected.id]?s("v-card",{staticClass:"pt-6",attrs:{flat:""}},[e._v(" run "+e._s(e.selected.id)+" "+e._s(e.selected.parent.id)+" ")]):e._e():s("v-card",{staticClass:"pt-6",attrs:{flat:""}},[s("v-card-text",{staticClass:"text-center"},[s("v-img",{staticClass:"mb-10",attrs:{src:a("c012"),"max-height":"150",contain:""}}),s("span",{staticClass:"display-1 grey--text"},[e._v("Sélectionnez un noeud")])],1)],1)],1)],1)],1),s("v-dialog",{attrs:{width:"50%"},model:{value:e.newClassDialog,callback:function(t){e.newClassDialog=t},expression:"newClassDialog"}},[s("v-card",[s("v-row",[s("v-col",[s("v-text-field",{staticClass:"mx-4",attrs:{label:"Nom de classe"},model:{value:e.newItem.name,callback:function(t){e.$set(e.newItem,"name",t)},expression:"newItem.name"}})],1)],1),s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"2"}},[s("v-btn",{on:{click:function(t){return e.newClassSendPost()}}},[e._v("Créer")])],1)],1)],1)],1),s("v-dialog",{attrs:{width:"50%"},model:{value:e.newSessionDialog,callback:function(t){e.newSessionDialog=t},expression:"newSessionDialog"}},[s("v-card",[s("v-row",[s("v-col",[s("v-text-field",{staticClass:"mx-4",attrs:{label:"Nom de la session"},model:{value:e.newItem.name,callback:function(t){e.$set(e.newItem,"name",t)},expression:"newItem.name"}})],1),s("v-col",[s("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,n=t.attrs;return[s("v-text-field",e._g(e._b({attrs:{label:"Date","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.formattedDate,callback:function(t){e.formattedDate=t},expression:"formattedDate"}},"v-text-field",n,!1),a))]}}]),model:{value:e.dateMenu,callback:function(t){e.dateMenu=t},expression:"dateMenu"}},[s("v-date-picker",{on:{input:function(t){e.dateMenu=!1}},model:{value:e.newItem.date,callback:function(t){e.$set(e.newItem,"date",t)},expression:"newItem.date"}})],1)],1)],1),s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"2"}},[s("v-btn",{on:{click:function(t){return e.newSessionSendPost()}}},[e._v("Créer")])],1)],1)],1)],1),s("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.settings,callback:function(t){e.settings=t},expression:"settings"}},[s("v-card",[s("v-toolbar",{attrs:{dark:"",color:"primary"}},[s("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.settings=!1}}},[s("v-icon",[e._v("mdi-close")])],1),s("v-toolbar-title",[e._v("Balises")]),s("v-spacer")],1),s("v-container",[s("v-card",[s("v-toolbar",{attrs:{flat:""}},[s("v-spacer"),s("v-btn",{on:{click:function(t){return e.newBeacon()}}},[e._v("Nouvelle balise")])],1),s("v-row",[s("v-col",[s("v-data-table",{attrs:{headers:e.headers,items:e.beacons},scopedSlots:e._u([{key:"item.actions",fn:function(t){var a=t.item;return[s("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editBeacon(a)}}},[e._v(" mdi-pencil ")]),s("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[e._v(" Aucune basise enregistrée ")]},proxy:!0}],null,!0)})],1)],1)],1)],1)],1),s("v-dialog",{model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("v-card",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"4"}},[s("v-text-field",{staticClass:"mx-3",attrs:{label:"Balise ID"},model:{value:e.editedItem.id,callback:function(t){e.$set(e.editedItem,"id",t)},expression:"editedItem.id"}})],1),s("v-col",{attrs:{cols:"4"}},[s("v-text-field",{staticClass:"mx-3",attrs:{label:"Latitude"},model:{value:e.editedItem.lat,callback:function(t){e.$set(e.editedItem,"lat",t)},expression:"editedItem.lat"}})],1),s("v-col",{attrs:{cols:"4"}},[s("v-text-field",{staticClass:"mx-3",attrs:{label:"Longitude"},model:{value:e.editedItem.long,callback:function(t){e.$set(e.editedItem,"long",t)},expression:"editedItem.long"}})],1)],1),s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"2"}},[s("v-btn",{attrs:{width:"100%"},on:{click:function(t){e.modifie?e.saveChange():e.saveNew()}}},[e._v("Enregistrer")])],1)],1)],1)],1)],1),s("v-snackbar",{attrs:{color:e.axiosSuccess?"success":"error"},scopedSlots:e._u([{key:"action",fn:function(t){var a=t.attrs;return[s("v-btn",e._b({attrs:{color:"white",text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",a,!1),[e._v(" Fermer ")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[s("span",{staticClass:"overline font-weight-black"},[e._v(e._s(e.snackbarMsg))])])],1),s("v-dialog",{attrs:{width:"50%"},model:{value:e.newSchoolDialog,callback:function(t){e.newSchoolDialog=t},expression:"newSchoolDialog"}},[s("v-card",[s("v-row",[s("v-col",[s("v-text-field",{staticClass:"mx-4",attrs:{label:"Nom de l'établissement"},model:{value:e.newItem.name,callback:function(t){e.$set(e.newItem,"name",t)},expression:"newItem.name"}})],1),s("v-col",[s("v-text-field",{staticClass:"mx-4",attrs:{label:"Ville"},model:{value:e.newItem.city,callback:function(t){e.$set(e.newItem,"city",t)},expression:"newItem.city"}})],1)],1),s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"2"}},[s("v-btn",{on:{click:function(t){return e.newSchoolSendPostRequest()}}},[e._v("Créer")])],1)],1)],1)],1),s("v-dialog",{attrs:{width:"500"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[e._v(" Supprimer "+e._s(e.selected?e.selected.name:"")+" ? ")]),"school"===this.delete.type?s("v-card-text",[e._v(" Vous êtes sur le point de supprimer l'établissement \""+e._s(e.selected?e.selected.name:"")+'", cela entrainera la suppression de toutes les classes, séances, et données relative à "'+e._s(e.selected?e.selected.name:"")+'". Voulez vous continuer ? ')]):"class"===this.delete.type?s("v-card-text",[e._v(' Vous êtes sur le point de supprimer la classe "'+e._s(e.selected?e.selected.name:"")+'", cela entrainera la suppression de toutes les séances, et données relative à "'+e._s(e.selected?e.selected.name:"")+'". Voulez vous continuer ? ')]):"session"===this.delete.type?s("v-card-text",[e._v(' Vous êtes sur le point de supprimer la séance "'+e._s(e.selected?e.selected.name:"")+'", cela entrainera la suppression de toutes les données relative à "'+e._s(e.selected?e.selected.name:"")+'". Voulez vous continuer ? ')]):"run"===this.delete.type?s("v-card-text",[e._v(' Vous êtes sur le point de supprimer "'+e._s(e.selected?e.selected.name:"")+'" de cette séance, cela entrainera la suppression de toutes les données de "'+e._s(e.selected?e.selected.name:"")+'" relatives à cette séance. Voulez vous continuer ? ')]):e._e(),s("v-divider"),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v(" Annuler ")]),s("v-btn",{attrs:{color:"primary",text:""},on:{click:this.delete.func}},[e._v(" Oui, supprimer ")])],1)],1)],1)],1)},qt=[],Gt=(a("7db0"),a("caad"),a("6062"),a("2532"),a("5530")),Zt=a("b85c"),Ht={data:function(){return{items:[],itemsFlat:[],nodeIndexCounter:1,nodeTypeMap:{},selectedId:"",active:[],open:[],newItem:{},newClassDialog:!1,newSessionDialog:!1,beaconSettingsDialog:!1,newSchoolDialog:!1,settings:!1,headers:[{text:"Balise ID",align:"start",value:"id"},{text:"Latitude",value:"lat"},{text:"Longitude",value:"long"},{text:"Actions",value:"actions"}],dialog:!1,editedIndex:-1,editedItem:{_id:"",id:"",lat:"",long:""},modifie:!1,loading:!0,snackbarMsg:"",snackbar:!1,axiosSuccess:!1,dateMenu:!1,deleteDialog:!1,delete:{func:null,type:""},memorizeTree:!0,treeLoading:!0}},methods:{test:function(e){this.active.push(e)},loadSchools:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,O.a.get("/api/schools/");case 2:a=t.sent,console.log(a.data),e.items=a.data.map((function(t){e.nodeTypeMap[t.id]="school";var a={id:t.id,name:t.name,children:[],city:t.city,classes:t.classes};return e.itemsFlat.push(a),a}));case 5:case"end":return t.stop()}}),t)})))()},loadNode:function(e){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function a(){var s,n,o,i,r,c,l,d,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:a.t0=t.nodeTypeMap[e.id],a.next="school"===a.t0?3:"class"===a.t0?32:"session"===a.t0?52:56;break;case 3:return console.log("loadNode school"),a.next=6,O.a.get("/api/classes/".concat(e.id));case 6:s=a.sent,console.log("classes",s.data.classes),n=Object(Zt["a"])(s.data.classes),a.prev=9,n.s();case 11:if((o=n.n()).done){a.next=23;break}return i=o.value,t.nodeTypeMap[i.id]="class",a.next=16,O.a.get("/api/sessions/",{params:{class_id:i.id}});case 16:r=a.sent,c={id:i.id,name:i.name,sessions:r.data.sessions,children:[]},console.log("adding class"),t.itemsFlat.push(c),e.children.push(c);case 21:a.next=11;break;case 23:a.next=28;break;case 25:a.prev=25,a.t1=a["catch"](9),n.e(a.t1);case 28:return a.prev=28,n.f(),a.finish(28);case 31:return a.abrupt("break",56);case 32:return a.next=34,O.a.get("/api/sessions/",{params:{class_id:e.id}});case 34:s=a.sent,l=Object(Zt["a"])(s.data.sessions),a.prev=36,u=regeneratorRuntime.mark((function a(){var s,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=d.value,a.next=3,O.a.get("/api/sessions/".concat(s.id));case 3:n=a.sent.data,t.nodeTypeMap[s.id]="session",o={id:s._id,name:s.session_name,children:[],beacons:s.beacons,runs:n.runs.map((function(e){return Object(Gt["a"])(Object(Gt["a"])({},e),{},{_id:s._id+e.id,date:e.date})})),date:s.date},t.itemsFlat.push(o),e.children.push(o);case 8:case"end":return a.stop()}}),a)})),l.s();case 39:if((d=l.n()).done){a.next=43;break}return a.delegateYield(u(),"t2",41);case 41:a.next=39;break;case 43:a.next=48;break;case 45:a.prev=45,a.t3=a["catch"](36),l.e(a.t3);case 48:return a.prev=48,l.f(),a.finish(48);case 51:return a.abrupt("break",56);case 52:return a.next=54,O.a.get("/api/sessions/".concat(e.id));case 54:s=a.sent,e.children=s.data.runs.map((function(a){var s=e.id+a.id;t.nodeTypeMap[s]="run";var n={id:s,name:a.id,parent:e};return t.itemsFlat.push(n),n}));case 56:case"end":return a.stop()}}),a,null,[[9,25,28,31],[36,45,48,51]])})))()},deleteSchool:function(){this.delete.func=this.deleteSchoolSendReq,this.delete.type="school",this.deleteDialog=!0},deleteSchoolSendReq:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.deleteDialog=!1,console.log(e.selected),t.next=4,O.a.delete("/api/schools/".concat(e.selected.id));case 4:console.log("here"),e.items.splice(e.items.indexOf(e.selected),1),e.itemsFlat.splice(e.items.indexOf(e.selected),1);case 7:case"end":return t.stop()}}),t)})))()},deleteClass:function(){this.delete.func=this.deleteClassSendReq,this.delete.type="class",this.deleteDialog=!0},deleteClassSendReq:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.deleteDialog=!1,e.selected=void 0,t.next=4,O.a.delete("/api/classes/".concat(e.selected.id));case 4:a=e.itemsFlat.find((function(t){return t.children.includes(e.selected)})),e.itemsFlat.splice(e.items.indexOf(e.selected),1),a.classes.splice(a.classes.indexOf(e.selected),1),a.children.splice(a.children.indexOf(e.selected),1);case 8:case"end":return t.stop()}}),t)})))()},deleteSession:function(){this.delete.func=this.deleteSessionSendReq,this.delete.type="session",this.deleteDialog=!0},deleteSessionSendReq:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.deleteDialog=!1,e.selected=void 0,t.next=4,O.a.delete("/api/sessions/".concat(e.selected.id));case 4:a=e.itemsFlat.find((function(t){return t.children.includes(e.selected)})),e.itemsFlat.splice(e.items.indexOf(e.selected),1),a.sessions.splice(a.classes.indexOf(e.selected),1),a.children.splice(a.children.indexOf(e.selected),1);case 8:case"end":return t.stop()}}),t)})))()},deleteRun:function(e){this.delete.func=this.deleteRunSendReq,this.delete.type="run",this.delete.id=e,this.deleteDialog=!0},deleteRunSendReq:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.deleteDialog=!1,a=e.selected,s=a.children.find((function(t){return t.id===e.delete.id})),t.next=5,O.a.delete("/api/runs/".concat(e.selected.id,"/").concat(s.name));case 5:a.runs.splice(a.runs.indexOf(a.runs.find((function(e){return e.id===s.name}))),1),a.children.splice(a.children.indexOf(s),1);case 7:case"end":return t.stop()}}),t)})))()},newClass:function(e){this.newItem={parent:e,name:""},this.newClassDialog=!0},newClassSendPost:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var a,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.newItem.parent,delete e.newItem.parent,e.newClassDialog=!1,t.next=5,O.a.post("/api/classes/".concat(a.id),e.newItem);case 5:s=t.sent,n=Object(Gt["a"])(Object(Gt["a"])({},e.newItem),{},{id:s.data.id,children:[],sessions:[]}),console.log("parent",a),e.itemsFlat.find((function(e){return e.id==a.id})).classes.push(n),e.itemsFlat.find((function(e){return e.id==a.id})).children.push(n),e.itemsFlat.push(n),e.nodeTypeMap[n.id]="class";case 12:case"end":return t.stop()}}),t)})))()},newSession:function(e){this.newItem={name:"",date:"",parent:e},this.newSessionDialog=!0},newSessionSendPost:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.newSessionDialog=!1,a={name:e.newItem.name,session_name:e.newItem.name,children:[],beacons:[],runs:[],date:e.formattedDate},t.next=4,O.a.post("/api/sessions/",a,{params:{class_id:e.newItem.parent.id}});case 4:s=t.sent,a.id=s.data.id,e.newItem.parent.sessions.push(a),e.newItem.parent.children.push(a),e.itemsFlat.push(a),e.nodeTypeMap[a.id]="session";case 10:case"end":return t.stop()}}),t)})))()},editBeacon:function(e){this.modifie=!0,this.editedItem=Object.assign({},e),this.dialog=!0},newBeacon:function(){this.modifie=!1,this.editedItem={_id:"",id:"",lat:"",long:""},this.dialog=!0},saveChange:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialog=!1,t.prev=1,t.next=4,O.a.put("/api/sessions/".concat(e.selected.id,"/beacons"),{_id:e.editedItem._id,id:parseInt(e.editedItem.id),coords:[parseFloat(e.editedItem.lat),parseFloat(e.editedItem.long)]});case 4:Object.assign(e.beacons.filter((function(t){return t._id===e.editedItem._id}))[0],e.editedItem),e.axiosSuccess=!0,e.snackbarMsg="Changement enregistré avec succès!",e.snackbar=!0,t.next=16;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log(t.t0),e.axiosSuccess=!1,e.snackbarMsg="Une erreur c'est produite",e.snackbar=!0;case 16:e.modifie=!1;case 17:case"end":return t.stop()}}),t,null,[[1,10]])})))()},saveNew:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialog=!1,e.editedItem._id=Math.random().toString(36).slice(-5),t.prev=2,t.next=5,O.a.post("/api/sessions/".concat(e.selected.id,"/beacons"),{_id:e.editedItem._id,id:parseInt(e.editedItem.id),coords:[parseFloat(e.editedItem.lat),parseFloat(e.editedItem.long)]});case 5:e.selected.beacons.push({id:e.editedItem.id,coords:[e.editedItem.lat,e.editedItem.long]}),e.axiosSuccess=!0,e.snackbarMsg="Nouvelle balise enregistrée avec succès!",e.snackbar=!0,t.next=17;break;case 11:t.prev=11,t.t0=t["catch"](2),console.log(t.t0),e.axiosSuccess=!1,e.snackbarMsg="Une erreur c'est produite",e.snackbar=!0;case 17:e.modifie=!1;case 18:case"end":return t.stop()}}),t,null,[[2,11]])})))()},deleteItem:function(e){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.selected.beacons.splice(t.selected.beacons.indexOf(e),1),a.prev=1,a.next=4,O.a.delete("/api/sessions/".concat(t.selected.id,"/beacons"),{data:{_id:e._id}});case 4:t.axiosSuccess=!0,t.snackbarMsg="Balise suprimée avec succès!",t.snackbar=!0,a.next=15;break;case 9:a.prev=9,a.t0=a["catch"](1),console.log(a.t0),t.axiosSuccess=!1,t.snackbarMsg="Une erreur c'est produite",t.snackbar=!0;case 15:case"end":return a.stop()}}),a,null,[[1,9]])})))()},newSchool:function(){this.newItem={name:"",city:"",classes:[],children:[]},this.newSchoolDialog=!0},newSchoolSendPostRequest:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.newSchoolDialog=!1,t.next=3,O.a.post("/api/schools/",e.newItem);case 3:a=t.sent,e.newItem.id=a.data.id,e.itemsFlat.push(e.newItem),e.items.push(e.newItem),e.nodeTypeMap[e.newItem.id]="school",console.log(e.newItem);case 9:case"end":return t.stop()}}),t)})))()}},computed:{selected:function(){var e=this;if(!this.active.length)return null;var t=this.itemsFlat.find((function(t){return t.id==e.active[0]}));return t},formattedDate:function(){return this.newItem.date?et()(this.newItem.date).format("dddd Do MMMM"):""},beacons:function(){return this.selected&&"session"==this.nodeTypeMap[this.selected.id]?this.selected.beacons.map((function(e){return{id:e.id,lat:e.coords[0],long:e.coords[1],_id:e._id}})):null}},watch:{open:function(e){this.itemsFlat.length&&localStorage.setItem("openedNodes",JSON.stringify(e))},selected:function(e){"run"==this.nodeTypeMap[e.id]&&this.$router.push("/session/".concat(e.parent.id,"/student-recap/").concat(e.name)),this.open.push(e.id)},memorizeTree:function(e){localStorage.setItem("memorizeTree",JSON.stringify(e)),e||localStorage.setItem("openedNodes",JSON.stringify([]))},active:function(e){"school"!==this.nodeTypeMap[e]&&"session"!==this.nodeTypeMap[e]&&"class"!==this.nodeTypeMap[e]||localStorage.setItem("activeNode",JSON.stringify(e))}},created:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var a,s,n,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=0,"memorizeTree"in localStorage||localStorage.setItem("memorizeTree",JSON.stringify(!0)),e.memorizeTree=JSON.parse(localStorage.getItem("memorizeTree")),t.next=5,e.loadSchools();case 5:if(!e.memorizeTree){t.next=26;break}a=500,s=Object(ee["a"])(new Set(JSON.parse(localStorage.getItem("openedNodes")))),n=Object(Zt["a"])(s),t.prev=9,i=regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=o.value,t.prev=1,s=e.itemsFlat.find((function(e){return e.id===a})),t.next=5,e.loadNode(s);case 5:e.open.push(s.id),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})),n.s();case 12:if((o=n.n()).done){t.next=16;break}return t.delegateYield(i(),"t0",14);case 14:t.next=12;break;case 16:t.next=21;break;case 18:t.prev=18,t.t1=t["catch"](9),n.e(t.t1);case 21:return t.prev=21,n.f(),t.finish(21);case 24:e.active="activeNode"in localStorage?JSON.parse(localStorage.getItem("activeNode")):[],console.log("init active",e.active);case 26:setTimeout((function(){e.treeLoading=!1}),a);case 27:case"end":return t.stop()}}),t,null,[[9,18,21,24]])})))()}},Wt=Ht,Yt=a("8212"),Kt=a("adda"),Qt=a("a797"),Xt=a("b73d"),ea=a("eb2a"),ta=Object(c["a"])(Wt,Ut,qt,!1,null,null,null),aa=ta.exports;d()(ta,{VAppBar:x["a"],VAvatar:Yt["a"],VBtn:_["a"],VCard:w["a"],VCardActions:B["a"],VCardText:B["b"],VCardTitle:B["c"],VCol:y["a"],VContainer:E["a"],VDataTable:Ie["a"],VDatePicker:st["a"],VDialog:Le["a"],VDivider:Be["a"],VIcon:De["a"],VImg:Kt["a"],VList:Ee["a"],VListItem:Ae["a"],VListItemContent:Je["a"],VListItemGroup:Ue["a"],VListItemIcon:qe["a"],VMain:Oe["a"],VMenu:nt["a"],VOverlay:Qt["a"],VProgressCircular:A["a"],VRow:k["a"],VSnackbar:Re["a"],VSpacer:ne["a"],VSubheader:Ge["a"],VSwitch:Xt["a"],VTextField:Ze["a"],VToolbar:He["a"],VToolbarTitle:C["a"],VTreeview:ea["a"]});var sa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-main",[a("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[a("v-toolbar-title",[a("router-link",{attrs:{to:"/"}},[a("h3",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[e._v(" DORA ")])])],1),a("router-link",{attrs:{to:"/tree"}},[a("h4",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[e._v(" Dashboard ")])])],1),a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[a("v-row",{staticClass:"px-5",attrs:{height:"100px"}},[a("v-col",[a("div",{attrs:{width:"200"}},[a("v-row",[a("v-col",[a("v-text-field",{attrs:{width:"100",label:"Code de la séance",placeholder:"ie: 6ebj7jkbqd63d"},model:{value:e.sessionCode,callback:function(t){e.sessionCode=t},expression:"sessionCode"}})],1),a("v-col",[a("v-btn",{on:{click:e.sendSessionCode}},[e._v("valider")])],1)],1)],1)]),a("v-col",[a("div",[a("h3",{staticClass:"headline mb-5"},[e._v(" Session 1 ")]),a("v-row",[a("v-col",[a("h4",{staticClass:"subheading my-5"},[e._v(" 21 mars 2001 ")]),a("h4",{staticClass:"subtitle-1 my-5"},[e._v("3 Balises enregistrées")])]),a("v-col",[a("h4",{staticClass:"subtitle-1 my-5"},[e._v("Notre dame les oiseaux")]),a("h4",{staticClass:"subtitle-1 my-5"},[e._v("5ème B")])])],1)],1)])],1),a("v-row",[a("v-col",[a("v-card",[a("v-data-table",{attrs:{headers:e.headers,items:e.data,"hide-default-footer":"","fixed-header":"",height:"300px"}})],1)],1)],1)],1)],1)},na=[],oa={data:function(){return{sessionCode:"",headers:[{text:"Movuino",value:"id"},{text:"Status",value:"status"},{text:"Temps",value:"time"},{text:"Actions",value:""}],data:[{id:"mov1",status:"connected",time:void 0}]}},methods:{sendSessionCode:function(){}}},ia=oa,ra=Object(c["a"])(ia,sa,na,!1,null,null,null),ca=ra.exports;d()(ra,{VAppBar:x["a"],VBtn:_["a"],VCard:w["a"],VCol:y["a"],VContainer:E["a"],VDataTable:Ie["a"],VMain:Oe["a"],VRow:k["a"],VTextField:Ze["a"],VToolbarTitle:C["a"]}),s["a"].use(m["a"]);var la=[{path:"/",name:"Home",component:S},{path:"/session/:session_id",name:"Session",component:Ye},{path:"/session/",name:"Sessions",component:it},{path:"/schools/",name:"Schools selection",component:Ot},{path:"/schools/:school_id/classes",name:"Class selection",component:$t},{path:"/schools/:school_id/classes/:class_id/sessions",name:"Session selection",component:it},{path:"/session/:session_id/student-recap/:student_id",name:"Student recap",component:Me},{path:"/session/:session_id/teacher-recap/",name:"teacher recap",component:jt},{path:"/student-summary/:class_id/:student_id",name:"student summary",component:Jt},{path:"/tree",name:"tree",component:aa},{path:"/control",name:"control",component:ca}],da=new m["a"]({mode:"history",base:"/",routes:la}),ua=da,va=a("f309");s["a"].use(va["a"]);var pa=new va["a"]({theme:{themes:{light:{primary:"#116466",secondary:"#ffcb9a"}}}});a("d1e78");s["a"].config.productionTip=!1,new s["a"]({router:ua,vuetify:pa,render:function(e){return e(p)}}).$mount("#app")},5780:function(e,t,a){e.exports=a.p+"img/teamwork.fa7e679f.svg"},"580d":function(e,t,a){"use strict";a("ddeb")},"5ced":function(e,t,a){},"5eef":function(e,t,a){},"66b0":function(e,t,a){"use strict";a("47a2")},6791:function(e,t,a){},"6d5d":function(e,t,a){e.exports=a.p+"img/happy.7bc321c1.png"},"7dfa":function(e,t,a){},"85ec":function(e,t,a){},"9ec2":function(e,t,a){},a086:function(e,t,a){e.exports=a.p+"img/map.8794c65a.svg"},aafe:function(e,t,a){e.exports=a.p+"img/undraw_img.cad21c1c.svg"},bd03:function(e,t,a){e.exports=a.p+"img/marker.3d0c5526.svg"},be00:function(e,t,a){e.exports=a.p+"img/school.c4cf3227.svg"},c012:function(e,t,a){e.exports=a.p+"img/left-arrow.19043d8a.svg"},c314:function(e,t,a){"use strict";a("9ec2")},cccb:function(e,t,a){"use strict";a("5ced")},d739:function(e,t,a){e.exports=a.p+"img/delete.a1bb2394.svg"},ddeb:function(e,t,a){},efc6:function(e,t,a){e.exports=a.p+"img/cool.e1085fca.png"},f707:function(e,t,a){e.exports=a.p+"img/chronometer.975d3fd2.svg"}});
//# sourceMappingURL=app.6638a0f1.js.map
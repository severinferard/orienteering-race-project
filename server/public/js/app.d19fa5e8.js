(function(e){function t(t){for(var n,r,i=t[0],c=t[1],l=t[2],d=0,v=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&v.push(s[r][0]),s[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(v.length)v.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,r=1;r<a.length;r++){var c=a[r];0!==s[c]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var n={},s={app:0},o=[];function r(e){return i.p+"js/"+({about:"about"}[e]||e)+"."+{about:"bd0eab71"}[e]+".js"}function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.e=function(e){var t=[],a=s[e];if(0!==a)if(a)t.push(a[2]);else{var n=new Promise((function(t,n){a=s[e]=[t,n]}));t.push(a[2]=n);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=r(e);var l=new Error;o=function(t){c.onerror=c.onload=null,clearTimeout(d);var a=s[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",l.name="ChunkLoadError",l.type=n,l.request=o,a[1](l)}s[e]=void 0}};var d=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},3737:function(e,t,a){"use strict";a("6791")},4678:function(e,t,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=o,e.exports=s,s.id="4678"},"47a2":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("router-view")],1)},o=[],r={name:"App",components:{},data:function(){return{}}},i=r,c=a("2877"),l=a("6544"),d=a.n(l),u=a("7496"),v=Object(c["a"])(i,s,o,!1,null,null,null),p=v.exports;d()(v,{VApp:u["a"]});a("d3b7");var m=a("8c4f"),b=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},f=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("img",{attrs:{alt:"Vue logo",src:a("cf05")}})])}],h={name:"Home",components:{}},g=h,k=Object(c["a"])(g,b,f,!1,null,null,null),j=k.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-main",[a("v-app-bar",{attrs:{color:"blue",dark:""}},[a("v-toolbar-title",[a("router-link",{staticClass:"text-decoration-none",staticStyle:{color:"inherit"},attrs:{to:"/session/"+e.sessionId}},[a("v-icon",{attrs:{large:""}},[e._v("mdi-chevron-left")]),e._v(" "+e._s(e.sessionName)+" ")],1)],1),a("v-spacer"),a("span",{staticClass:"px-3"},[e._v(e._s(e.id))]),a("v-progress-linear",{attrs:{active:e.loadingData,indeterminate:e.loadingData,absolute:"",bottom:"",color:"blue darken-4"}})],1),e.loadingError?a("v-alert",{attrs:{type:"error"}},[e._v(e._s(e.loadingErrorStatus))]):e._e(),a("v-card",{staticClass:"map-wrapper mx-5 mt-5",attrs:{color:"lime"}},[a("MyMap",{ref:"myMap",attrs:{geoJson:e.geoJson,center:e.mapCenter}})],1),a("div",{staticClass:"pt-0 pl-0 mx-5"},[a("v-row",{attrs:{height:"300px"}},[a("v-col",{attrs:{cols:"6"}},[a("v-row",{staticStyle:{height:"100%"}},[a("v-col",{attrs:{cols:"4"}},[a("StudentDataCard",{attrs:{icon:"mdi-timer",title:"Chrono",unit:"min",percent:"100"},scopedSlots:e._u([{key:"value",fn:function(){return[a("span",{staticClass:"display-2"},[e._v(e._s(Math.floor(e.chrono/60)))]),a("span",{staticClass:"display-1"},[e._v(":")]),a("span",{staticClass:"display-2"},[e._v(e._s(e.getMins(e.chrono)))])]},proxy:!0}])})],1),a("v-col",{attrs:{cols:"4"}},[a("StudentDataCard",{attrs:{icon:"mdi-shoe-print",value:e.distance,percent:"100",title:"Distance",unit:"m"}})],1),a("v-col",{attrs:{cols:"4"}},[a("StudentDataCard",{attrs:{icon:"mdi-crosshairs-gps",value:e.validedBeacons,title:"Balises",unit:"-",percent:e.percentBeacons}})],1)],1)],1),a("v-col",{attrs:{cols:"6"}},[a("v-row",{staticStyle:{height:"100%"}},[a("v-col",[a("StudentGraphCard",{attrs:{title:"Vitesse",unit:"km/h",value:e.averageSpeed,icon:"mdi-speedometer"},scopedSlots:e._u([{key:"graph",fn:function(){return[a("v-sheet",[a("v-sparkline",{attrs:{smooth:16,gradient:["#ffd200","#1feaea","#f72047"],"line-width":3,value:e.speeds,"auto-draw":"","stroke-linecap":"round"}})],1)]},proxy:!0}])})],1)],1)],1)],1),a("v-row",[a("v-col",[a("v-card",[a("v-data-table",{attrs:{headers:e.headers,items:e.balises,"hide-default-footer":"","fixed-header":"",height:"300px"},scopedSlots:e._u([{key:"item.valided",fn:function(t){var n=t.item;return[a("v-icon",{attrs:{color:n.valided?"green":"red"}},[e._v(e._s(n.valided?"mdi-checkbox-marked":"mdi-close-box"))])]}},{key:"item.avgSpeed",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.valided?parseFloat(a.avgSpeed).toFixed(2):"-")+" ")]}},{key:"item.time",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.valided?a.time:"-")+" ")]}},{key:"item.lap",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.valided?a.lap:"-")+" ")]}}],null,!0)})],1)],1)],1),a("v-row",[a("StudentFeedbackForm",{attrs:{rating:e.rating,comment:e.comment},on:{success:function(t){e.snackbar=!0}}})],1)],1),a("v-snackbar",{attrs:{color:"success"},scopedSlots:e._u([{key:"action",fn:function(t){var n=t.attrs;return[a("v-btn",e._b({attrs:{color:"white",text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",n,!1),[e._v(" Fermer ")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[a("span",{staticClass:"overline font-weight-black"},[e._v("Enregistré !")])])],1)},_=[],x=(a("99af"),a("4de4"),a("b680"),a("96cf"),a("1da1")),w=a("bc3a"),T=a.n(w),C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"map"}})},V=[],S=(a("d81d"),a("6cc5"),a("e11e")),I=a.n(S),D=a("85c7"),P={props:["geoJson","center"],data:function(){return{map:null}},watch:{geoJson:function(e){this.addGeoJson(e)},center:function(e){console.log("center",e),this.map.setView([e[1],e[0]],16)}},methods:{setupLeaflet:function(){var e=I.a.map("map");I.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e),document.on,e.scrollWheelZoom.disable(),e.on("focus",(function(){e.scrollWheelZoom.enable()})),e.on("blur",(function(){e.scrollWheelZoom.disable()})),delete I.a.Icon.Default.prototype._getIconUrl,I.a.Icon.Default.mergeOptions({iconRetinaUrl:a("584d"),iconUrl:a("6397"),shadowUrl:a("e2b9")}),I.a.geoJSON(this.geojson).addTo(e),this.map=e},addGeoJson:function(e){var t=I.a.divIcon({className:"custom-div-icon",html:"<div class='marker-pin-valided'></div><i class='material-icons'>checkbox-marked</i>",iconSize:[30,42],iconAnchor:[15,42]}),n=I.a.divIcon({className:"custom-div-icon",html:"<div class='marker-pin-not-valided'></div><i class='material-icons'>close-box</i>",iconSize:[30,42],iconAnchor:[15,42],shadowUrl:a("e2b9")}),s=new D;s.setNumberRange(0,10),s.setSpectrum("red","orange","green"),I.a.geoJSON(e,{pointToLayer:function(e,a){return I.a.marker(a,{icon:t})},filter:function(e,t){return console.log(e.properties.valided,t),e.properties.valided}}).addTo(this.map),I.a.geoJSON(e,{pointToLayer:function(e,t){return I.a.marker(t,{icon:n})},filter:function(e){return"Point"===e.geometry.type&&!e.properties.valided}}).addTo(this.map),I.a.geoJSON(e,{style:function(e){return{color:"#"+s.colorAt(e.properties.speed),weight:5}},filter:function(e){return"LineString"===e.geometry.type&&!e.properties.valided}}).addTo(this.map)}},mounted:function(){this.setupLeaflet()}},O=P,M=(a("3737"),Object(c["a"])(O,C,V,!1,null,null,null)),R=M.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{height:"100%"}},[a("v-card-title",{staticClass:"py-0"},[a("v-icon",{staticClass:"mt-2",attrs:{"x-large":"",color:"primary"}},[e._v(e._s(e.icon))])],1),a("v-row",{staticStyle:{height:"200px"}},[a("v-col",[a("v-card-actions",{staticClass:"justify-center"},[a("v-progress-circular",{attrs:{rotate:360,size:150,width:5,value:e.percent,color:"primary"}},[a("v-container",{staticClass:"pt-7",attrs:{fluid:""}},[a("v-row",[a("v-col",{staticClass:"pa-0"},[e.$slots.value?a("div",[e._t("value")],2):a("span",{staticClass:"display-2"},[e._v(e._s(e.value))])])],1),a("v-row",[a("v-col",{staticClass:"pa-0 text-center"},[e._v(e._s(e.unit))])],1)],1)],1)],1)],1)],1),a("v-row",[a("v-col",[a("v-card-actions",{staticClass:"justify-center"},[a("span",{staticClass:"overline"},[e._v(e._s(e.title))])])],1)],1)],1)},N=[],$={props:["title","value","icon","unit","percent"],data:function(){return{}}},E=$,z=a("b0af"),J=a("99d9"),B=a("62ad"),F=a("a523"),A=a("132d"),U=a("490a"),G=a("0fd9"),W=Object(c["a"])(E,L,N,!1,null,null,null),Z=W.exports;d()(W,{VCard:z["a"],VCardActions:J["a"],VCardTitle:J["b"],VCol:B["a"],VContainer:F["a"],VIcon:A["a"],VProgressCircular:U["a"],VRow:G["a"]});var q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{attrs:{height:"100%"}},[a("v-card-title",{staticClass:"py-0"},[a("v-icon",{staticClass:"mt-2",attrs:{"x-large":"",color:"primary lighten-1"}},[e._v(" "+e._s(e.icon)+" ")]),a("v-spacer"),a("v-row",{attrs:{align:"end"}},[a("span",{staticClass:"display-1 primary--text"},[e._v(e._s(e.value))]),a("span",{staticClass:"overline ml-1"},[e._v(e._s(e.unit))])])],1),a("v-row",{staticStyle:{height:"200px"}},[a("v-col",[e.$slots.graph?a("div",[e._t("graph")],2):e._e()])],1),a("v-row",[a("v-col",[a("v-card-actions",{staticClass:"justify-center"},[a("span",{staticClass:"overline"},[e._v(e._s(e.title))])])],1)],1)],1)},H=[],K={props:["icon","title","unit","value"]},Q=K,X=a("2fa4"),Y=Object(c["a"])(Q,q,H,!1,null,null,null),ee=Y.exports;d()(Y,{VCard:z["a"],VCardActions:J["a"],VCardTitle:J["b"],VCol:B["a"],VIcon:A["a"],VRow:G["a"],VSpacer:X["a"]});var te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"ma-3",attrs:{width:"100%"}},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"5"}},[a("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-textarea",{attrs:{rows:"1","prepend-icon":"mdi-comment","auto-grow":"","row-height":"15",label:"Mon ressenti sur ma course...",rules:[function(e){return e.length>0||"Un commentaire est requis"}]},model:{value:e.newComment,callback:function(t){e.newComment=t},expression:"newComment"}})],1)],1),a("v-col"),a("v-col",{staticClass:"text-center",attrs:{cols:"5"}},[a("v-rating",{attrs:{"background-color":"primary lighten-3",color:"primary",large:""},model:{value:e.newRating,callback:function(t){e.newRating=t},expression:"newRating"}})],1)],1),a("v-card-actions",{staticClass:"justify-center"},[a("v-btn",{attrs:{disabled:!e.valid},on:{click:e.sendForm}},[e._v("Envoyer")])],1)],1)],1)},ae=[],ne={props:["rating","comment"],data:function(){return{valid:!1,newRating:this.rating,newComment:this.comment}},watch:{rating:function(e){this.newRating=e},comment:function(e){this.newComment=e}},methods:{sendForm:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("send"),t.prev=1,t.next=4,T.a.post("/api/runs/".concat(e.$route.params.session_id,"/").concat(e.$route.params.student_id),{comment:e.newComment,rating:e.newRating});case 4:e.$emit("success"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))()}}},se=ne,oe=a("8336"),re=a("4bd4"),ie=a("1d4d"),ce=a("a844"),le=Object(c["a"])(se,te,ae,!1,null,null,null),de=le.exports;d()(le,{VBtn:oe["a"],VCard:z["a"],VCardActions:J["a"],VCol:B["a"],VContainer:F["a"],VForm:re["a"],VRating:ie["a"],VRow:G["a"],VTextarea:ce["a"]});var ue={components:{MyMap:R,StudentDataCard:Z,StudentGraphCard:ee,StudentFeedbackForm:de},data:function(){return{id:"",sessionName:"",sessionId:this.$route.params.session_id,averageSpeed:0,distance:0,chrono:0,speeds:[],rating:0,comment:"",headers:[{text:"ID",value:"id"},{text:"Temps (s)",value:"time"},{text:"Tour (s)",value:"lap"},{text:"Vitesse (km/h)",value:"avgSpeed"},{text:"Validée",value:"valided"}],balises:[],geoJson:{},mapCenter:null,loadingData:!1,loadingError:!1,snackbar:!1}},computed:{validedBeacons:function(){return this.balises.filter((function(e){return e.valided})).length},percentBeacons:function(){return this.balises.length?this.validedBeacons/this.balises.length*100:0}},methods:{getMins:function(e){return e%60<10?"0"+e%60:e%60},loadData:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loadingData=!0,t.prev=1,t.next=4,T.a.get("/api/runs/".concat(e.$route.params.session_id,"/").concat(e.$route.params.student_id));case 4:a=t.sent,n=a.data,e.balises=n.beacons,e.sessionName=n.sessionName,e.id=n.id,e.chrono=n.time,e.averageSpeed=n.avgSpeed.toFixed(1),e.distance=n.distance.toFixed(),e.speeds=n.speeds,e.comment=n.comment,e.rating=n.rating,e.geoJson=n.geoJson,console.log("geosJson",e.geoJson),e.mapCenter=n.beacons[0].coords,t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](1),e.loadingError=!0,e.loadingErrorStatus=t.t0;case 24:e.loadingData=!1;case 25:case"end":return t.stop()}}),t,null,[[1,20]])})))()}},created:function(){this.loadData()}},ve=ue,pe=(a("66b0"),a("0798")),me=a("40dc"),be=a("8fea"),fe=a("f6c4"),he=a("8e36"),ge=a("8dd9"),ke=a("2db4"),je=a("7f2e"),ye=a("2a7f"),_e=Object(c["a"])(ve,y,_,!1,null,null,null),xe=_e.exports;d()(_e,{VAlert:pe["a"],VAppBar:me["a"],VBtn:oe["a"],VCard:z["a"],VCol:B["a"],VDataTable:be["a"],VIcon:A["a"],VMain:fe["a"],VProgressLinear:he["a"],VRow:G["a"],VSheet:ge["a"],VSnackbar:ke["a"],VSpacer:X["a"],VSparkline:je["a"],VToolbarTitle:ye["a"]});var we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-main",[a("v-app-bar",{attrs:{color:"blue",dark:"",app:""}},[a("v-toolbar-title",[a("router-link",{staticClass:"text-decoration-none",staticStyle:{color:"inherit"},attrs:{to:"/session/"}},[a("v-icon",{attrs:{large:""}},[e._v("mdi-chevron-left")]),e._v(" Sessions ")],1)],1),a("v-spacer"),a("span",{staticClass:"px-3"},[e._v(e._s(e.sessionName))]),a("v-btn",{attrs:{text:""},on:{click:function(t){e.settings=!0}}},[a("v-icon",{attrs:{large:""}},[e._v("mdi-cog")])],1)],1),a("v-container",{staticClass:"fill-height"},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"4"}},[a("v-card",{staticClass:"overflow-y-auto",attrs:{width:"100%",height:"400px"}},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:""}},[a("v-toolbar-title",{staticClass:"px-3"},[e._v(e._s(e.sessionName))]),a("v-spacer"),a("v-subheader",{staticClass:"px-3"},[e._v(e._s(e.sessionDate))]),a("v-subheader",{staticClass:"px-3"},[e._v(e._s(e.beacons.length)+" Balises")])],1),e.loading?a("v-container",{staticStyle:{height:"80%"}},[a("v-row",{staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[a("v-col",{staticClass:"subtitle-1 text-center",attrs:{cols:"12"}},[e._v(" Chargement... ")]),a("v-col",{attrs:{cols:"6"}},[a("v-progress-linear",{attrs:{color:"blue accent-4",indeterminate:"",rounded:"",height:"6"}})],1)],1)],1):a("v-list",[a("v-list-item-group",[a("v-list-item",{attrs:{to:"/session/"+this.$route.params.session_id+"/teacher-recap"}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-account-tie")])],1),a("v-list-item-content",[e._v(" Page enseignant ")])],1)],1),a("v-divider"),a("v-list-item-group",e._l(e.students,(function(t){return a("v-list-item",{key:t.id,attrs:{to:e.makeLink(t.id)}},[a("v-list-item-icon",[a("v-icon",[e._v("mdi-school")])],1),a("v-list-item-content",[e._v(" "+e._s(t.id)+" ")])],1)})),1)],1)],1)],1)],1)],1),a("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.settings,callback:function(t){e.settings=t},expression:"settings"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"blue"}},[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.settings=!1}}},[a("v-icon",[e._v("mdi-close")])],1),a("v-toolbar-title",[e._v(e._s(e.sessionName)+" | Réglages")]),a("v-spacer")],1),a("v-container",[a("v-card",[a("v-toolbar",{attrs:{flat:""}},[a("v-spacer"),a("v-btn",{on:{click:function(t){return e.newBeacon()}}},[e._v("Nouvelle balise")])],1),a("v-row",[a("v-col",[a("v-data-table",{attrs:{headers:e.headers,items:e.beacons},scopedSlots:e._u([{key:"item.actions",fn:function(t){var n=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editBeacon(n)}}},[e._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(n)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[e._v(" Aucune basise enregistrée ")]},proxy:!0}],null,!0)})],1)],1)],1)],1)],1),a("v-dialog",{model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{staticClass:"mx-3",attrs:{label:"Balise ID"},model:{value:e.editedItem.id,callback:function(t){e.$set(e.editedItem,"id",t)},expression:"editedItem.id"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{staticClass:"mx-3",attrs:{label:"Latitude"},model:{value:e.editedItem.lat,callback:function(t){e.$set(e.editedItem,"lat",t)},expression:"editedItem.lat"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{staticClass:"mx-3",attrs:{label:"Longitude"},model:{value:e.editedItem.long,callback:function(t){e.$set(e.editedItem,"long",t)},expression:"editedItem.long"}})],1)],1),a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"2"}},[a("v-btn",{attrs:{width:"100%"},on:{click:function(t){e.modifie?e.saveChange():e.saveNew()}}},[e._v("Enregistrer")])],1)],1)],1)],1)],1),a("v-snackbar",{attrs:{color:e.axiosSuccess?"success":"error"},scopedSlots:e._u([{key:"action",fn:function(t){var n=t.attrs;return[a("v-btn",e._b({attrs:{color:"white",text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",n,!1),[e._v(" Fermer ")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[a("span",{staticClass:"overline font-weight-black"},[e._v(e._s(e.snackbarMsg))])])],1)],1)},Te=[],Ce=(a("c975"),a("fb6a"),a("a434"),a("25f0"),{components:{},data:function(){return{students:[],sessionName:"",sessionDate:"",settings:!1,headers:[{text:"Balise ID",align:"start",value:"id"},{text:"Latitude",value:"lat"},{text:"Longitude",value:"long"},{text:"Actions",value:"actions"}],beacons:[],dialog:!1,editedIndex:-1,editedItem:{_id:"",id:"",lat:"",long:""},modifie:!1,loading:!0,snackbarMsg:"",snackbar:!1,axiosSuccess:!1}},methods:{makeLink:function(e){return{path:"/session/".concat(this.$route.params.session_id,"/student-recap/").concat(e)}},loadData:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,T.a.get("/api/sessions/".concat(e.$route.params.session_id));case 2:a=t.sent,e.students=a.data.runs.map((function(e){return{id:e.id}})),e.sessionName=a.data.sessionName,e.sessionDate=a.data.date,console.log("beacons",a.data.beacons),e.beacons=a.data.beacons.map((function(e){return{id:e.id,lat:e.coords[0],long:e.coords[1],_id:e._id}})),e.loading=!1;case 9:case"end":return t.stop()}}),t)})))()},editBeacon:function(e){this.modifie=!0,this.editedItem=Object.assign({},e),this.dialog=!0},newBeacon:function(){this.modifie=!1,this.editedItem={_id:"",id:"",lat:"",long:""},this.dialog=!0},saveChange:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialog=!1,t.prev=1,t.next=4,T.a.put("/api/sessions/".concat(e.$route.params.session_id,"/"),{_id:e.editedItem._id,id:parseInt(e.editedItem.id),coords:[parseFloat(e.editedItem.lat),parseFloat(e.editedItem.long)]});case 4:Object.assign(e.beacons.filter((function(t){return t._id===e.editedItem._id}))[0],e.editedItem),e.axiosSuccess=!0,e.snackbarMsg="Changement enregistré avec succès!",e.snackbar=!0,t.next=16;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log(t.t0),e.axiosSuccess=!1,e.snackbarMsg="Une erreur c'est produite",e.snackbar=!0;case 16:e.modifie=!1;case 17:case"end":return t.stop()}}),t,null,[[1,10]])})))()},saveNew:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialog=!1,e.editedItem._id=Math.random().toString(36).slice(-5),t.prev=2,t.next=5,T.a.post("/api/sessions/".concat(e.$route.params.session_id,"/"),{_id:e.editedItem._id,id:parseInt(e.editedItem.id),coords:[parseFloat(e.editedItem.lat),parseFloat(e.editedItem.long)]});case 5:e.beacons.push(Object.assign({},e.editedItem)),e.axiosSuccess=!0,e.snackbarMsg="Nouvelle balise enregistrée avec succès!",e.snackbar=!0,t.next=17;break;case 11:t.prev=11,t.t0=t["catch"](2),console.log(t.t0),e.axiosSuccess=!1,e.snackbarMsg="Une erreur c'est produite",e.snackbar=!0;case 17:e.modifie=!1;case 18:case"end":return t.stop()}}),t,null,[[2,11]])})))()},deleteItem:function(e){var t=this;return Object(x["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.beacons.splice(t.beacons.indexOf(e),1),a.prev=1,a.next=4,T.a.delete("/api/sessions/".concat(t.$route.params.session_id,"/"),{data:{_id:e._id}});case 4:t.axiosSuccess=!0,t.snackbarMsg="Balise suprimée avec succès!",t.snackbar=!0,a.next=15;break;case 9:a.prev=9,a.t0=a["catch"](1),console.log(a.t0),t.axiosSuccess=!1,t.snackbarMsg="Une erreur c'est produite",t.snackbar=!0;case 15:case"end":return a.stop()}}),a,null,[[1,9]])})))()}},created:function(){this.loadData()}}),Ve=Ce,Se=a("169a"),Ie=a("ce7e"),De=a("8860"),Pe=a("da13"),Oe=a("5d23"),Me=a("1baa"),Re=a("34c3"),Le=a("e0c7"),Ne=a("8654"),$e=a("71d9"),Ee=Object(c["a"])(Ve,we,Te,!1,null,null,null),ze=Ee.exports;d()(Ee,{VAppBar:me["a"],VBtn:oe["a"],VCard:z["a"],VCol:B["a"],VContainer:F["a"],VDataTable:be["a"],VDialog:Se["a"],VDivider:Ie["a"],VIcon:A["a"],VList:De["a"],VListItem:Pe["a"],VListItemContent:Oe["a"],VListItemGroup:Me["a"],VListItemIcon:Re["a"],VMain:fe["a"],VProgressLinear:he["a"],VRow:G["a"],VSnackbar:ke["a"],VSpacer:X["a"],VSubheader:Le["a"],VTextField:Ne["a"],VToolbar:$e["a"],VToolbarTitle:ye["a"]});var Je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-main",[a("v-app-bar",{attrs:{color:"blue",dark:"",app:""}},[a("v-toolbar-title",[a("span",[e._v("Sessions")])])],1),a("v-container",{staticClass:"fill-height"},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"4"}},[a("v-card",{staticClass:"overflow-y-auto",attrs:{width:"100%",height:"400px"}},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:""}},[a("v-toolbar-title",[e._v("Sessions")]),a("v-btn",{attrs:{absolute:"",bottom:"",color:"white",fab:"",right:"",light:""},on:{click:function(t){return t.stopPropagation(),e.newSession(t)}}},[a("v-icon",[e._v("mdi-plus")])],1)],1),e.loading?a("v-container",{staticStyle:{height:"80%"}},[a("v-row",{staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[a("v-col",{staticClass:"subtitle-1 text-center",attrs:{cols:"12"}},[e._v(" Chargement... ")]),a("v-col",{attrs:{cols:"6"}},[a("v-progress-linear",{attrs:{color:"blue accent-4",indeterminate:"",rounded:"",height:"6"}})],1)],1)],1):a("v-list",[a("v-list-item-group",e._l(e.sessions,(function(t){return a("v-list-item",{key:t.sessionId,attrs:{to:e.makeLink(t.sessionId)}},[a("v-list-item-content",[e._v(" "+e._s(t.sessionName)+" ")]),a("v-list-item-content",[a("v-subheader",[e._v(e._s(t.date))])],1)],1)})),1)],1)],1)],1)],1)],1),a("v-dialog",{attrs:{width:"50%"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-row",[a("v-col",[a("v-text-field",{staticClass:"mx-4",attrs:{label:"Nom de la session"},model:{value:e.newItem.name,callback:function(t){e.$set(e.newItem,"name",t)},expression:"newItem.name"}})],1),a("v-col",[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,s=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Date","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.formattedDate,callback:function(t){e.formattedDate=t},expression:"formattedDate"}},"v-text-field",s,!1),n))]}}]),model:{value:e.dateMenu,callback:function(t){e.dateMenu=t},expression:"dateMenu"}},[a("v-date-picker",{on:{input:function(t){e.dateMenu=!1}},model:{value:e.newItem.date,callback:function(t){e.$set(e.newItem,"date",t)},expression:"newItem.date"}})],1)],1)],1),a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"2"}},[a("v-btn",{on:{click:function(t){return e.validate()}}},[e._v("Créer")])],1)],1)],1)],1)],1)},Be=[],Fe=(a("b0c0"),a("c1df")),Ae=a.n(Fe),Ue={data:function(){return{sessions:[{id:1,name:"name"}],loading:!0,dialog:!1,newItem:{},dateMenu:!1}},computed:{formattedDate:function(){return this.newItem.date?Ae()(this.newItem.date).format("dddd Do MMMM"):""}},methods:{makeLink:function(e){return{path:"/session/".concat(e)}},loadData:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,T.a.get("/api/sessions/");case 2:a=t.sent,console.log(a.data),e.sessions=a.data,e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},newSession:function(){console.log("newsession"),this.newItem={name:"",date:""},this.dialog=!0},validate:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialog=!1,a={sessionName:e.newItem.name,date:e.formattedDate},e.sessions.push(a),t.prev=3,t.next=6,T.a.post("/api/sessions/",a);case 6:n=t.sent,console.log(n),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](3),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})))()}},created:function(){this.loadData(),Ae.a.locale("fr")}},Ge=Ue,We=a("2e4b"),Ze=a("e449"),qe=Object(c["a"])(Ge,Je,Be,!1,null,null,null),He=qe.exports;d()(qe,{VAppBar:me["a"],VBtn:oe["a"],VCard:z["a"],VCol:B["a"],VContainer:F["a"],VDatePicker:We["a"],VDialog:Se["a"],VIcon:A["a"],VList:De["a"],VListItem:Pe["a"],VListItemContent:Oe["a"],VListItemGroup:Me["a"],VMain:fe["a"],VMenu:Ze["a"],VProgressLinear:he["a"],VRow:G["a"],VSubheader:Le["a"],VTextField:Ne["a"],VToolbar:$e["a"],VToolbarTitle:ye["a"]});var Ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-main",[a("v-app-bar",{attrs:{color:"blue",dark:""}},[a("v-toolbar-title",[a("router-link",{staticClass:"text-decoration-none",staticStyle:{color:"inherit"},attrs:{to:"/session/"+e.sessionId}},[a("v-icon",{attrs:{large:""}},[e._v("mdi-chevron-left")]),e._v(" "+e._s(e.sessionName)+" ")],1)],1),a("v-spacer"),a("span",{staticClass:"px-3"},[e._v(e._s(e.id))]),a("v-progress-linear",{attrs:{active:e.loadingData,indeterminate:e.loadingData,absolute:"",bottom:"",color:"blue darken-4"}})],1),e.loadingError?a("v-alert",{attrs:{type:"error"}},[e._v(e._s(e.loadingErrorStatus))]):e._e(),a("v-card",{staticClass:"map-wrapper mx-5 mt-5",attrs:{color:"lime"}},[a("TeacherMap",{ref:"myMap",attrs:{geoJson:e.geoJson,center:e.mapCenter,colors:e.colorMap}})],1),a("div",{staticClass:"pt-0 pl-0 mx-5"},[a("v-row",[a("v-col",[a("v-card",[a("v-toolbar",{attrs:{dense:"",color:""}},[a("v-toolbar-title",{staticClass:"mr-10"},[e._v("Balises")]),a("v-spacer"),a("div",[a("v-tabs",{attrs:{"align-with-title":""},model:{value:e.beaconTab,callback:function(t){e.beaconTab=t},expression:"beaconTab"}},[a("v-tabs-slider"),a("v-tab",{key:"plot"},[a("v-icon",[e._v("mdi-chart-bar")])],1),a("v-tab",{key:"table"},[a("v-icon",[e._v("mdi-table")])],1)],1)],1)],1),a("v-tabs-items",{model:{value:e.beaconTab,callback:function(t){e.beaconTab=t},expression:"beaconTab"}},[a("v-tab-item",{key:"table"},[a("div",{staticStyle:{height:"300px",overflow:"scroll"}},[a("Plotly",{attrs:{data:e.beaconPlotData.data,layout:e.beaconPlotData.layout,"display-mode-bar":!1}})],1)]),a("v-tab-item",{key:"plot"},[a("v-data-table",{attrs:{headers:e.beaconTableheader,items:e.beacons,"hide-default-footer":"","fixed-header":"",height:"300px"},scopedSlots:e._u([{key:"item.success",fn:function(t){var a=t.item;return[e._v(" "+e._s(a.success)+"% ")]}}],null,!0)})],1)],1)],1)],1)],1),a("v-row",[a("v-col",[a("v-card",[a("v-toolbar",{attrs:{dense:"",color:""}},[a("v-toolbar-title",{staticClass:"mr-10"},[e._v("Éleves")]),a("v-spacer"),a("div",[a("v-tabs",{attrs:{"align-with-title":""},model:{value:e.studentTab,callback:function(t){e.studentTab=t},expression:"studentTab"}},[a("v-tabs-slider"),a("v-tab",{key:"plot"},[a("v-icon",[e._v("mdi-chart-bar")])],1),a("v-tab",{key:"table"},[a("v-icon",[e._v("mdi-table")])],1)],1)],1)],1),a("v-tabs-items",{model:{value:e.studentTab,callback:function(t){e.studentTab=t},expression:"studentTab"}},[a("v-tab-item",{key:"table"},[a("div",{staticStyle:{height:"500px",overflow:"scroll"}},[a("v-toolbar",[a("v-row",{attrs:{justify:"center",align:"center"}},[a("v-col",{attrs:{cols:"7"}},[a("div",[a("v-tabs",{attrs:{"fixed-tabs":""}},[a("v-tab",{key:"time",on:{click:function(t){e.studentTabPlotType="time"}},model:{value:e.studentTabPlotType,callback:function(t){e.studentTabPlotType=t},expression:"studentTabPlotType"}},[e._v("Chrono")]),a("v-tab",{key:"avgSpeed",on:{click:function(t){e.studentTabPlotType="avgSpeed"}},model:{value:e.studentTabPlotType,callback:function(t){e.studentTabPlotType=t},expression:"studentTabPlotType"}},[e._v("Vitesse")]),a("v-tab",{key:"distance",on:{click:function(t){e.studentTabPlotType="distance"}},model:{value:e.studentTabPlotType,callback:function(t){e.studentTabPlotType=t},expression:"studentTabPlotType"}},[e._v("Distance")]),a("v-tab",{key:"beacons",on:{click:function(t){e.studentTabPlotType="beacons"}},model:{value:e.studentTabPlotType,callback:function(t){e.studentTabPlotType=t},expression:"studentTabPlotType"}},[e._v("Balises")])],1)],1)])],1)],1),a("Plotly",{attrs:{data:e.studentPlotData.data,layout:e.studentPlotData.layout,"display-mode-bar":!1}})],1)]),a("v-tab-item",{key:"plot"},[a("v-data-table",{attrs:{headers:e.studentTableHeader,items:e.students,"hide-default-footer":"","fixed-header":"",height:"500px"},scopedSlots:e._u([{key:"item.time",fn:function(t){var a=t.item;return[e._v(" "+e._s(Math.floor(a.time/60))+":"+e._s(e.getMins(a.time))+" ")]}}],null,!0)})],1)],1)],1)],1)],1)],1)],1)},Qe=[],Xe=(a("4160"),a("4ec9"),a("3ca3"),a("159b"),a("ddb0"),a("2909")),Ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"map"}})},et=[],tt={props:["geoJson","center","colors"],data:function(){return{map:null}},watch:{geoJson:function(e){this.addGeoJson(e)},center:function(e){console.log("center",e),this.map.setView([e[1],e[0]],16)}},methods:{setupLeaflet:function(){var e=I.a.map("map");I.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e),document.on,e.scrollWheelZoom.disable(),e.on("focus",(function(){e.scrollWheelZoom.enable()})),e.on("blur",(function(){e.scrollWheelZoom.disable()})),delete I.a.Icon.Default.prototype._getIconUrl,I.a.Icon.Default.mergeOptions({iconRetinaUrl:a("584d"),iconUrl:a("6397"),shadowUrl:a("e2b9")}),I.a.geoJSON(this.geojson).addTo(e),this.map=e},customeIcon:function(e){return I.a.divIcon({className:"custom-div-icon",html:"<div class='marker-pin'></div><span class='id'>".concat(e,"</span>"),iconSize:[30,42],iconAnchor:[15,42],shadowUrl:a("e2b9")})},addGeoJson:function(e){var t=this;console.log("addgeoJson",e),I.a.geoJSON(e,{style:function(e){return{color:t.colors.get(e.properties.id),weight:5}},filter:function(e){return"LineString"===e.geometry.type},onEachFeature:function(e,t){t.bindPopup(e.properties.id)}}).addTo(this.map),I.a.geoJSON(e,{pointToLayer:function(e,a){return I.a.marker(a,{icon:t.customeIcon(e.properties.id)})},filter:function(e){return"Point"===e.geometry.type}}).addTo(this.map)}},mounted:function(){this.setupLeaflet()}},at=tt,nt=(a("c314"),Object(c["a"])(at,Ye,et,!1,null,null,null)),st=nt.exports,ot=a("04d1"),rt=a("fd9b"),it=a.n(rt),ct={components:{TeacherMap:st,Plotly:ot["Plotly"]},data:function(){return{test:1,sessionId:this.$route.params.session_id,mapCenter:null,id:null,geoJson:null,beacons:[],students:[],beaconPlotData:{data:null,layout:null},sessionName:"",loadingData:!0,loadingError:!1,loadingErrorStatus:null,colorMap:null,beaconTab:"plot",studentTab:"plot",studentTabPlotType:"time",beaconTableheader:[{text:"Balise ID",value:"id"},{text:"Succès",value:"success"}],studentTableHeader:[{text:"ID",value:"id"},{text:"Chrono",value:"time"},{text:"Distance (m)",value:"distance"},{text:"Vitesse moyenne (km/h)",value:"avgSpeed"},{text:"Balises",value:"beacons"}]}},computed:{studentPlotData:function(){var e=this,t={data:[{x:Object(Xe["a"])(this.students).sort((function(t,a){return a[e.studentTabPlotType]-t[e.studentTabPlotType]})).map((function(e){return e.id})),y:Object(Xe["a"])(this.students).sort((function(t,a){return a[e.studentTabPlotType]-t[e.studentTabPlotType]})).map((function(t){return t[e.studentTabPlotType]})),marker:{color:Object(Xe["a"])(this.students).sort((function(t,a){return a[e.studentTabPlotType]-t[e.studentTabPlotType]})).map((function(e){return e.color}))},type:"bar"}],layout:{height:400,margin:{l:50,r:50,b:40,t:0,pad:4},xaxis:{tickangle:-45}}};return t}},methods:{getMins:function(e){return e%60<10?"0"+e%60:e%60},createBeaconPlot:function(){this.beaconPlotData={data:[{x:this.beacons.map((function(e){return e.id})),y:this.beacons.map((function(e){return e.success})),type:"bar"}],layout:{height:300,margin:{l:50,r:50,b:40,t:0,pad:4},xaxis:{tickmode:"linear"}}}},loadData:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loadingData=!0,t.prev=1,t.next=4,T.a.get("/api/teacher/".concat(e.$route.params.session_id,"/"));case 4:a=t.sent,n=a.data,e.beacons=n.beacons,e.sessionName=n.sessionName,e.id=n.id,e.geoJson=n.geoJson,e.colorMap=new Map,n.runs.forEach((function(t){e.colorMap.set(t.id,it()({luminosity:"bright",hue:"random"}))})),e.students=n.runs.map((function(t){return{id:t.id,time:t.time,distance:t.distance.toFixed(0),avgSpeed:t.avgSpeed.toFixed(1),beacons:t.beacons.filter((function(e){return e.valided})).length,color:e.colorMap.get(t.id)}})),e.mapCenter=n.beacons[0].coords,e.createBeaconPlot(),t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](1),e.loadingError=!0,e.loadingErrorStatus=t.t0;case 21:e.loadingData=!1;case 22:case"end":return t.stop()}}),t,null,[[1,17]])})))()}},created:function(){this.loadData()}},lt=ct,dt=a("71a3"),ut=a("c671"),vt=a("fe57"),pt=a("aac8"),mt=a("9a96"),bt=Object(c["a"])(lt,Ke,Qe,!1,null,null,null),ft=bt.exports;d()(bt,{VAlert:pe["a"],VAppBar:me["a"],VCard:z["a"],VCol:B["a"],VDataTable:be["a"],VIcon:A["a"],VMain:fe["a"],VProgressLinear:he["a"],VRow:G["a"],VSpacer:X["a"],VTab:dt["a"],VTabItem:ut["a"],VTabs:vt["a"],VTabsItems:pt["a"],VTabsSlider:mt["a"],VToolbar:$e["a"],VToolbarTitle:ye["a"]}),n["a"].use(m["a"]);var ht=[{path:"/",name:"Home",component:j},{path:"/about",name:"About",component:function(){return a.e("about").then(a.bind(null,"f820"))}},{path:"/session/:session_id",name:"Session",component:ze},{path:"/session/",name:"Sessions",component:He},{path:"/session/:session_id/student-recap/:student_id",name:"Student recap",component:xe},{path:"/session/:session_id/teacher-recap/",name:"teacher recap",component:ft}],gt=new m["a"]({mode:"history",base:"/",routes:ht}),kt=gt,jt=a("f309");n["a"].use(jt["a"]);var yt=new jt["a"]({});a("d1e78");n["a"].config.productionTip=!1,new n["a"]({router:kt,vuetify:yt,render:function(e){return e(p)}}).$mount("#app")},"66b0":function(e,t,a){"use strict";a("47a2")},6791:function(e,t,a){},"9ec2":function(e,t,a){},c314:function(e,t,a){"use strict";a("9ec2")},cf05:function(e,t,a){e.exports=a.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.d19fa5e8.js.map
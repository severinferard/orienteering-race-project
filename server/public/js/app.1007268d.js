(function(t){function e(e){for(var s,i,r=e[0],c=e[1],l=e[2],u=0,v=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&v.push(n[i][0]),n[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);d&&d(e);while(v.length)v.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],s=!0,r=1;r<a.length;r++){var c=a[r];0!==n[c]&&(s=!1)}s&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},n={app:0},o=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"0982":function(t,e,a){t.exports=a.p+"img/whistle.564dba87.svg"},"2b1f":function(t,e,a){"use strict";a("7dfa")},"34a8":function(t,e,a){"use strict";a("5eef")},3737:function(t,e,a){"use strict";a("6791")},"3aef":function(t,e,a){t.exports=a.p+"img/in-love.e4eb967f.png"},4678:function(t,e,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(t){var e=o(t);return a(e)}function o(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}n.keys=function(){return Object.keys(s)},n.resolve=o,t.exports=n,n.id="4678"},"47a2":function(t,e,a){},"51e1":function(t,e,a){t.exports=a.p+"img/crying.ff8ceac6.png"},"55af":function(t,e,a){t.exports=a.p+"img/angry.36c173a8.png"},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("router-view")],1)},o=[],i={name:"App",components:{},data:function(){return{}}},r=i,c=(a("034f"),a("2877")),l=a("6544"),d=a.n(l),u=a("7496"),v=Object(c["a"])(r,n,o,!1,null,null,null),p=v.exports;d()(v,{VApp:u["a"]});var m=a("8c4f"),h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-app-bar",{attrs:{app:"",color:"transparent",dark:"",flat:""}},[s("v-toolbar-title",[s("router-link",{attrs:{to:"/"}},[s("h3",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[t._v("DORA")])])],1),s("router-link",{attrs:{to:"/tree"}},[s("h4",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[t._v("Dashboard")])])],1),s("div",{staticClass:"top"},[s("img",{staticClass:"drawing",attrs:{width:"30%",src:a("aafe")}}),t._m(0),s("div",{staticClass:"buttons"},[s("v-btn",{attrs:{"x-large":"",dark:"",outlined:"",to:"/tree"}},[t._v("Dashboard")])],1)]),s("div",{staticClass:"bot pa-5"},[s("v-row",{staticClass:"fill-height"},[s("v-col",[s("v-card",{attrs:{height:"100%"}},[s("div",{staticClass:"logo",attrs:{id:"logo-makerlab"}})])],1),s("v-col",[s("v-card",{attrs:{height:"100%"}},[s("div",{staticClass:"logo",attrs:{id:"logo-movuino"}})])],1),s("v-col",[s("v-card",{attrs:{height:"100%"}},[s("div",{staticClass:"logo",attrs:{id:"logo-i3sp"}})])],1)],1)],1)],1)},f=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"slogan"},[a("span",{staticClass:"display-2 white--text font-weight-thin"},[a("span",{staticClass:"font-weight-regular"},[t._v("D")]),t._v("igital "),a("span",{staticClass:"font-weight-regular"},[t._v("O")]),t._v("rienteerting "),a("br"),a("span",{staticClass:"font-weight-regular"},[t._v("R")]),t._v("ace "),a("span",{staticClass:"font-weight-regular"},[t._v("A")]),t._v("pplication")])])}],b={name:"Home",components:{},data:function(){return{}}},g=b,x=(a("cccb"),a("40dc")),_=a("8336"),y=a("b0af"),w=a("62ad"),k=a("0fd9"),C=a("2a7f"),j=Object(c["a"])(g,h,f,!1,null,null,null),T=j.exports;d()(j,{VAppBar:x["a"],VBtn:_["a"],VCard:y["a"],VCol:w["a"],VRow:k["a"],VToolbarTitle:C["a"]});var V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-main",[a("v-app-bar",{staticStyle:{"z-index":"999999"},attrs:{color:"primary",dark:"",app:""}},[a("v-toolbar-title",[a("router-link",{attrs:{to:"/"}},[a("h3",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[t._v("DORA")])])],1),a("router-link",{attrs:{to:"/tree"}},[a("h4",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[t._v("Dashboard")])]),a("span",{staticClass:"px-3"},[t._v(t._s(t.school.name))]),a("v-icon",[t._v("mdi-chevron-right")]),a("span",{staticClass:"px-3"},[t._v(t._s(t.clss.name))]),a("v-icon",[t._v("mdi-chevron-right")]),a("span",{staticClass:"px-3"},[t._v(t._s(t.session.name))]),a("v-icon",[t._v("mdi-chevron-right")]),a("span",{staticClass:"px-3"},[t._v(t._s(t.id))]),a("v-spacer"),a("v-btn",{staticClass:"mx-3",attrs:{outlined:"",to:"/session/"+t.session.id+"/#"}},[t._v("Autres éleves")]),a("v-btn",{staticClass:"mx-3",attrs:{outlined:"",to:"/student-summary/"+t.clss.id+"/"+t.id}},[t._v("Resumé des séances")]),a("v-progress-linear",{attrs:{active:t.loadingData,indeterminate:t.loadingData,absolute:"",bottom:"",color:"blue darken-4"}})],1),t.loadingError?a("v-alert",{attrs:{type:"error"}},[t._v(t._s(t.loadingErrorStatus))]):t._e(),a("v-card",{staticClass:"map-wrapper mx-5 mt-5",attrs:{color:"lime"}},[a("MyMap",{ref:"myMap",attrs:{geoJson:t.geoJson,center:t.mapCenter}})],1),a("div",{staticClass:"pt-0 pl-0 mx-5"},[a("v-row",[a("v-col",[a("v-card",[a("v-data-table",{attrs:{headers:t.headers,items:t.balises,"hide-default-footer":"","fixed-header":"",height:"300px"},scopedSlots:t._u([{key:"item.valided",fn:function(e){var s=e.item;return[a("v-icon",{attrs:{color:s.valided?"green":"red"}},[t._v(t._s(s.valided?"mdi-checkbox-marked":"mdi-close-box"))])]}},{key:"item.avgSpeed",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.valided?parseFloat(a.avgSpeed).toFixed(2):"-")+" ")]}},{key:"item.time",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.valided?a.time:"-")+" ")]}},{key:"item.lap",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.valided?a.lap:"-")+" ")]}}],null,!0)})],1)],1)],1),a("v-row",[a("StudentFeedbackForm",{attrs:{rating:t.rating,comment:t.comment},on:{success:function(e){t.snackbar=!0}}})],1)],1),a("v-snackbar",{attrs:{color:"success"},scopedSlots:t._u([{key:"action",fn:function(e){var s=e.attrs;return[a("v-btn",t._b({attrs:{color:"white",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",s,!1),[t._v(" Fermer ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[a("span",{staticClass:"overline font-weight-black"},[t._v("Enregistré !")])])],1)},I=[],S=(a("99af"),a("4de4"),a("b0c0"),a("b680"),a("96cf"),a("1da1")),D=a("bc3a"),P=a.n(D),O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"container"}},[a("div",{attrs:{id:"map"}}),a("div",{staticClass:"ui-overlay",attrs:{id:"left-meter"}},[a("v-card",{attrs:{flat:"",color:"transparent",width:"100%"}},[a("StudentDataCard",{attrs:{value:t.distance,percent:t.distance/t.bestDistance*100,title:"Distance",unit:"m"}})],1)],1),a("div",{staticClass:"ui-overlay",attrs:{id:"right-meter"}},[a("v-card",{attrs:{flat:"",color:"transparent",width:"100%"}},[a("StudentDataCard",{attrs:{value:t.formatedChrono,percent:t.bestChrono/t.chrono*100,title:"Chrono",unit:null}})],1)],1),a("div",{staticClass:"ui-overlay",attrs:{id:"bar"}},[a("v-row",{attrs:{justify:"center"}},[a("div",{staticStyle:{width:"80%",height:"50px"}},[a("StudentDataBar",{attrs:{title:"Balises",value:t.beacons.filter((function(t){return t.valided})).length,color:"#ff9900",percent:t.beacons.filter((function(t){return t.valided})).length/t.beacons.length*100,left:!0}})],1)])],1),a("div",{staticClass:"ui-overlay",attrs:{id:"graph"}},[a("StudentGraphCard",{attrs:{title:"Vitesse",unit:"km/h",value:t.averageSpeed,icon:"mdi-speedometer",values:this.speeds,sampleRate:this.sampleRate,beacons:this.beacons}})],1)])},M=[],R=(a("d81d"),a("6cc5"),a("e11e")),$=a.n(R),N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"hud-overlay px-3",attrs:{height:"100%",color:"#078e889c",outlined:""}},[a("v-row",{staticStyle:{height:"200px"}},[a("v-col",[a("v-card-actions",{staticClass:"justify-center"},[a("v-progress-circular",{attrs:{rotate:360,size:150,width:10,value:t.percent,color:"blue"}},[a("v-container",{staticClass:"pt-7",staticStyle:{color:"#fff"},attrs:{fluid:""}},[a("v-row",{attrs:{justify:"center",align:"center"}},[t.$slots.value?a("div",[t._t("value")],2):a("span",{staticClass:"mandalore",staticStyle:{"font-size":"70px"}},[t._v(t._s(t.value))])])],1)],1),a("div",{staticStyle:{position:"absolute"}},[a("v-progress-circular",{attrs:{rotate:20,size:166,width:8,value:t.percent,color:"#fff"}})],1),a("div",{staticStyle:{position:"absolute"}},[a("v-progress-circular",{attrs:{rotate:300,size:130,width:4,indeterminate:"",value:67,color:"#ff9900"}})],1)],1)],1)],1),a("v-row",[a("v-col",[a("v-card-actions",{staticClass:"justify-center"},[a("span",{staticClass:"mandalore",staticStyle:{color:"#fff","font-size":"25px"}},[t._v(t._s(t.title)+" "+t._s(t.unit?"("+t.unit+")":""))])])],1)],1)],1)},L=[],F={props:["title","value","icon","unit","percent"],data:function(){return{}}},B=F,z=(a("580d"),a("99d9")),E=a("a523"),A=a("490a"),J=Object(c["a"])(B,N,L,!1,null,null,null),U=J.exports;d()(J,{VCard:y["a"],VCardActions:z["a"],VCol:w["a"],VContainer:E["a"],VProgressCircular:A["a"],VRow:k["a"]});var G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"hud-overlay pt-3 px-4",attrs:{width:"100%",color:"#078e889c",outlined:""}},[a("v-row",{attrs:{justify:"center",align:"center"}},[t.left?a("v-col",{staticClass:"pt-0 mt-0",attrs:{cols:"2"}},[a("span",{staticClass:"mandalore",staticStyle:{color:"#fff","font-size":"30px"}},[t._v(t._s(t.title))])]):t._e(),a("v-col",{staticClass:"pt-0 mt-0",attrs:{cols:"10"}},[a("v-progress-linear",{attrs:{height:"30px",color:t.color,value:t.percent,width:"200px",rounded:""},scopedSlots:t._u([{key:"default",fn:function(){return[a("strong",{staticClass:"mandalore",staticStyle:{"font-size":"40px",color:"#fff"}},[t._v(t._s(t.value))])]},proxy:!0}])})],1),t.left?t._e():a("v-col",{staticClass:"pt-0 mt-0",staticStyle:{"text-align":"end"},attrs:{cols:"2"}},[a("span",{staticClass:"mandalore",staticStyle:{color:"#fff","font-size":"30px"}},[t._v(t._s(t.title))])])],1)],1)},q=[],H={props:["title","value","percent","color","left"]},W=H,Z=a("8e36"),Y=Object(c["a"])(W,G,q,!1,null,null,null),K=Y.exports;d()(Y,{VCard:y["a"],VCol:w["a"],VProgressLinear:Z["a"],VRow:k["a"]});var Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"px-3 hud-overlay",attrs:{height:"100%",color:"#078e889c",outlined:""}},[a("v-card-title",{staticClass:"py-0"},[a("v-spacer"),a("v-row",{attrs:{align:"end"}},[a("span",{staticClass:"mandalore",staticStyle:{color:"#fff","font-size":"25px"}},[t._v(t._s(t.title))]),a("span",{staticClass:"mandalore mx-3",staticStyle:{color:"#fff","font-size":"35px"}},[t._v(t._s(t.value))]),a("span",{staticClass:"mandalore",staticStyle:{color:"#fff","font-size":"25px"}},[t._v(t._s(t.unit))])])],1),a("v-row",{staticStyle:{height:"200px"}},[a("v-col",[a("Plotly",{attrs:{data:t.plotData.data,layout:t.plotData.layout,"display-mode-bar":!1}})],1)],1)],1)},X=[],tt=(a("4160"),a("d3b7"),a("159b"),a("ddb0"),a("2909")),et=a("04d1"),at={components:{Plotly:et["Plotly"]},props:["icon","title","unit","value","values","sampleRate","beacons"],data:function(){return{}},mounted:function(){},computed:{plotData:function(){var t=this,e={data:[{y:Object(tt["a"])(this.values),x:Object(tt["a"])(Array(this.values.length).keys()).map((function(e){return e*t.sampleRate})),type:"scatter",line:{shape:"spline",color:"rgb(255, 255, 255)",width:6}}],layout:{paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",height:170,margin:{l:50,r:50,b:40,t:0,pad:4},xaxis:{tickangle:-45,visible:!1,showgrid:!1},yaxis:{showgrid:!1,visible:!1},shapes:[],annotations:[]}};return console.log("beacons",this.beacons),this.beacons.forEach((function(a){a.valided&&(e.layout.shapes.push({type:"line",x0:a.time,y0:0,x1:a.time,y1:Math.max.apply(Math,Object(tt["a"])(t.values)),text:"test",line:{color:"#fff",width:2,dash:"dash"}}),e.layout.annotations.push({x:a.time,y:0,xref:"x",yref:"paper",text:"<b>"+a.id+"</b>",showarrow:!1,yanchor:"top",font:{size:20,weight:3,color:"#fff"}}))})),e}}},st=at,nt=(a("2b1f"),a("2fa4")),ot=Object(c["a"])(st,Q,X,!1,null,null,null),it=ot.exports;d()(ot,{VCard:y["a"],VCardTitle:z["c"],VCol:w["a"],VRow:k["a"],VSpacer:nt["a"]});var rt=a("85c7"),ct={components:{StudentDataCard:U,StudentDataBar:K,StudentGraphCard:it},props:["center"],data:function(){return{map:null,averageSpeed:0,distance:0,bestDistance:0,chrono:0,bestChrono:0,speeds:[],beacons:[],mapCenter:[],sampleRate:0}},methods:{setupLeaflet:function(){var t=$.a.map("map");$.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(t),document.on,t.scrollWheelZoom.disable(),t.on("focus",(function(){t.scrollWheelZoom.enable()})),t.on("blur",(function(){t.scrollWheelZoom.disable()})),delete $.a.Icon.Default.prototype._getIconUrl,$.a.Icon.Default.mergeOptions({iconRetinaUrl:a("584d"),iconUrl:a("6397"),shadowUrl:a("e2b9")}),$.a.geoJSON(this.geojson).addTo(t),this.map=t},addGeoJson:function(t){var e=$.a.divIcon({className:"custom-div-icon",html:"<div class='marker-pin-valided'></div><i class='material-icons'>checkbox-marked</i>",iconSize:[30,42],iconAnchor:[15,42]}),s=$.a.divIcon({className:"custom-div-icon",html:"<div class='marker-pin-not-valided'></div><i class='material-icons'>close-box</i>",iconSize:[30,42],iconAnchor:[15,42],shadowUrl:a("e2b9")}),n=new rt;n.setNumberRange(0,10),n.setSpectrum("red","orange","green"),$.a.geoJSON(t,{pointToLayer:function(t,a){return $.a.marker(a,{icon:e})},filter:function(t,e){return console.log(t.properties.valided,e),t.properties.valided}}).addTo(this.map),$.a.geoJSON(t,{pointToLayer:function(t,e){return $.a.marker(e,{icon:s})},filter:function(t){return"Point"===t.geometry.type&&!t.properties.valided}}).addTo(this.map),$.a.geoJSON(t,{style:function(t){return{color:"#"+n.colorAt(t.properties.speed),weight:5}},filter:function(t){return"LineString"===t.geometry.type&&!t.properties.valided}}).addTo(this.map)},loadData:function(){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loadingData=!0,e.prev=1,e.next=4,P.a.get("/api/runs/".concat(t.$route.params.session_id,"/").concat(t.$route.params.student_id));case 4:a=e.sent,s=a.data,console.log("data",s),t.beacons=s.beacons,t.id=s.id,t.chrono=s.time,t.sampleRate=s.sampleRate,t.bestChrono=s.bestTime,console.log(t.bestChrono/t.chrono*100),t.averageSpeed=s.avgSpeed.toFixed(1),t.distance=s.distance.toFixed(),t.bestDistance=s.bestDistance.toFixed(),t.speeds=s.speeds,t.geoJson=s.geoJson,t.mapCenter=s.beacons[0].coords,t.addGeoJson(t.geoJson),t.map.setView([t.mapCenter[1],t.mapCenter[0]],16),e.next=26;break;case 23:e.prev=23,e.t0=e["catch"](1),console.log(e.t0);case 26:t.loadingData=!1;case 27:case"end":return e.stop()}}),e,null,[[1,23]])})))()}},computed:{formatedChrono:function(){return(this.chrono<60?"0":(this.chrono/60).toFixed())+":"+((this.chrono%60).toFixed()<10?"0":"")+(this.chrono%60).toFixed()}},created:function(){this.loadData()},mounted:function(){this.setupLeaflet()}},lt=ct,dt=(a("3737"),Object(c["a"])(lt,O,M,!1,null,null,null)),ut=dt.exports;d()(dt,{VCard:y["a"],VRow:k["a"]});var vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"ma-3",attrs:{width:"100%"}},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"5"}},[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-textarea",{attrs:{rows:"1","prepend-icon":"mdi-comment","auto-grow":"","row-height":"15",label:"Mon ressenti sur ma course...",rules:[function(t){return t.length>0||"Un commentaire est requis"}]},model:{value:t.newComment,callback:function(e){t.newComment=e},expression:"newComment"}})],1)],1),a("v-col"),a("v-col",{staticClass:"text-center",attrs:{cols:"5"}},[a("SmileyRating",{attrs:{value:t.newRating},on:{input:function(e){t.newRating=e}}})],1)],1),a("v-card-actions",{staticClass:"justify-center"},[a("v-btn",{attrs:{disabled:!t.valid},on:{click:t.sendForm}},[t._v("Envoyer")])],1)],1)],1)},pt=[],mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rating"},[s("input",{attrs:{type:"radio",name:"star",id:"star1"}}),s("label",{class:{active:"star1"==t.selected},attrs:{for:"star1"},on:{click:t.select}},[s("img",{attrs:{src:a("efc6")}})]),s("input",{attrs:{type:"radio",name:"star",id:"star2"}}),s("label",{class:{active:"star2"==t.selected},attrs:{for:"star2"},on:{click:t.select}},[s("img",{attrs:{src:a("3aef")}})]),s("input",{attrs:{type:"radio",name:"star",id:"star3"}}),s("label",{class:{active:"star3"==t.selected},attrs:{for:"star3"},on:{click:t.select}},[s("img",{attrs:{src:a("6d5d")}})]),s("input",{attrs:{type:"radio",name:"star",id:"star4"}}),s("label",{class:{active:"star4"==t.selected},attrs:{for:"star4"},on:{click:t.select}},[s("img",{attrs:{src:a("55af")}})]),s("input",{attrs:{type:"radio",name:"star",id:"star5"}}),s("label",{class:{active:"star5"==t.selected},attrs:{for:"star5"},on:{click:t.select}},[s("img",{attrs:{src:a("51e1")}})])])},ht=[],ft={props:["value"],data:function(){return{val:this.rating}},methods:{select:function(t){this.$emit("input",t.target.parentNode.getAttribute("for")[t.target.parentNode.getAttribute("for").length-1])}},computed:{selected:function(){return"star"+this.value}}},bt=ft,gt=(a("34a8"),Object(c["a"])(bt,mt,ht,!1,null,"5d3ffc4a",null)),xt=gt.exports,_t={components:{SmileyRating:xt},props:["rating","comment"],data:function(){return{valid:!1,newRating:this.rating,newComment:this.comment}},watch:{rating:function(t){this.newRating=t},comment:function(t){this.newComment=t}},methods:{sendForm:function(){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("send"),e.prev=1,e.next=4,P.a.post("/api/runs/".concat(t.$route.params.session_id,"/").concat(t.$route.params.student_id),{comment:t.newComment,rating:t.newRating});case 4:t.$emit("success"),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))()}}},yt=_t,wt=a("4bd4"),kt=a("a844"),Ct=Object(c["a"])(yt,vt,pt,!1,null,null,null),jt=Ct.exports;d()(Ct,{VBtn:_["a"],VCard:y["a"],VCardActions:z["a"],VCol:w["a"],VContainer:E["a"],VForm:wt["a"],VRow:k["a"],VTextarea:kt["a"]});var Tt={components:{MyMap:ut,StudentFeedbackForm:jt},data:function(){return{id:"",session:{id:this.$route.params.session_id,name:"",date:""},school:{id:"",name:""},clss:{id:"",name:""},averageSpeed:0,distance:0,chrono:0,speeds:[],rating:0,comment:"",headers:[{text:"ID",value:"id"},{text:"Temps (s)",value:"time"},{text:"Tour (s)",value:"lap"},{text:"Vitesse (km/h)",value:"avgSpeed"},{text:"Validée",value:"valided"}],balises:[],geoJson:{},mapCenter:null,loadingData:!1,loadingError:!1,snackbar:!1}},computed:{validedBeacons:function(){return this.balises.filter((function(t){return t.valided})).length},percentBeacons:function(){return this.balises.length?this.validedBeacons/this.balises.length*100:0}},methods:{getMins:function(t){return t%60<10?"0"+t%60:t%60},loadData:function(){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loadingData=!0,e.prev=1,e.next=4,P.a.get("/api/runs/".concat(t.$route.params.session_id,"/").concat(t.$route.params.student_id));case 4:if(a=e.sent,s=a.data,console.log("data",s),s.rawPositions.length){e.next=9;break}throw"Le movuino n'a enregistré aucune données";case 9:if(s.beacons.length){e.next=11;break}throw"Auncune balises enregistrées";case 11:t.balises=s.beacons,t.session.name=s.session_name,t.session.date=s.session_date,t.session.id=t.$route.params.session_id,t.clss.id=s.class_id,t.clss.name=s.class_name,t.school.name=s.school_name,t.school.id=s.school_id,t.id=s.id,t.chrono=s.time,t.averageSpeed=s.avgSpeed.toFixed(1),t.distance=s.distance.toFixed(),t.speeds=s.speeds,t.comment=s.comment,t.rating=s.rating,t.geoJson=s.geoJson,t.mapCenter=s.beacons[0].coords,e.next=34;break;case 30:e.prev=30,e.t0=e["catch"](1),t.loadingError=!0,t.loadingErrorStatus=e.t0;case 34:t.loadingData=!1;case 35:case"end":return e.stop()}}),e,null,[[1,30]])})))()}},created:function(){this.loadData()}},Vt=Tt,It=(a("66b0"),a("0798")),St=a("8fea"),Dt=a("132d"),Pt=a("f6c4"),Ot=a("2db4"),Mt=Object(c["a"])(Vt,V,I,!1,null,null,null),Rt=Mt.exports;d()(Mt,{VAlert:It["a"],VAppBar:x["a"],VBtn:_["a"],VCard:y["a"],VCol:w["a"],VDataTable:St["a"],VIcon:Dt["a"],VMain:Pt["a"],VProgressLinear:Z["a"],VRow:k["a"],VSnackbar:Ot["a"],VSpacer:nt["a"],VToolbarTitle:C["a"]});var $t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-main",[a("v-app-bar",{staticStyle:{"z-index":"999999"},attrs:{color:"primary",dark:"",app:""}},[a("v-toolbar-title",[a("router-link",{attrs:{to:"/"}},[a("h3",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[t._v("DORA")])])],1),a("router-link",{attrs:{to:"/tree"}},[a("h4",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[t._v("Dashboard")])]),a("span",{staticClass:"px-3"},[t._v(t._s(t.schoolName))]),a("v-icon",[t._v("mdi-chevron-right")]),a("span",{staticClass:"px-3"},[t._v(t._s(t.className))]),a("v-icon",[t._v("mdi-chevron-right")]),a("span",{staticClass:"px-3"},[t._v(t._s(t.sessionName))]),a("v-spacer"),a("span",{staticClass:"px-3"},[t._v(t._s(t.sessionDate))])],1),a("v-container",{staticClass:"fill-height"},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"8"}},[a("v-card",{staticClass:"overflow-y-auto",attrs:{width:"100%",height:"400px"}},[a("v-toolbar",{attrs:{color:"primary lighten-3",dark:""}},[a("v-toolbar-title",{staticClass:"px-3"},[t._v(t._s(t.sessionName))]),a("v-spacer"),a("v-subheader",{staticClass:"px-3"},[t._v(t._s(t.sessionDate))]),a("v-subheader",{staticClass:"px-3"},[t._v(t._s(t.beacons.length)+" Balises")])],1),t.loading?a("v-container",{staticStyle:{height:"80%"}},[a("v-row",{staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[a("v-col",{staticClass:"subtitle-1 text-center",attrs:{cols:"12"}},[t._v(" Chargement... ")]),a("v-col",{attrs:{cols:"6"}},[a("v-progress-linear",{attrs:{color:"blue accent-4",indeterminate:"",rounded:"",height:"6"}})],1)],1)],1):a("v-list",[a("v-list-item-group",[a("v-list-item",{attrs:{to:"/session/"+this.$route.params.session_id+"/teacher-recap"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-account-tie")])],1),a("v-list-item-content",[t._v(" Page enseignant ")])],1)],1),a("v-divider"),a("v-list-item-group",t._l(t.students,(function(e){return a("v-list-item",{key:e.id,attrs:{to:t.makeLink(e.id)}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-school")])],1),a("v-list-item-content",[t._v(" "+t._s(e.id)+" ")])],1)})),1)],1)],1)],1)],1)],1),a("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.settings,callback:function(e){t.settings=e},expression:"settings"}},[a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"blue"}},[a("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.settings=!1}}},[a("v-icon",[t._v("mdi-close")])],1),a("v-toolbar-title",[t._v(t._s(t.sessionName)+" | Réglages")]),a("v-spacer")],1),a("v-container",[a("v-card",[a("v-toolbar",{attrs:{flat:""}},[a("v-spacer"),a("v-btn",{on:{click:function(e){return t.newBeacon()}}},[t._v("Nouvelle balise")])],1),a("v-row",[a("v-col",[a("v-data-table",{attrs:{headers:t.headers,items:t.beacons},scopedSlots:t._u([{key:"item.actions",fn:function(e){var s=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editBeacon(s)}}},[t._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(s)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[t._v(" Aucune basise enregistrée ")]},proxy:!0}],null,!0)})],1)],1)],1)],1)],1),a("v-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{staticClass:"mx-3",attrs:{label:"Balise ID"},model:{value:t.editedItem.id,callback:function(e){t.$set(t.editedItem,"id",e)},expression:"editedItem.id"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{staticClass:"mx-3",attrs:{label:"Latitude"},model:{value:t.editedItem.lat,callback:function(e){t.$set(t.editedItem,"lat",e)},expression:"editedItem.lat"}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{staticClass:"mx-3",attrs:{label:"Longitude"},model:{value:t.editedItem.long,callback:function(e){t.$set(t.editedItem,"long",e)},expression:"editedItem.long"}})],1)],1),a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"2"}},[a("v-btn",{attrs:{width:"100%"},on:{click:function(e){t.modifie?t.saveChange():t.saveNew()}}},[t._v("Enregistrer")])],1)],1)],1)],1)],1),a("v-snackbar",{attrs:{color:t.axiosSuccess?"success":"error"},scopedSlots:t._u([{key:"action",fn:function(e){var s=e.attrs;return[a("v-btn",t._b({attrs:{color:"white",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",s,!1),[t._v(" Fermer ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[a("span",{staticClass:"overline font-weight-black"},[t._v(t._s(t.snackbarMsg))])])],1)],1)},Nt=[],Lt=(a("c975"),a("fb6a"),a("a434"),a("25f0"),{components:{},data:function(){return{schoolId:"",schoolName:"",sessionId:this.$route.params.session_id,className:"",classId:"",students:[],sessionName:"",sessionDate:"",settings:!1,headers:[{text:"Balise ID",align:"start",value:"id"},{text:"Latitude",value:"lat"},{text:"Longitude",value:"long"},{text:"Actions",value:"actions"}],beacons:[],dialog:!1,editedIndex:-1,editedItem:{_id:"",id:"",lat:"",long:""},modifie:!1,loading:!0,snackbarMsg:"",snackbar:!1,axiosSuccess:!1}},methods:{makeLink:function(t){return{path:"/session/".concat(this.$route.params.session_id,"/student-recap/").concat(t)}},loadData:function(){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,P.a.get("/api/sessions/".concat(t.$route.params.session_id));case 2:a=e.sent,console.log(a.data),t.students=a.data.runs.map((function(t){return{id:t.id}})),t.schoolId=a.data.school_id,t.classId=a.data.class_id,t.className=a.data.class_name,t.schoolName=a.data.school_name,t.sessionName=a.data.session_name,t.sessionDate=a.data.date,console.log("beacons",a.data.beacons),t.beacons=a.data.beacons.map((function(t){return{id:t.id,lat:t.coords[0],long:t.coords[1],_id:t._id}})),t.loading=!1;case 14:case"end":return e.stop()}}),e)})))()},editBeacon:function(t){this.modifie=!0,this.editedItem=Object.assign({},t),this.dialog=!0},newBeacon:function(){this.modifie=!1,this.editedItem={_id:"",id:"",lat:"",long:""},this.dialog=!0},saveChange:function(){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.dialog=!1,e.prev=1,e.next=4,P.a.put("/api/sessions/".concat(t.$route.params.session_id,"/"),{_id:t.editedItem._id,id:parseInt(t.editedItem.id),coords:[parseFloat(t.editedItem.lat),parseFloat(t.editedItem.long)]});case 4:Object.assign(t.beacons.filter((function(e){return e._id===t.editedItem._id}))[0],t.editedItem),t.axiosSuccess=!0,t.snackbarMsg="Changement enregistré avec succès!",t.snackbar=!0,e.next=16;break;case 10:e.prev=10,e.t0=e["catch"](1),console.log(e.t0),t.axiosSuccess=!1,t.snackbarMsg="Une erreur c'est produite",t.snackbar=!0;case 16:t.modifie=!1;case 17:case"end":return e.stop()}}),e,null,[[1,10]])})))()},saveNew:function(){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.dialog=!1,t.editedItem._id=Math.random().toString(36).slice(-5),e.prev=2,e.next=5,P.a.post("/api/sessions/".concat(t.$route.params.session_id,"/"),{_id:t.editedItem._id,id:parseInt(t.editedItem.id),coords:[parseFloat(t.editedItem.lat),parseFloat(t.editedItem.long)]});case 5:t.beacons.push(Object.assign({},t.editedItem)),t.axiosSuccess=!0,t.snackbarMsg="Nouvelle balise enregistrée avec succès!",t.snackbar=!0,e.next=17;break;case 11:e.prev=11,e.t0=e["catch"](2),console.log(e.t0),t.axiosSuccess=!1,t.snackbarMsg="Une erreur c'est produite",t.snackbar=!0;case 17:t.modifie=!1;case 18:case"end":return e.stop()}}),e,null,[[2,11]])})))()},deleteItem:function(t){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.beacons.splice(e.beacons.indexOf(t),1),a.prev=1,a.next=4,P.a.delete("/api/sessions/".concat(e.$route.params.session_id,"/"),{data:{_id:t._id}});case 4:e.axiosSuccess=!0,e.snackbarMsg="Balise suprimée avec succès!",e.snackbar=!0,a.next=15;break;case 9:a.prev=9,a.t0=a["catch"](1),console.log(a.t0),e.axiosSuccess=!1,e.snackbarMsg="Une erreur c'est produite",e.snackbar=!0;case 15:case"end":return a.stop()}}),a,null,[[1,9]])})))()}},created:function(){this.loadData()}}),Ft=Lt,Bt=a("169a"),zt=a("ce7e"),Et=a("8860"),At=a("da13"),Jt=a("5d23"),Ut=a("1baa"),Gt=a("34c3"),qt=a("e0c7"),Ht=a("8654"),Wt=a("71d9"),Zt=Object(c["a"])(Ft,$t,Nt,!1,null,null,null),Yt=Zt.exports;d()(Zt,{VAppBar:x["a"],VBtn:_["a"],VCard:y["a"],VCol:w["a"],VContainer:E["a"],VDataTable:St["a"],VDialog:Bt["a"],VDivider:zt["a"],VIcon:Dt["a"],VList:Et["a"],VListItem:At["a"],VListItemContent:Jt["a"],VListItemGroup:Ut["a"],VListItemIcon:Gt["a"],VMain:Pt["a"],VProgressLinear:Z["a"],VRow:k["a"],VSnackbar:Ot["a"],VSpacer:nt["a"],VSubheader:qt["a"],VTextField:Ht["a"],VToolbar:Wt["a"],VToolbarTitle:C["a"]});var Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-main",[a("v-app-bar",{attrs:{color:"primary",dark:"",app:""}},[a("v-toolbar-title",[a("router-link",{staticClass:"text-decoration-none",staticStyle:{color:"inherit"},attrs:{to:"/schools/"+t.schoolId+"/classes"}},[a("span",{staticClass:"px-3"},[t._v(t._s(t.schoolName))]),a("v-icon",{attrs:{large:""}},[t._v("mdi-chevron-right")])],1),a("router-link",{staticClass:"text-decoration-none",staticStyle:{color:"inherit"},attrs:{to:"/schools/"+t.schoolId+"/classes/"+t.classId+"/sessions"}},[a("span",{staticClass:"px-3"},[t._v(t._s(t.className))])])],1)],1),a("v-container",{staticClass:"fill-height"},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"8"}},[a("v-card",{staticClass:"overflow-y-auto",attrs:{width:"100%",height:"400px"}},[a("v-toolbar",{attrs:{color:"primary lighten-3",dark:""}},[a("v-toolbar-title",[t._v("Sessions")]),a("v-btn",{attrs:{absolute:"",bottom:"",color:"white",fab:"",right:"",light:""},on:{click:function(e){return e.stopPropagation(),t.newSession(e)}}},[a("v-icon",[t._v("mdi-plus")])],1)],1),t.loading?a("v-container",{staticStyle:{height:"80%"}},[a("v-row",{staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[a("v-col",{staticClass:"subtitle-1 text-center",attrs:{cols:"12"}},[t._v(" Chargement... ")]),a("v-col",{attrs:{cols:"6"}},[a("v-progress-linear",{attrs:{color:"blue accent-4",indeterminate:"",rounded:"",height:"6"}})],1)],1)],1):a("v-list",[a("v-list-item-group",t._l(t.sessions,(function(e){return a("v-list-item",{key:e.id,attrs:{to:t.makeLink(e.id)}},[a("v-list-item-content",[t._v(" "+t._s(e.session_name)+" ")]),a("v-list-item-content",[a("v-subheader",[t._v(t._s(e.date))])],1)],1)})),1)],1)],1)],1)],1)],1),a("v-dialog",{attrs:{width:"50%"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-row",[a("v-col",[a("v-text-field",{staticClass:"mx-4",attrs:{label:"Nom de la session"},model:{value:t.newItem.name,callback:function(e){t.$set(t.newItem,"name",e)},expression:"newItem.name"}})],1),a("v-col",[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,n=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:"Date","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.formattedDate,callback:function(e){t.formattedDate=e},expression:"formattedDate"}},"v-text-field",n,!1),s))]}}]),model:{value:t.dateMenu,callback:function(e){t.dateMenu=e},expression:"dateMenu"}},[a("v-date-picker",{on:{input:function(e){t.dateMenu=!1}},model:{value:t.newItem.date,callback:function(e){t.$set(t.newItem,"date",e)},expression:"newItem.date"}})],1)],1)],1),a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"2"}},[a("v-btn",{on:{click:function(e){return t.validate()}}},[t._v("Créer")])],1)],1)],1)],1)],1)},Qt=[],Xt=a("c1df"),te=a.n(Xt),ee={data:function(){return{sessions:[{id:1,name:"name"}],loading:!0,schoolId:this.$route.params.school_id,dialog:!1,newItem:{},dateMenu:!1,schoolName:"",className:"",classId:"",sessionDate:""}},computed:{formattedDate:function(){return this.newItem.date?te()(this.newItem.date).format("dddd Do MMMM"):""}},methods:{makeLink:function(t){return{path:"/session/".concat(t)}},loadData:function(){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,P.a.get("/api/sessions/",{params:{class_id:t.$route.params.class_id}});case 2:a=e.sent,console.log("data",a.data),t.sessions=a.data.sessions,t.schoolName=a.data.school_name,t.className=a.data.class_name,t.schoolId=a.data.school_id,t.classId=a.data.class_id,t.sessionDate=a.data.session_date,t.loading=!1;case 11:case"end":return e.stop()}}),e)})))()},newSession:function(){console.log("newsession"),this.newItem={name:"",date:""},this.dialog=!0},validate:function(){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.dialog=!1,a={sessionName:t.newItem.name,date:t.formattedDate},t.sessions.push(a),e.prev=3,e.next=6,P.a.post("/api/sessions/",a,{params:{class_id:t.$route.params.class_id}});case 6:s=e.sent,console.log(s),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))()}},created:function(){this.loadData(),te.a.locale("fr")}},ae=ee,se=a("2e4b"),ne=a("e449"),oe=Object(c["a"])(ae,Kt,Qt,!1,null,null,null),ie=oe.exports;d()(oe,{VAppBar:x["a"],VBtn:_["a"],VCard:y["a"],VCol:w["a"],VContainer:E["a"],VDatePicker:se["a"],VDialog:Bt["a"],VIcon:Dt["a"],VList:Et["a"],VListItem:At["a"],VListItemContent:Jt["a"],VListItemGroup:Ut["a"],VMain:Pt["a"],VMenu:ne["a"],VProgressLinear:Z["a"],VRow:k["a"],VSubheader:qt["a"],VTextField:Ht["a"],VToolbar:Wt["a"],VToolbarTitle:C["a"]});var re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-main",[a("v-app-bar",{staticStyle:{"z-index":"999999"},attrs:{color:"primary",dark:"",app:""}},[a("v-toolbar-title",[a("router-link",{attrs:{to:"/"}},[a("h3",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[t._v("DORA")])])],1),a("router-link",{attrs:{to:"/tree"}},[a("h4",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[t._v("Dashboard")])]),a("span",{staticClass:"px-3"},[t._v(t._s(t.schoolName))]),a("v-icon",[t._v("mdi-chevron-right")]),a("span",{staticClass:"px-3"},[t._v(t._s(t.className))]),a("v-icon",[t._v("mdi-chevron-right")]),a("span",{staticClass:"px-3"},[t._v(t._s(t.sessionName))])],1),t.loadingError?a("v-alert",{attrs:{type:"error"}},[t._v(t._s(t.loadingErrorStatus))]):t._e(),a("v-card",{staticClass:"map-wrapper mx-5 mt-5",attrs:{color:"lime"}},[a("TeacherMap",{ref:"myMap",attrs:{geoJson:t.geoJson,center:t.mapCenter,colors:t.colorMap}})],1),a("div",{staticClass:"pt-0 pl-0 mx-5"},[a("v-row",[a("v-col",[a("v-card",[a("v-toolbar",{attrs:{dense:"",color:""}},[a("v-toolbar-title",{staticClass:"mr-10"},[t._v("Balises")]),a("v-spacer"),a("div",[a("v-tabs",{attrs:{"align-with-title":""},model:{value:t.beaconTab,callback:function(e){t.beaconTab=e},expression:"beaconTab"}},[a("v-tabs-slider"),a("v-tab",{key:"plot"},[a("v-icon",[t._v("mdi-chart-bar")])],1),a("v-tab",{key:"table"},[a("v-icon",[t._v("mdi-table")])],1)],1)],1)],1),a("v-tabs-items",{model:{value:t.beaconTab,callback:function(e){t.beaconTab=e},expression:"beaconTab"}},[a("v-tab-item",{key:"table"},[a("div",{staticStyle:{height:"300px",overflow:"scroll"}},[a("Plotly",{attrs:{data:t.beaconPlotData.data,layout:t.beaconPlotData.layout,"display-mode-bar":!1}})],1)]),a("v-tab-item",{key:"plot"},[a("v-data-table",{attrs:{headers:t.beaconTableheader,items:t.beacons,"hide-default-footer":"","fixed-header":"",height:"300px"},scopedSlots:t._u([{key:"item.success",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.success)+"% ")]}}],null,!0)})],1)],1)],1)],1)],1),a("v-row",[a("v-col",[a("v-card",[a("v-toolbar",{attrs:{dense:"",color:""}},[a("v-toolbar-title",{staticClass:"mr-10"},[t._v("Éleves")]),a("v-spacer"),a("div",[a("v-tabs",{attrs:{"align-with-title":""},model:{value:t.studentTab,callback:function(e){t.studentTab=e},expression:"studentTab"}},[a("v-tabs-slider"),a("v-tab",{key:"plot"},[a("v-icon",[t._v("mdi-chart-bar")])],1),a("v-tab",{key:"table"},[a("v-icon",[t._v("mdi-table")])],1)],1)],1)],1),a("v-tabs-items",{model:{value:t.studentTab,callback:function(e){t.studentTab=e},expression:"studentTab"}},[a("v-tab-item",{key:"table"},[a("div",{staticStyle:{height:"500px",overflow:"scroll"}},[a("v-toolbar",[a("v-row",{attrs:{justify:"center",align:"center"}},[a("v-col",{attrs:{cols:"7"}},[a("div",[a("v-tabs",{attrs:{"fixed-tabs":""}},[a("v-tab",{key:"time",on:{click:function(e){t.studentTabPlotType="time"}},model:{value:t.studentTabPlotType,callback:function(e){t.studentTabPlotType=e},expression:"studentTabPlotType"}},[t._v("Chrono")]),a("v-tab",{key:"avgSpeed",on:{click:function(e){t.studentTabPlotType="avgSpeed"}},model:{value:t.studentTabPlotType,callback:function(e){t.studentTabPlotType=e},expression:"studentTabPlotType"}},[t._v("Vitesse")]),a("v-tab",{key:"distance",on:{click:function(e){t.studentTabPlotType="distance"}},model:{value:t.studentTabPlotType,callback:function(e){t.studentTabPlotType=e},expression:"studentTabPlotType"}},[t._v("Distance")]),a("v-tab",{key:"beacons",on:{click:function(e){t.studentTabPlotType="beacons"}},model:{value:t.studentTabPlotType,callback:function(e){t.studentTabPlotType=e},expression:"studentTabPlotType"}},[t._v("Balises")])],1)],1)])],1)],1),a("Plotly",{attrs:{data:t.studentPlotData.data,layout:t.studentPlotData.layout,"display-mode-bar":!1}})],1)]),a("v-tab-item",{key:"plot"},[a("v-data-table",{attrs:{headers:t.studentTableHeader,items:t.students,"hide-default-footer":"","fixed-header":"",height:"500px"},scopedSlots:t._u([{key:"item.time",fn:function(e){var a=e.item;return[t._v(" "+t._s(Math.floor(a.time/60))+":"+t._s(t.getMins(a.time))+" ")]}}],null,!0)})],1)],1)],1)],1)],1)],1)],1)},ce=[],le=(a("13d5"),a("4ec9"),a("3ca3"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"map"}})}),de=[],ue={props:["geoJson","center","colors"],data:function(){return{map:null}},watch:{geoJson:function(t){this.addGeoJson(t)},center:function(t){console.log("center",t),this.map.setView([t[1],t[0]],16)}},methods:{setupLeaflet:function(){var t=$.a.map("map");$.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(t),document.on,t.scrollWheelZoom.disable(),t.on("focus",(function(){t.scrollWheelZoom.enable()})),t.on("blur",(function(){t.scrollWheelZoom.disable()})),delete $.a.Icon.Default.prototype._getIconUrl,$.a.Icon.Default.mergeOptions({iconRetinaUrl:a("584d"),iconUrl:a("6397"),shadowUrl:a("e2b9")}),$.a.geoJSON(this.geojson).addTo(t),this.map=t},customeIcon:function(t){return $.a.divIcon({className:"custom-div-icon",html:"<div class='marker-pin'></div><span class='id'>".concat(t,"</span>"),iconSize:[30,42],iconAnchor:[15,42],shadowUrl:a("e2b9")})},addGeoJson:function(t){var e=this;console.log("addgeoJson",t),$.a.geoJSON(t,{style:function(t){return{color:e.colors.get(t.properties.id),weight:5}},filter:function(t){return"LineString"===t.geometry.type},onEachFeature:function(t,e){e.bindPopup(t.properties.id)}}).addTo(this.map),$.a.geoJSON(t,{pointToLayer:function(t,a){return $.a.marker(a,{icon:e.customeIcon(t.properties.id)})},filter:function(t){return"Point"===t.geometry.type}}).addTo(this.map)}},mounted:function(){this.setupLeaflet()}},ve=ue,pe=(a("c314"),Object(c["a"])(ve,le,de,!1,null,null,null)),me=pe.exports,he=a("fd9b"),fe=a.n(he),be={components:{TeacherMap:me,Plotly:et["Plotly"]},data:function(){return{test:1,sessionId:this.$route.params.session_id,mapCenter:null,id:null,geoJson:null,schoolName:"",className:"",beacons:[],students:[],beaconPlotData:{data:null,layout:null},sessionName:"",loadingData:!0,loadingError:!1,loadingErrorStatus:null,colorMap:null,beaconTab:"plot",studentTab:"plot",studentTabPlotType:"time",beaconTableheader:[{text:"Balise ID",value:"id"},{text:"Succès",value:"success"}],studentTableHeader:[{text:"ID",value:"id"},{text:"Chrono",value:"time"},{text:"Distance (m)",value:"distance"},{text:"Vitesse moyenne (km/h)",value:"avgSpeed"},{text:"Balises",value:"beacons"}]}},computed:{studentPlotData:function(){var t=this,e=Object(tt["a"])(this.students).reduce((function(e,a){return e+parseFloat(a[t.studentTabPlotType])}),0)/this.students.length,a={data:[{x:Object(tt["a"])(this.students).sort((function(e,a){return a[t.studentTabPlotType]-e[t.studentTabPlotType]})).map((function(t){return t.id})),y:Object(tt["a"])(this.students).sort((function(e,a){return a[t.studentTabPlotType]-e[t.studentTabPlotType]})).map((function(e){return e[t.studentTabPlotType]})),marker:{color:Object(tt["a"])(this.students).sort((function(e,a){return a[t.studentTabPlotType]-e[t.studentTabPlotType]})).map((function(t){return t.color}))},type:"bar"}],layout:{height:400,margin:{l:50,r:50,b:40,t:0,pad:4},xaxis:{tickangle:-45},shapes:[{type:"line",xref:"paper",x0:0,y0:e,x1:1,y1:e,line:{color:"#ddd",width:4,dash:"dot"}}],annotations:[{x:1,y:e,xref:"paper",yref:"y",text:"Moyenne",showarrow:!1,font:{size:28,weight:15,color:"#ddd"},yanchor:"bottom"}]}};return console.log("average",e),console.log(Object(tt["a"])(this.students)),a}},methods:{getMins:function(t){return t%60<10?"0"+t%60:t%60},createBeaconPlot:function(){this.beaconPlotData={data:[{x:this.beacons.map((function(t){return t.id})),y:this.beacons.map((function(t){return t.success})),type:"bar"}],layout:{height:300,margin:{l:50,r:50,b:40,t:0,pad:4},xaxis:{tickmode:"linear"}}}},loadData:function(){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loadingData=!0,e.prev=1,e.next=4,P.a.get("/api/teacher/".concat(t.$route.params.session_id,"/"));case 4:a=e.sent,s=a.data,console.log("data",s),t.beacons=s.beacons,t.sessionName=s.session_name,t.className=s.class_name,t.schoolName=s.school_name,t.id=s.id,t.geoJson=s.geoJson,t.colorMap=new Map,s.runs.forEach((function(e){t.colorMap.set(e.id,fe()({luminosity:"bright",hue:"random"}))})),t.students=s.runs.map((function(e){return{id:e.id,time:e.time,distance:e.distance.toFixed(0),avgSpeed:e.avgSpeed.toFixed(1),beacons:e.beacons.filter((function(t){return t.valided})).length,color:t.colorMap.get(e.id)}})),t.mapCenter=s.beacons[0].coords,t.createBeaconPlot(),e.next=24;break;case 20:e.prev=20,e.t0=e["catch"](1),t.loadingError=!0,t.loadingErrorStatus=e.t0;case 24:t.loadingData=!1;case 25:case"end":return e.stop()}}),e,null,[[1,20]])})))()}},created:function(){this.loadData()}},ge=be,xe=a("71a3"),_e=a("c671"),ye=a("fe57"),we=a("aac8"),ke=a("9a96"),Ce=Object(c["a"])(ge,re,ce,!1,null,null,null),je=Ce.exports;d()(Ce,{VAlert:It["a"],VAppBar:x["a"],VCard:y["a"],VCol:w["a"],VDataTable:St["a"],VIcon:Dt["a"],VMain:Pt["a"],VRow:k["a"],VSpacer:nt["a"],VTab:xe["a"],VTabItem:_e["a"],VTabs:ye["a"],VTabsItems:we["a"],VTabsSlider:ke["a"],VToolbar:Wt["a"],VToolbarTitle:C["a"]});var Te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-main",[a("v-app-bar",{attrs:{color:"primary",dark:"",app:""}},[a("v-toolbar-title",[a("router-link",{staticClass:"text-decoration-none",staticStyle:{color:"inherit"},attrs:{to:"/"}})],1),a("v-spacer")],1),a("v-container",{staticClass:"fill-height"},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"8"}},[a("v-card",{staticClass:"overflow-y-auto",attrs:{width:"100%",height:"400px"}},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:""}},[a("v-toolbar-title",{staticClass:"px-3"},[t._v("Établissements")]),a("v-btn",{attrs:{absolute:"",bottom:"",color:"white",fab:"",right:"",light:""},on:{click:function(e){return e.stopPropagation(),t.newSchool(e)}}},[a("v-icon",[t._v("mdi-plus")])],1)],1),t.loading?a("v-container",{staticStyle:{height:"80%"}},[a("v-row",{staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[a("v-col",{staticClass:"subtitle-1 text-center",attrs:{cols:"12"}},[t._v(" Chargement... ")]),a("v-col",{attrs:{cols:"6"}},[a("v-progress-linear",{attrs:{color:"blue accent-4",indeterminate:"",rounded:"",height:"6"}})],1)],1)],1):a("v-list",[a("v-divider"),a("v-list-item-group",t._l(t.schools,(function(e){return a("v-list-item",{key:e.id,attrs:{to:"schools/"+e.id+"/classes"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-school")])],1),a("v-list-item-content",[t._v(" "+t._s(e.name)+" ")])],1)})),1)],1)],1)],1)],1),a("v-dialog",{attrs:{width:"50%"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-row",[a("v-col",[a("v-text-field",{staticClass:"mx-4",attrs:{label:"Nom de l'établissement"},model:{value:t.newItem.name,callback:function(e){t.$set(t.newItem,"name",e)},expression:"newItem.name"}})],1),a("v-col",[a("v-text-field",{staticClass:"mx-4",attrs:{label:"Ville"},model:{value:t.newItem.city,callback:function(e){t.$set(t.newItem,"city",e)},expression:"newItem.city"}})],1)],1),a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"2"}},[a("v-btn",{on:{click:function(e){return t.sendPostRequest()}}},[t._v("Créer")])],1)],1)],1)],1)],1)],1)},Ve=[],Ie={data:function(){return{dialog:!1,loading:!1,schools:[],newItem:{}}},methods:{loadData:function(){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,P.a.get("/api/schools/");case 2:a=e.sent,t.schools=a.data,console.log("this.schools",t.schools);case 5:case"end":return e.stop()}}),e)})))()},newSchool:function(){this.newItem={name:"",city:""},this.dialog=!0},sendPostRequest:function(){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.dialog=!1,e.next=3,P.a.post("/api/schools/",t.newItem);case 3:a=e.sent,t.newItem.id=a.data.id,t.schools.push(t.newItem),console.log(t.newItem);case 7:case"end":return e.stop()}}),e)})))()}},created:function(){this.loadData()}},Se=Ie,De=Object(c["a"])(Se,Te,Ve,!1,null,null,null),Pe=De.exports;d()(De,{VAppBar:x["a"],VBtn:_["a"],VCard:y["a"],VCol:w["a"],VContainer:E["a"],VDialog:Bt["a"],VDivider:zt["a"],VIcon:Dt["a"],VList:Et["a"],VListItem:At["a"],VListItemContent:Jt["a"],VListItemGroup:Ut["a"],VListItemIcon:Gt["a"],VMain:Pt["a"],VProgressLinear:Z["a"],VRow:k["a"],VSpacer:nt["a"],VTextField:Ht["a"],VToolbar:Wt["a"],VToolbarTitle:C["a"]});var Oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-main",[a("v-app-bar",{attrs:{color:"primary",dark:"",app:""}},[a("v-toolbar-title",[a("router-link",{staticClass:"text-decoration-none",staticStyle:{color:"inherit"},attrs:{to:"/schools/"+t.schoolId+"/classes"}},[a("span",{staticClass:"px-3"},[t._v(t._s(t.schoolName))]),a("v-icon",{attrs:{large:""}},[t._v("mdi-chevron-right")])],1)],1),a("v-spacer")],1),a("v-container",{staticClass:"fill-height"},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"8"}},[a("v-card",{staticClass:"overflow-y-auto",attrs:{width:"100%",height:"400px"}},[a("v-toolbar",{attrs:{color:"blue darken-3",dark:""}},[a("v-toolbar-title",{staticClass:"px-3"},[t._v(t._s(t.schoolName))]),a("v-btn",{attrs:{absolute:"",bottom:"",color:"white",fab:"",right:"",light:""},on:{click:function(e){return e.stopPropagation(),t.newClass(e)}}},[a("v-icon",[t._v("mdi-plus")])],1)],1),t.loading?a("v-container",{staticStyle:{height:"80%"}},[a("v-row",{staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[a("v-col",{staticClass:"subtitle-1 text-center",attrs:{cols:"12"}},[t._v(" Chargement... ")]),a("v-col",{attrs:{cols:"6"}},[a("v-progress-linear",{attrs:{color:"blue accent-4",indeterminate:"",rounded:"",height:"6"}})],1)],1)],1):a("v-list",[a("v-divider"),a("v-list-item-group",t._l(t.clsses,(function(e){return a("v-list-item",{key:e.id,attrs:{to:"classes/"+e.id+"/sessions"}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-school")])],1),a("v-list-item-content",[t._v(" "+t._s(e.name)+" ")])],1)})),1)],1)],1)],1)],1),a("v-dialog",{attrs:{width:"50%"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-row",[a("v-col",[a("v-text-field",{staticClass:"mx-4",attrs:{label:"Nom de classe"},model:{value:t.newItem.name,callback:function(e){t.$set(t.newItem,"name",e)},expression:"newItem.name"}})],1)],1),a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"2"}},[a("v-btn",{on:{click:function(e){return t.sendPostRequest()}}},[t._v("Créer")])],1)],1)],1)],1)],1)],1)},Me=[],Re={data:function(){return{dialog:!1,loading:!1,schoolId:this.$route.params.school_id,schoolName:"",clsses:[],newItem:{}}},methods:{loadData:function(){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,P.a.get("/api/schools/".concat(t.$route.params.school_id));case 2:a=e.sent,t.clsses=a.data.classes,t.schoolName=a.data.name,console.log("this.clsses",t.clsses);case 6:case"end":return e.stop()}}),e)})))()},newClass:function(){this.newItem={name:""},this.dialog=!0},sendPostRequest:function(){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.dialog=!1,e.next=3,P.a.post("/api/schools/".concat(t.$route.params.school_id),t.newItem);case 3:a=e.sent,t.newItem.id=a.data.id,t.clsses.push(t.newItem),console.log(t.newItem);case 7:case"end":return e.stop()}}),e)})))()}},created:function(){this.loadData()}},$e=Re,Ne=Object(c["a"])($e,Oe,Me,!1,null,null,null),Le=Ne.exports;d()(Ne,{VAppBar:x["a"],VBtn:_["a"],VCard:y["a"],VCol:w["a"],VContainer:E["a"],VDialog:Bt["a"],VDivider:zt["a"],VIcon:Dt["a"],VList:Et["a"],VListItem:At["a"],VListItemContent:Jt["a"],VListItemGroup:Ut["a"],VListItemIcon:Gt["a"],VMain:Pt["a"],VProgressLinear:Z["a"],VRow:k["a"],VSpacer:nt["a"],VTextField:Ht["a"],VToolbar:Wt["a"],VToolbarTitle:C["a"]});var Fe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-main",[s("v-app-bar",{staticStyle:{"z-index":"999999"},attrs:{color:"primary",dark:"",app:""}},[s("v-toolbar-title",[s("router-link",{attrs:{to:"/"}},[s("h3",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[t._v("DORA")])])],1),s("router-link",{attrs:{to:"/tree"}},[s("h4",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[t._v("Dashboard")])]),s("span",{staticClass:"px-3"},[t._v(t._s(t.school.name))]),s("v-icon",[t._v("mdi-chevron-right")]),s("span",{staticClass:"px-3"},[t._v(t._s(t.clss.name))]),s("v-icon",[t._v("mdi-chevron-right")]),s("span",{staticClass:"px-3"},[t._v(t._s(t.id))]),s("v-spacer")],1),s("v-card",[s("v-toolbar",{attrs:{dense:"",color:""}},[s("v-toolbar-title",{staticClass:"mr-10"},[t._v("Éleves")]),s("v-spacer"),s("div",[s("v-tabs",{attrs:{"align-with-title":""},model:{value:t.studentTab,callback:function(e){t.studentTab=e},expression:"studentTab"}},[s("v-tabs-slider"),s("v-tab",{key:"plot"},[s("v-icon",[t._v("mdi-chart-bar")])],1),s("v-tab",{key:"table"},[s("v-icon",[t._v("mdi-table")])],1)],1)],1)],1),s("v-tabs-items",{model:{value:t.studentTab,callback:function(e){t.studentTab=e},expression:"studentTab"}},[s("v-tab-item",{key:"table",staticStyle:{height:"100%"}},[s("div",{staticStyle:{overflow:"scroll"}},[s("v-toolbar",[s("v-row",{attrs:{justify:"center",align:"center"}},[s("v-col",{attrs:{cols:"7"}},[s("div",[s("v-tabs",{attrs:{"fixed-tabs":""}},[s("v-tab",{key:"time",on:{click:function(e){t.studentTabPlotType="time"}},model:{value:t.studentTabPlotType,callback:function(e){t.studentTabPlotType=e},expression:"studentTabPlotType"}},[t._v("Chrono")]),s("v-tab",{key:"avgSpeed",on:{click:function(e){t.studentTabPlotType="avgSpeed"}},model:{value:t.studentTabPlotType,callback:function(e){t.studentTabPlotType=e},expression:"studentTabPlotType"}},[t._v("Vitesse")]),s("v-tab",{key:"distance",on:{click:function(e){t.studentTabPlotType="distance"}},model:{value:t.studentTabPlotType,callback:function(e){t.studentTabPlotType=e},expression:"studentTabPlotType"}},[t._v("Distance")]),s("v-tab",{key:"beaconsSuccess",on:{click:function(e){t.studentTabPlotType="beaconsSuccess"}},model:{value:t.studentTabPlotType,callback:function(e){t.studentTabPlotType=e},expression:"studentTabPlotType"}},[t._v("Balises")])],1)],1)])],1)],1),s("Plotly",{attrs:{data:t.studentPlotData.data,layout:t.studentPlotData.layout,"display-mode-bar":!1}})],1)]),s("v-tab-item",{key:"plot",staticStyle:{height:"100%"}},[s("v-data-table",{attrs:{headers:t.studentTableHeader,items:t.students,"hide-default-footer":"","fixed-header":"",height:"500px"},scopedSlots:t._u([{key:"item.time",fn:function(e){var a=e.item;return[t._v(" "+t._s(Math.floor(a.time/60))+":"+t._s(t.getMins(a.time))+" ")]}},{key:"item.distance",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.distance.toFixed(1))+" ")]}},{key:"item.avgSpeed",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.avgSpeed.toFixed(1))+" ")]}},{key:"item.beaconsSuccess",fn:function(e){var a=e.item;return[t._v(" "+t._s(a.beaconsSuccess.toFixed(1))+" ")]}}],null,!0)})],1)],1)],1),t._l(t.students,(function(e){return s("v-card",{key:e.session.id,staticClass:"mx-6 my-3"},[s("v-row",{staticClass:"px-3",attrs:{"text-align":"end"}},[s("v-col",{staticClass:"px-3",attrs:{"text-align":"end"}},[s("span",{staticClass:"overline"},[t._v(t._s(e.session.name))]),s("br"),s("span",{staticClass:"subheader"},[t._v(t._s(e.session.date))]),t._v(" "+t._s(e.comment)+" ")]),s("v-col",[s("img",{attrs:{src:a("efc6"),height:"100px"}})])],1)],1)}))],2)},Be=[],ze={components:{Plotly:et["Plotly"]},data:function(){return{students:[],school:{name:"",id:"",date:""},clss:{name:"",id:""},id:this.$route.params.student_id,studentTab:"plot",studentTabPlotType:"time",beaconTableheader:[{text:"Balise ID",value:"id"},{text:"Succès",value:"success"}],studentTableHeader:[{text:"ID",value:"id"},{text:"Chrono",value:"time"},{text:"Distance (m)",value:"distance"},{text:"Vitesse moyenne (km/h)",value:"avgSpeed"},{text:"Balises",value:"beaconsSuccess"}]}},methods:{getMins:function(t){return t%60<10?"0"+t%60:t%60},loadData:function(){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loadingData=!0,e.prev=1,e.next=4,P.a.get("/api/student-summary/".concat(t.$route.params.class_id,"/").concat(t.$route.params.student_id));case 4:a=e.sent,s=a.data,console.log("data",s),t.school.name=s.school_name,console.log(t.school.name),t.school.id=s.school_id,t.clss.id=s.class_id,t.clss.name=s.class_name,t.students=s.runs.filter((function(t){return!!t})),console.log("this.students",t.students),e.next=21;break;case 16:e.prev=16,e.t0=e["catch"](1),console.log(e.t0),t.loadingError=!0,t.loadingErrorStatus=e.t0;case 21:t.loadingData=!1;case 22:case"end":return e.stop()}}),e,null,[[1,16]])})))()}},created:function(){this.loadData()},computed:{studentPlotData:function(){var t=this;console.log(this.studentTabPlotType),this.students.forEach((function(e){return console.log("run",e[t.studentTabPlotType])}));var e=Object(tt["a"])(this.students).reduce((function(e,a){return e+parseFloat(a[t.studentTabPlotType])}),0)/this.students.length,a={data:[{x:Object(tt["a"])(this.students.map((function(t){return t.session.name}))),y:Object(tt["a"])(this.students.map((function(e){return e[t.studentTabPlotType]}))),marker:{color:"blue"},type:"scatter"}],layout:{margin:{l:50,r:50,b:40,t:0,pad:4},xaxis:{},shapes:[{type:"line",xref:"paper",x0:0,y0:e,x1:1,y1:e,line:{color:"#ddd",width:4,dash:"dot"}}],annotations:[{x:1,y:e,xref:"paper",yref:"y",text:"Moyenne",showarrow:!1,font:{size:28,weight:15,color:"#ddd"},yanchor:"bottom"}]}};return console.log("average",e),console.log(Object(tt["a"])(this.students)),a}}},Ee=ze,Ae=Object(c["a"])(Ee,Fe,Be,!1,null,null,null),Je=Ae.exports;d()(Ae,{VAppBar:x["a"],VCard:y["a"],VCol:w["a"],VDataTable:St["a"],VIcon:Dt["a"],VMain:Pt["a"],VRow:k["a"],VSpacer:nt["a"],VTab:xe["a"],VTabItem:_e["a"],VTabs:ye["a"],VTabsItems:we["a"],VTabsSlider:ke["a"],VToolbar:Wt["a"],VToolbarTitle:C["a"]});var Ue=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-main",[s("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[s("v-toolbar-title",[s("router-link",{attrs:{to:"/"}},[s("h3",{staticClass:"secondary--text text--lighten-1 font-weight-light px-4"},[t._v(" DORA ")])])],1),s("router-link",{attrs:{to:"/tree"}},[s("h4",{staticClass:"secondary--text text--lighten-1 font-weight-light text-decoration-underline px-4"},[t._v(" Dashboard ")])])],1),s("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[s("v-row",{staticClass:"fill-height pa-4"},[s("v-col",{attrs:{cols:"5"}},[s("v-treeview",{attrs:{hoverable:"",transition:"",activatable:"",items:t.items,"load-children":t.loadNode,active:t.active,open:t.open},on:{"update:active":function(e){t.active=e},"update:open":function(e){t.open=e}}})],1),s("v-divider",{attrs:{vertical:""}}),s("v-col",[t.selected?"school"==t.nodeTypeMap[t.selected.id]?s("v-card",{staticClass:"pt-6",attrs:{flat:""}},[s("v-card-text",{staticClass:"text-center"},[s("v-img",{staticClass:"mb-6",attrs:{"max-height":"150",contain:"",src:a("be00")}}),s("h3",{staticClass:"headline mb-2"},[t._v(" "+t._s(t.selected.name)+" ")]),s("h4",{staticClass:"subheading mb-5"},[t._v(" "+t._s(t.selected.city)+" ")]),s("v-divider"),s("h4",{staticClass:"subtitle-1 my-5"},[t._v(t._s(t.selected.classes.length)+" classes enregistrées")]),s("v-toolbar",{attrs:{color:"#46c4a1",dark:"",dense:""}},[s("v-toolbar-title",{staticClass:"px-3"},[t._v("Classes")]),s("v-btn",{attrs:{absolute:"",bottom:"",color:"white",fab:"",right:"",light:""},on:{click:function(e){return e.stopPropagation(),t.newClass(t.selected)}}},[s("v-icon",[t._v("mdi-plus")])],1)],1),s("v-list",[s("v-list-item-group",t._l(t.selected.classes,(function(e){return s("v-list-item",{key:e.id,on:{click:function(a){return t.test(e._id)}}},[s("v-list-item-icon",[s("v-avatar",[s("v-img",{attrs:{contain:"",src:a("5780")}})],1)],1),s("v-list-item-content",[t._v(" "+t._s(e.name)+" ")])],1)})),1)],1)],1)],1):"class"==t.nodeTypeMap[t.selected.id]?s("v-card",{staticClass:"pt-6",attrs:{flat:""}},[s("v-card-text",{staticClass:"text-center"},[s("v-img",{staticClass:"mb-6",attrs:{"max-height":"150",contain:"",src:a("5780")}}),s("h3",{staticClass:"headline mb-5"},[t._v(" "+t._s(t.selected.name)+" ")]),s("v-divider"),s("h4",{staticClass:"subtitle-1 my-5"},[t._v(t._s(t.selected.sessions.length)+" sessions enregistrées")]),s("v-toolbar",{attrs:{color:"#46c4a1",dark:"",dense:""}},[s("v-toolbar-title",{staticClass:"px-3"},[t._v("Sessions")]),s("v-btn",{attrs:{absolute:"",bottom:"",color:"white",fab:"",right:"",light:""},on:{click:function(e){return e.stopPropagation(),t.newSession(t.selected)}}},[s("v-icon",[t._v("mdi-plus")])],1)],1),s("v-list",[s("v-list-item-group",t._l(t.selected.sessions,(function(e){return s("v-list-item",{key:e.id,on:{click:function(a){return t.test(e._id)}}},[s("v-list-item-icon",[s("v-img",{attrs:{"max-height":"50",contain:"",src:a("a086")}})],1),s("v-list-item-content",[t._v(" "+t._s(e.session_name)+" ")]),s("v-list-item-content",[s("v-subheader",[t._v(t._s(e.date))])],1)],1)})),1)],1)],1)],1):"session"==t.nodeTypeMap[t.selected.id]?s("v-card",{staticClass:"pt-6",attrs:{flat:""}},[s("div",{staticStyle:{position:"absolute",top:"0",right:"0"}},[s("v-btn",{staticClass:"pa-0 ma-0",attrs:{width:"60",height:"60",depressed:"",color:"transparent"},on:{click:function(e){t.settings=!0}}},[s("v-img",{attrs:{contain:"",height:"60",width:"30",src:a("bd03")}})],1),s("v-btn",{staticClass:"pa-0 ma-0",attrs:{width:"60",height:"60",depressed:"",color:"transparent"},on:{click:function(e){return t.$router.push("/session/"+t.selected.id+"/teacher-recap")}}},[s("v-img",{attrs:{contain:"",width:"30",height:"60",src:a("0982")}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"5"}},[s("v-card-text",{staticClass:"text-center"},[s("v-img",{staticClass:"mb-6",attrs:{"max-height":"150",contain:"",src:a("a086")}})],1)],1),s("v-col",[s("v-card-text",{staticClass:"text-center"},[s("h3",{staticClass:"headline mb-5"},[t._v(" "+t._s(t.selected.name)+" ")]),s("h4",{staticClass:"subheading mb-5"},[t._v(" "+t._s(t.selected.date)+" ")]),s("v-divider"),s("h4",{staticClass:"subtitle-1 my-5"},[t._v(t._s(t.selected.beacons.length)+" Balises enregistrées")]),s("h4",{staticClass:"subtitle-1 my-5"},[t._v(t._s(t.selected.runs.length)+" Éleves enregistrées")])],1)],1)],1),s("v-row",{staticClass:"fill-height"},[s("v-col",{attrs:{cols:"12"}},[s("v-card",[s("v-toolbar",{attrs:{color:"#46c4a1",dark:"",dense:""}},[s("v-toolbar-title",{staticClass:"px-3"},[t._v("Éleves")])],1),s("v-card",{staticClass:"overflow-y-auto",attrs:{flat:""}},[s("v-list",[s("v-list-item-group",t._l(t.selected.runs,(function(e){return s("v-list-item",{key:e.id,on:{click:function(a){return t.test(e._id)}}},[s("v-list-item-icon",[s("v-img",{attrs:{"max-height":"50",contain:"",src:a("f707")}})],1),s("v-list-item-content",[t._v(" "+t._s(e.id)+" ")]),s("v-list-item-content")],1)})),1)],1)],1)],1)],1)],1)],1):"run"==t.nodeTypeMap[t.selected.id]?s("v-card",{staticClass:"pt-6",attrs:{flat:""}},[t._v(" run "+t._s(t.selected.id)+" "+t._s(t.selected.parent.id)+" ")]):t._e():s("v-card",{staticClass:"pt-6",attrs:{flat:""}},[s("v-card-text",{staticClass:"text-center"},[s("v-img",{staticClass:"mb-10",attrs:{src:a("c012"),"max-height":"150",contain:""}}),s("span",{staticClass:"display-1 grey--text"},[t._v("Sélectionnez un noeud")])],1)],1)],1)],1)],1),s("v-dialog",{attrs:{width:"50%"},model:{value:t.newClassDialog,callback:function(e){t.newClassDialog=e},expression:"newClassDialog"}},[s("v-card",[s("v-row",[s("v-col",[s("v-text-field",{staticClass:"mx-4",attrs:{label:"Nom de classe"},model:{value:t.newItem.name,callback:function(e){t.$set(t.newItem,"name",e)},expression:"newItem.name"}})],1)],1),s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"2"}},[s("v-btn",{on:{click:function(e){return t.newClassSendPost()}}},[t._v("Créer")])],1)],1)],1)],1),s("v-dialog",{attrs:{width:"50%"},model:{value:t.newSessionDialog,callback:function(e){t.newSessionDialog=e},expression:"newSessionDialog"}},[s("v-card",[s("v-row",[s("v-col",[s("v-text-field",{staticClass:"mx-4",attrs:{label:"Nom de la session"},model:{value:t.newItem.name,callback:function(e){t.$set(t.newItem,"name",e)},expression:"newItem.name"}})],1),s("v-col",[s("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[s("v-text-field",t._g(t._b({attrs:{label:"Date","prepend-icon":"mdi-calendar",readonly:""},model:{value:t.formattedDate,callback:function(e){t.formattedDate=e},expression:"formattedDate"}},"v-text-field",n,!1),a))]}}]),model:{value:t.dateMenu,callback:function(e){t.dateMenu=e},expression:"dateMenu"}},[s("v-date-picker",{on:{input:function(e){t.dateMenu=!1}},model:{value:t.newItem.date,callback:function(e){t.$set(t.newItem,"date",e)},expression:"newItem.date"}})],1)],1)],1),s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"2"}},[s("v-btn",{on:{click:function(e){return t.newSessionSendPost()}}},[t._v("Créer")])],1)],1)],1)],1),s("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:t.settings,callback:function(e){t.settings=e},expression:"settings"}},[s("v-card",[s("v-toolbar",{attrs:{dark:"",color:"primary"}},[s("v-btn",{attrs:{icon:"",dark:""},on:{click:function(e){t.settings=!1}}},[s("v-icon",[t._v("mdi-close")])],1),s("v-toolbar-title",[t._v("Balises")]),s("v-spacer")],1),s("v-container",[s("v-card",[s("v-toolbar",{attrs:{flat:""}},[s("v-spacer"),s("v-btn",{on:{click:function(e){return t.newBeacon()}}},[t._v("Nouvelle balise")])],1),s("v-row",[s("v-col",[s("v-data-table",{attrs:{headers:t.headers,items:t.beacons},scopedSlots:t._u([{key:"item.actions",fn:function(e){var a=e.item;return[s("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editBeacon(a)}}},[t._v(" mdi-pencil ")]),s("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[t._v(" Aucune basise enregistrée ")]},proxy:!0}],null,!0)})],1)],1)],1)],1)],1),s("v-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"4"}},[s("v-text-field",{staticClass:"mx-3",attrs:{label:"Balise ID"},model:{value:t.editedItem.id,callback:function(e){t.$set(t.editedItem,"id",e)},expression:"editedItem.id"}})],1),s("v-col",{attrs:{cols:"4"}},[s("v-text-field",{staticClass:"mx-3",attrs:{label:"Latitude"},model:{value:t.editedItem.lat,callback:function(e){t.$set(t.editedItem,"lat",e)},expression:"editedItem.lat"}})],1),s("v-col",{attrs:{cols:"4"}},[s("v-text-field",{staticClass:"mx-3",attrs:{label:"Longitude"},model:{value:t.editedItem.long,callback:function(e){t.$set(t.editedItem,"long",e)},expression:"editedItem.long"}})],1)],1),s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"2"}},[s("v-btn",{attrs:{width:"100%"},on:{click:function(e){t.modifie?t.saveChange():t.saveNew()}}},[t._v("Enregistrer")])],1)],1)],1)],1)],1),s("v-snackbar",{attrs:{color:t.axiosSuccess?"success":"error"},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.attrs;return[s("v-btn",t._b({attrs:{color:"white",text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",a,!1),[t._v(" Fermer ")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[s("span",{staticClass:"overline font-weight-black"},[t._v(t._s(t.snackbarMsg))])])],1)],1)},Ge=[],qe=(a("7db0"),a("5530")),He=a("b85c"),We={data:function(){return{items:[],itemsFlat:[],nodeIndexCounter:1,nodeTypeMap:{},selectedId:"",active:[],open:[],newItem:{},newClassDialog:!1,newSessionDialog:!1,beaconSettingsDialog:!1,settings:!1,headers:[{text:"Balise ID",align:"start",value:"id"},{text:"Latitude",value:"lat"},{text:"Longitude",value:"long"},{text:"Actions",value:"actions"}],dialog:!1,editedIndex:-1,editedItem:{_id:"",id:"",lat:"",long:""},modifie:!1,loading:!0,snackbarMsg:"",snackbar:!1,axiosSuccess:!1,dateMenu:!1}},methods:{test:function(t){this.active.push(t)},loadSchools:function(){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,P.a.get("/api/schools/");case 2:a=e.sent,console.log(a.data),t.items=a.data.map((function(e){t.nodeTypeMap[e.id]="school";var a={id:e.id,name:e.name,children:[],city:e.city,classes:e.classes};return t.itemsFlat.push(a),a}));case 5:case"end":return e.stop()}}),e)})))()},loadNode:function(t){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function a(){var s,n,o,i,r,c,l,d,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:a.t0=e.nodeTypeMap[t.id],a.next="school"===a.t0?3:"class"===a.t0?29:"session"===a.t0?49:53;break;case 3:return a.next=5,P.a.get("/api/schools/".concat(t.id));case 5:s=a.sent,n=Object(He["a"])(s.data.classes),a.prev=7,n.s();case 9:if((o=n.n()).done){a.next=20;break}return i=o.value,e.nodeTypeMap[i.id]="class",a.next=14,P.a.get("/api/sessions/",{params:{class_id:i.id}});case 14:r=a.sent,c={id:i.id,name:i.name,sessions:r.data.sessions,children:[]},e.itemsFlat.push(c),t.children.push(c);case 18:a.next=9;break;case 20:a.next=25;break;case 22:a.prev=22,a.t1=a["catch"](7),n.e(a.t1);case 25:return a.prev=25,n.f(),a.finish(25);case 28:return a.abrupt("break",53);case 29:return a.next=31,P.a.get("/api/sessions/",{params:{class_id:t.id}});case 31:s=a.sent,l=Object(He["a"])(s.data.sessions),a.prev=33,u=regeneratorRuntime.mark((function a(){var s,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=d.value,a.next=3,P.a.get("/api/sessions/".concat(s.id));case 3:n=a.sent.data,e.nodeTypeMap[s.id]="session",o={id:s._id,name:s.session_name,children:[],beacons:s.beacons,runs:n.runs.map((function(t){return Object(qe["a"])(Object(qe["a"])({},t),{},{_id:s._id+t.id})})),date:s.date},e.itemsFlat.push(o),t.children.push(o);case 8:case"end":return a.stop()}}),a)})),l.s();case 36:if((d=l.n()).done){a.next=40;break}return a.delegateYield(u(),"t2",38);case 38:a.next=36;break;case 40:a.next=45;break;case 42:a.prev=42,a.t3=a["catch"](33),l.e(a.t3);case 45:return a.prev=45,l.f(),a.finish(45);case 48:return a.abrupt("break",53);case 49:return a.next=51,P.a.get("/api/sessions/".concat(t.id));case 51:s=a.sent,t.children=s.data.runs.map((function(a){var s=t.id+a.id;e.nodeTypeMap[s]="run";var n={id:s,name:a.id,parent:t};return e.itemsFlat.push(n),n}));case 53:case"end":return a.stop()}}),a,null,[[7,22,25,28],[33,42,45,48]])})))()},newClass:function(t){this.newItem={parent:t,name:""},this.newClassDialog=!0},newClassSendPost:function(){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.newClassDialog=!1,e.next=3,P.a.post("/api/schools/".concat(t.newItem.parent.id),t.newItem);case 3:a=e.sent,s=Object(qe["a"])(Object(qe["a"])({},t.newItem),{},{id:a.data.id,children:[],sessions:[]}),t.itemsFlat.find((function(e){return e.id=t.newItem.parent.id})).classes.push(s),t.itemsFlat.find((function(e){return e.id=t.newItem.parent.id})).children.push(s),t.itemsFlat.push(s),t.nodeTypeMap[s.id]="class";case 9:case"end":return e.stop()}}),e)})))()},newSession:function(t){this.newItem={name:"",date:"",parent:t},this.newSessionDialog=!0},newSessionSendPost:function(){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.newSessionDialog=!1,a={name:t.newItem.name,session_name:t.newItem.name,children:[],beacons:[],runs:[],date:t.formattedDate},e.next=4,P.a.post("/api/sessions/",a,{params:{class_id:t.newItem.parent.id}});case 4:s=e.sent,a.id=s.data.id,t.newItem.parent.sessions.push(a),t.newItem.parent.children.push(a),t.itemsFlat.push(a),t.nodeTypeMap[a.id]="session";case 10:case"end":return e.stop()}}),e)})))()},editBeacon:function(t){this.modifie=!0,this.editedItem=Object.assign({},t),this.dialog=!0},newBeacon:function(){this.modifie=!1,this.editedItem={_id:"",id:"",lat:"",long:""},this.dialog=!0},saveChange:function(){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.dialog=!1,e.prev=1,e.next=4,P.a.put("/api/sessions/".concat(t.selected.id,"/"),{_id:t.editedItem._id,id:parseInt(t.editedItem.id),coords:[parseFloat(t.editedItem.lat),parseFloat(t.editedItem.long)]});case 4:Object.assign(t.beacons.filter((function(e){return e._id===t.editedItem._id}))[0],t.editedItem),t.axiosSuccess=!0,t.snackbarMsg="Changement enregistré avec succès!",t.snackbar=!0,e.next=16;break;case 10:e.prev=10,e.t0=e["catch"](1),console.log(e.t0),t.axiosSuccess=!1,t.snackbarMsg="Une erreur c'est produite",t.snackbar=!0;case 16:t.modifie=!1;case 17:case"end":return e.stop()}}),e,null,[[1,10]])})))()},saveNew:function(){var t=this;return Object(S["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.dialog=!1,t.editedItem._id=Math.random().toString(36).slice(-5),e.prev=2,e.next=5,P.a.post("/api/sessions/".concat(t.selected.id,"/"),{_id:t.editedItem._id,id:parseInt(t.editedItem.id),coords:[parseFloat(t.editedItem.lat),parseFloat(t.editedItem.long)]});case 5:t.selected.beacons.push({id:t.editedItem.id,coords:[t.editedItem.lat,t.editedItem.long]}),t.axiosSuccess=!0,t.snackbarMsg="Nouvelle balise enregistrée avec succès!",t.snackbar=!0,e.next=17;break;case 11:e.prev=11,e.t0=e["catch"](2),console.log(e.t0),t.axiosSuccess=!1,t.snackbarMsg="Une erreur c'est produite",t.snackbar=!0;case 17:t.modifie=!1;case 18:case"end":return e.stop()}}),e,null,[[2,11]])})))()},deleteItem:function(t){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.selected.beacons.splice(e.selected.beacons.indexOf(t),1),a.prev=1,a.next=4,P.a.delete("/api/sessions/".concat(e.selected.id,"/"),{data:{_id:t._id}});case 4:e.axiosSuccess=!0,e.snackbarMsg="Balise suprimée avec succès!",e.snackbar=!0,a.next=15;break;case 9:a.prev=9,a.t0=a["catch"](1),console.log(a.t0),e.axiosSuccess=!1,e.snackbarMsg="Une erreur c'est produite",e.snackbar=!0;case 15:case"end":return a.stop()}}),a,null,[[1,9]])})))()}},computed:{selected:function(){var t=this;if(!this.active.length)return null;var e=this.itemsFlat.find((function(e){return e.id==t.active[0]}));return e},formattedDate:function(){return this.newItem.date?te()(this.newItem.date).format("dddd Do MMMM"):""},beacons:function(){return this.selected&&"session"==this.nodeTypeMap[this.selected.id]?this.selected.beacons.map((function(t){return{id:t.id,lat:t.coords[0],long:t.coords[1],_id:t._id}})):null}},watch:{selected:function(t){"run"==this.nodeTypeMap[t.id]&&this.$router.push("/session/".concat(t.parent.id,"/student-recap/").concat(t.name)),this.open.push(t.id)}},mounted:function(){this.loadSchools()}},Ze=We,Ye=a("8212"),Ke=a("adda"),Qe=a("eb2a"),Xe=Object(c["a"])(Ze,Ue,Ge,!1,null,null,null),ta=Xe.exports;d()(Xe,{VAppBar:x["a"],VAvatar:Ye["a"],VBtn:_["a"],VCard:y["a"],VCardText:z["b"],VCol:w["a"],VContainer:E["a"],VDataTable:St["a"],VDatePicker:se["a"],VDialog:Bt["a"],VDivider:zt["a"],VIcon:Dt["a"],VImg:Ke["a"],VList:Et["a"],VListItem:At["a"],VListItemContent:Jt["a"],VListItemGroup:Ut["a"],VListItemIcon:Gt["a"],VMain:Pt["a"],VMenu:ne["a"],VRow:k["a"],VSnackbar:Ot["a"],VSpacer:nt["a"],VSubheader:qt["a"],VTextField:Ht["a"],VToolbar:Wt["a"],VToolbarTitle:C["a"],VTreeview:Qe["a"]}),s["a"].use(m["a"]);var ea=[{path:"/",name:"Home",component:T},{path:"/session/:session_id",name:"Session",component:Yt},{path:"/session/",name:"Sessions",component:ie},{path:"/schools/",name:"Schools selection",component:Pe},{path:"/schools/:school_id/classes",name:"Class selection",component:Le},{path:"/schools/:school_id/classes/:class_id/sessions",name:"Session selection",component:ie},{path:"/session/:session_id/student-recap/:student_id",name:"Student recap",component:Rt},{path:"/session/:session_id/teacher-recap/",name:"teacher recap",component:je},{path:"/student-summary/:class_id/:student_id",name:"student summary",component:Je},{path:"/tree",name:"tree",component:ta}],aa=new m["a"]({mode:"history",base:"/",routes:ea}),sa=aa,na=a("f309");s["a"].use(na["a"]);var oa=new na["a"]({theme:{themes:{light:{primary:"#116466",secondary:"#ffcb9a"}}}});a("d1e78");s["a"].config.productionTip=!1,new s["a"]({router:sa,vuetify:oa,render:function(t){return t(p)}}).$mount("#app")},5780:function(t,e,a){t.exports=a.p+"img/teamwork.fa7e679f.svg"},"580d":function(t,e,a){"use strict";a("ddeb")},"5ced":function(t,e,a){},"5eef":function(t,e,a){},"66b0":function(t,e,a){"use strict";a("47a2")},6791:function(t,e,a){},"6d5d":function(t,e,a){t.exports=a.p+"img/happy.7bc321c1.png"},"7dfa":function(t,e,a){},"85ec":function(t,e,a){},"9ec2":function(t,e,a){},a086:function(t,e,a){t.exports=a.p+"img/map.8794c65a.svg"},aafe:function(t,e,a){t.exports=a.p+"img/undraw_img.cad21c1c.svg"},bd03:function(t,e,a){t.exports=a.p+"img/marker.3d0c5526.svg"},be00:function(t,e,a){t.exports=a.p+"img/school.c4cf3227.svg"},c012:function(t,e,a){t.exports=a.p+"img/left-arrow.19043d8a.svg"},c314:function(t,e,a){"use strict";a("9ec2")},cccb:function(t,e,a){"use strict";a("5ced")},ddeb:function(t,e,a){},efc6:function(t,e,a){t.exports=a.p+"img/cool.e1085fca.png"},f707:function(t,e,a){t.exports=a.p+"img/chronometer.975d3fd2.svg"}});
//# sourceMappingURL=app.1007268d.js.map